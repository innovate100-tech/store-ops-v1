# 설계허브 및 설계 카테고리 업그레이드 기획안

**작성 일자**: 2026-01-24  
**목적**: 설계 카테고리에 **설계허브**를 도입하고, 설계 카테고리의 역할을 업그레이드하여  
**설계 상태 요약**과 **세부설계 진입점**을 명확히 제공하는 페이지로 재기획

---

## 1. 현재 상태 및 문제점

### 1.1 현재 구조

| 카테고리 | 구조 | 문제점 |
|---------|------|--------|
| **분석** | 분석 허브 + 세부분석선택 (expander) | ✅ 명확한 허브 구조 |
| **설계** | 가게 설계 센터 + 8개 세부설계 (평면 나열) | ❌ 허브 없음, 진입점 불명확 |

### 1.2 문제점

- **진입점 불명확**: 설계 카테고리 진입 시 어떤 설계가 필요한지 한눈에 파악 어려움
- **설계 상태 파악 어려움**: 각 설계 영역의 완성도·누락 여부를 확인하려면 각 페이지를 방문해야 함
- **우선순위 부재**: 어떤 설계를 먼저 해야 하는지 가이드 없음
- **분석 카테고리와 비대칭**: 분석은 허브가 있으나 설계는 없어 일관성 부족

---

## 2. 설계허브의 역할

### 2.1 정체성

- **설계 상태 대시보드**: 가게 설계의 **전반적 완성도**와 **누락 영역**을 한눈에 보여주는 페이지
- **설계 가이드**: 설계 우선순위와 다음 액션을 제시하는 **설계 로드맵**
- **세부설계 진입점**: 각 설계 영역으로 바로 이동할 수 있는 **네비게이션 허브**

### 2.2 핵심 기능

1. **설계 완성도 요약**: 9개 설계 영역의 완성도(데이터 유무, 완성도 %) 표시
2. **우선순위 액션**: 다음에 해야 할 설계 영역 제시
3. **설계 상태 진단**: 누락된 핵심 설계 영역과 리스크 표시
4. **세부설계 선택**: 9개 세부설계 페이지로 바로 이동

---

## 3. 설계 카테고리 구조 (업그레이드 후)

### 3.1 사이드바 구조

```
🧠 설계
  └─ 설계 허브 (항상 노출, 최상단)
  
🧠 설계 (세부설계선택) [expander]
  ├─ 가게 설계 센터 (통합 진단실)
  ├─ 전략 보드
  ├─ 메뉴 포트폴리오 설계
  ├─ 메뉴 수익 설계
  ├─ 재료 구조 설계
  ├─ 수익 구조 설계
  ├─ 레시피 설계
  ├─ 목표 비용 구조 입력
  └─ 목표 매출 구조 입력
```

### 3.2 설계 영역 분류

| 영역 | 페이지 | page_key | 완성도 기준 |
|------|--------|----------|-------------|
| **통합 진단** | 가게 설계 센터 | 가게 설계 센터 | 4개 설계실 진단 완료 여부 |
| **전략** | 전략 보드 | 전략 보드 | 전략 카드 생성 여부 |
| **메뉴** | 메뉴 포트폴리오 설계 | 메뉴 등록 | 메뉴 등록 수 > 0 |
| **메뉴 수익** | 메뉴 수익 설계 | 메뉴 수익 구조 설계실 | 원가율·공헌이익 계산 가능 여부 |
| **재료** | 재료 구조 설계 | 재료 등록 | 재료 등록 수 > 0 |
| **수익 구조** | 수익 구조 설계 | 수익 구조 설계실 | 고정비·변동비율 설정 여부 |
| **레시피** | 레시피 설계 | 레시피 등록 | 레시피 등록 수 > 0 |
| **목표 비용** | 목표 비용 구조 입력 | 목표 비용구조 | 목표 비용 구조 입력 여부 |
| **목표 매출** | 목표 매출 구조 입력 | 목표 매출구조 | 목표 매출 입력 여부 |

---

## 4. 설계허브 페이지 구조 (ZONE)

### 4.1 ZONE A: 설계 상태 요약 헤더

- **헤더**: "설계 허브" 타이틀, **설계 완성도** 요약
- **완성도 바**: 전체 설계 완성도 % (9개 영역 기준)
- **핵심 메시지**: 
  - 완성도 100%: "설계가 완료되었습니다. 분석·운영으로 넘어가세요."
  - 완성도 50~99%: "설계가 진행 중입니다. 누락된 영역을 채워주세요."
  - 완성도 <50%: "설계가 부족합니다. 핵심 설계부터 시작하세요."

### 4.2 ZONE B: 설계 영역별 완성도 카드 (9개)

각 설계 영역을 **카드**로 표시:

- **카드 구성**:
  - **아이콘 + 영역명** (예: 🍽 메뉴 포트폴리오 설계)
  - **완성도 %** 또는 **상태** (완료/진행중/미시작)
  - **간단 지표** (예: "메뉴 5개 등록", "레시피 12개 등록")
  - **자세히 보기** 버튼 → 해당 세부설계 페이지로 이동

- **카드 색상/상태**:
  - 🟢 **완료**: 완성도 100% (녹색 테두리)
  - 🟡 **진행중**: 완성도 1~99% (노란색 테두리)
  - 🔴 **미시작**: 완성도 0% (빨간색 테두리)

### 4.3 ZONE C: 우선순위 액션

- **다음 설계 제안**: 완성도가 낮거나 누락된 핵심 영역 3~5개 제시
- 각 액션: **설명 1줄** + **실행 페이지** 바로가기
- 예시:
  - "메뉴가 없습니다. 메뉴 포트폴리오 설계부터 시작하세요." → 메뉴 등록
  - "재료가 없습니다. 재료 구조 설계를 진행하세요." → 재료 등록
  - "레시피가 없습니다. 레시피 설계를 진행하세요." → 레시피 등록
  - "목표 매출이 없습니다. 목표 매출 구조 입력을 진행하세요." → 목표 매출구조

### 4.4 ZONE D: 세부설계선택 (expander)

- **expander**: "세부설계선택" (기본 접힘)
- **9개 세부설계** 버튼 나열:
  1. 가게 설계 센터
  2. 전략 보드
  3. 메뉴 포트폴리오 설계
  4. 메뉴 수익 설계
  5. 재료 구조 설계
  6. 수익 구조 설계
  7. 레시피 설계
  8. 목표 비용 구조 입력
  9. 목표 매출 구조 입력

---

## 5. 설계 완성도 계산 로직

### 5.1 각 영역별 완성도 기준

| 영역 | 완성도 계산 기준 |
|------|-----------------|
| **가게 설계 센터** | 4개 설계실 진단 완료 여부 (완료=100%, 미완료=0%) |
| **전략 보드** | 전략 카드 생성 여부 (생성=100%, 미생성=0%) |
| **메뉴 포트폴리오** | 메뉴 등록 수 > 0 (있음=100%, 없음=0%) |
| **메뉴 수익** | 메뉴별 원가율 계산 가능 여부 (가능=100%, 불가=0%) |
| **재료 구조** | 재료 등록 수 > 0 (있음=100%, 없음=0%) |
| **수익 구조** | 고정비·변동비율 설정 여부 (설정=100%, 미설정=0%) |
| **레시피** | 레시피 등록 수 > 0 (있음=100%, 없음=0%) |
| **목표 비용** | 목표 비용 구조 입력 여부 (입력=100%, 미입력=0%) |
| **목표 매출** | 목표 매출 입력 여부 (입력=100%, 미입력=0%) |

### 5.2 전체 완성도 계산

```
전체 완성도 = (각 영역 완성도 합계) / 9 * 100
```

---

## 6. 데이터·함수

### 6.1 데이터 소스

- `load_csv` (menu_master, ingredient_master, recipes, targets, expense_structure)
- `get_design_state` (가게 설계 센터 진단 상태)
- 전략 보드 데이터 (전략 카드 생성 여부)
- 목표 비용 구조 (`load_expense_structure`)
- 목표 매출 구조 (`load_csv("targets.csv")`)

### 6.2 설계허브 전용 함수

| 함수 | 역할 |
|------|------|
| `_check_menu_completion(store_id)` | 메뉴 등록 수 확인 → 완성도 % |
| `_check_ingredient_completion(store_id)` | 재료 등록 수 확인 → 완성도 % |
| `_check_recipe_completion(store_id)` | 레시피 등록 수 확인 → 완성도 % |
| `_check_menu_profit_completion(store_id)` | 메뉴 수익 계산 가능 여부 → 완성도 % |
| `_check_profit_structure_completion(store_id, year, month)` | 수익 구조 설정 여부 → 완성도 % |
| `_check_target_cost_completion(store_id, year, month)` | 목표 비용 구조 입력 여부 → 완성도 % |
| `_check_target_sales_completion(store_id, year, month)` | 목표 매출 입력 여부 → 완성도 % |
| `_check_design_center_completion(store_id)` | 가게 설계 센터 진단 완료 여부 → 완성도 % |
| `_check_strategy_board_completion(store_id, year, month)` | 전략 보드 카드 생성 여부 → 완성도 % |
| `_calculate_overall_completion(...)` | 전체 완성도 계산 |
| `_get_priority_actions(...)` | 우선순위 액션 생성 |

---

## 7. UI/UX 요약

- **페이지 제목**: "설계 허브"
- **구성**: ZONE A(헤더·완성도) → B(9개 영역 카드) → C(우선순위 액션) → D(세부설계선택)
- **카드 스타일**: 분석 허브와 유사한 그라데이션 카드 (완성도에 따라 색상 변경)
- **Empty**: 설계 데이터 전반 부족 시 "설계 데이터가 없습니다. 메뉴·재료·레시피부터 등록하세요." + **메뉴 등록** 링크

---

## 8. 구현 순서 제안

| 단계 | 작업 |
|------|------|
| 1 | `설계허브` 페이지 모듈 생성 (`ui_pages/design_lab/design_hub.py`), `render_design_hub` 골격 구현 |
| 2 | ZONE A: 설계 상태 요약 헤더 + 완성도 바 |
| 3 | ZONE B: 설계 영역별 완성도 카드 9개 (각 영역 완성도 계산 함수 구현) |
| 4 | ZONE C: 우선순위 액션 생성·표시 |
| 5 | ZONE D: 세부설계선택 (expander) |
| 6 | 라우팅·메뉴: app.py에서 "설계 허브" 라우팅 추가, 사이드바 구조 변경 |
| 7 | 완성도 계산 함수 정확도 검증 |

---

## 9. 기대 효과

- **설계 상태 한눈에 파악**: 9개 설계 영역의 완성도를 한 페이지에서 확인 가능
- **우선순위 명확화**: 다음에 해야 할 설계 영역을 자동으로 제시
- **일관성 향상**: 분석 카테고리와 동일한 허브 구조로 사용자 경험 통일
- **설계 가이드 역할**: 신규 사용자도 설계 순서를 쉽게 파악 가능

---

## 10. 설계 카테고리의 역할 (업그레이드)

### 10.1 설계 카테고리의 정체성

- **가게 구조 설계**: 메뉴·재료·레시피·수익 구조를 설계하는 **설계 도구 모음**
- **목표 설정**: 목표 매출·목표 비용 구조를 설정하는 **목표 관리**
- **통합 진단**: 가게 설계 센터에서 4개 설계실을 통합 진단하는 **진단 도구**
- **전략 수립**: 전략 보드에서 이번 달 전략을 수립하는 **전략 도구**

### 10.2 설계 카테고리와 분석 카테고리의 관계

| 카테고리 | 역할 | 입력 | 출력 |
|---------|------|------|------|
| **설계** | 가게 구조·목표 설계 | 사용자 입력 | 설계 데이터 (메뉴·재료·목표 등) |
| **분석** | 설계 데이터 + 실제 데이터 분석 | 설계 데이터 + 실제 데이터 | 분석 결과·인사이트 |

**관계**: 설계 → 분석 → 운영 (순환 구조)

### 10.3 설계 카테고리 업그레이드 포인트

1. **설계허브 도입**: 설계 상태 요약과 우선순위 제시
2. **완성도 가시화**: 각 설계 영역의 완성도를 시각적으로 표시
3. **설계 가이드**: 다음 설계 액션을 자동으로 제시
4. **일관성**: 분석 카테고리와 동일한 허브 구조

---

## 11. 정리

- **설계허브**: 설계 상태 요약 + 우선순위 액션 + 세부설계 진입점
- **설계 카테고리 구조**: 설계 허브 (항상 노출) + 세부설계선택 (expander)
- **완성도 계산**: 9개 설계 영역별 완성도 → 전체 완성도 %
- **우선순위 액션**: 누락된 핵심 설계 영역 자동 제시

---

**작성일**: 2026-01-24  
**참고**: `ui_pages/analysis/analysis_hub.py`, `ui_pages/design_lab/design_center.py`, `app.py` 사이드바 구조
