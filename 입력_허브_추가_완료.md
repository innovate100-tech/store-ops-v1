# 입력 허브 추가 완료 보고서

**작업 일자**: 2026-01-24  
**목적**: 입력 그룹의 첫 화면으로 "입력 허브" 페이지 추가 (기능/DB 변경 없음, 라우팅 최소)

---

## 1️⃣ 생성된 파일

### 1.1 새 폴더 및 파일

- **`ui_pages/input/__init__.py`**: 입력 모듈 초기화 파일
- **`ui_pages/input/input_hub.py`**: 입력 허브 페이지 메인 파일
  - 함수: `render_input_hub()`

### 1.2 수정된 파일

- **`app.py`**: 
  - 사이드바 메뉴에 "입력 허브" 추가 (라인 1517)
  - 라우팅 추가 (라인 1735-1737)

---

## 2️⃣ 입력 허브 UI 구성

### 2.1 페이지 구조

```
✍ 입력 허브
├── 안내 문구
│   "💡 입력은 기준(원본)을 만드는 곳입니다. 업그레이드/변형은 🧠 설계에서 합니다."
│
├── 📅 매일 입력
│   ├── 📝 오늘 입력(통합) → "일일 입력(통합)"
│   └── 📋 점장 마감 → "점장 마감"
│
├── 📆 월 1회 입력
│   ├── 📅 월간 정산(실제 입력) → "실제정산"
│   ├── 🎯 목표 매출 구조(기준 입력) → "목표 매출구조"
│   └── 🧾 목표 비용 구조(기준 입력) → "목표 비용구조"
│
└── 🔧 보정/과거 입력 (필요할 때만)
    ├── 🧮 매출 등록(보정) → "매출 등록"
    └── 📦 판매량 등록(보정) → "판매량 등록"
```

### 2.2 버튼 네비게이션

모든 버튼은 `st.session_state["current_page"]`를 설정하고 `st.rerun()`을 호출하여 페이지 이동을 구현했습니다.

**매일 입력**:
- `"일일 입력(통합)"` → `ui_pages/daily_input_hub.py`
- `"점장 마감"` → `ui_pages/manager_close.py`

**월 1회 입력**:
- `"실제정산"` → `ui_pages/settlement_actual.py` (기존 키 유지)
- `"목표 매출구조"` → `ui_pages/target_sales_structure.py`
- `"목표 비용구조"` → `ui_pages/target_cost_structure.py`

**보정/과거 입력**:
- `"매출 등록"` → `ui_pages/sales_entry.py`
- `"판매량 등록"` → `ui_pages/sales_volume_entry.py`

---

## 3️⃣ app.py 변경 사항

### 3.1 사이드바 메뉴 추가

**위치**: `app.py` 라인 1516-1523

**변경 전**:
```python
"✍ 입력": [
    ("일일 입력(통합)", "일일 입력(통합)"),
    ...
],
```

**변경 후**:
```python
"✍ 입력": [
    ("입력 허브", "입력 허브"),  # 최상단 추가
    ("일일 입력(통합)", "일일 입력(통합)"),
    ...
],
```

### 3.2 라우팅 추가

**위치**: `app.py` 라인 1735-1737

**추가된 코드**:
```python
# 입력 허브 페이지
if page == "입력 허브":
    from ui_pages.input.input_hub import render_input_hub
    render_input_hub()
```

**주의**: `if` 문을 사용하여 다른 페이지 라우팅과 독립적으로 동작하도록 구현했습니다.

---

## 4️⃣ 기능 영향 없음 체크리스트

### ✅ 기존 페이지 파일/함수 변경 없음
- [x] 모든 기존 페이지 파일 경로 유지
- [x] 모든 기존 함수명 변경 없음
- [x] 모든 기존 로직 변경 없음

### ✅ 기존 page key 유지
- [x] "일일 입력(통합)" 키 유지
- [x] "점장 마감" 키 유지
- [x] "실제정산" 키 유지 (월간 성적표)
- [x] "목표 매출구조" 키 유지
- [x] "목표 비용구조" 키 유지
- [x] "매출 등록" 키 유지
- [x] "판매량 등록" 키 유지

### ✅ DB/저장 로직 변경 없음
- [x] 데이터 저장 로직 변경 없음
- [x] DB 쿼리 변경 없음
- [x] 테이블 구조 변경 없음

### ✅ 내부 이동 패턴 유지
- [x] `st.session_state["current_page"]` 방식 사용 (기존 네비 패턴 재사용)
- [x] `st.rerun()` 호출로 페이지 이동 (기존 패턴 유지)

---

## 5️⃣ 검증 체크리스트

### 사이드바 메뉴
- [ ] 사이드바 ✍ 입력 그룹에서 "입력 허브"가 최상단에 표시됨
- [ ] "입력 허브" 클릭 시 입력 허브 페이지로 이동

### 입력 허브 페이지
- [ ] 안내 문구가 정상 표시됨
- [ ] 3개 섹션이 정상 표시됨 (매일 입력, 월 1회 입력, 보정/과거 입력)

### 버튼 네비게이션
- [ ] "📝 오늘 입력(통합)" 버튼 클릭 시 일일 입력 페이지로 이동
- [ ] "📋 점장 마감" 버튼 클릭 시 점장 마감 페이지로 이동
- [ ] "📅 월간 정산(실제 입력)" 버튼 클릭 시 월간 성적표 페이지로 이동
- [ ] "🎯 목표 매출 구조(기준 입력)" 버튼 클릭 시 목표 매출 구조 페이지로 이동
- [ ] "🧾 목표 비용 구조(기준 입력)" 버튼 클릭 시 목표 비용 구조 페이지로 이동
- [ ] "🧮 매출 등록(보정)" 버튼 클릭 시 매출 등록 페이지로 이동
- [ ] "📦 판매량 등록(보정)" 버튼 클릭 시 판매량 등록 페이지로 이동

### 다른 페이지 동작
- [ ] 기존 모든 페이지가 정상 작동함
- [ ] 사이드바에서 다른 메뉴 클릭 시 정상 이동함
- [ ] 내부 이동 버튼들이 정상 작동함

---

## 6️⃣ 구현 세부 사항

### 6.1 입력 허브 페이지 구조

**파일**: `ui_pages/input/input_hub.py`

**주요 구성**:
1. **헤더**: `render_page_header("✍ 입력 허브", "✍")`
2. **안내 문구**: `st.info()` 사용
3. **3개 섹션**: 각 섹션별로 버튼 배치
   - 매일 입력: 2개 버튼 (2열)
   - 월 1회 입력: 3개 버튼 (3열)
   - 보정/과거 입력: 2개 버튼 (2열)

### 6.2 버튼 스타일

- **매일 입력**: `type="primary"` (주요 입력)
- **월 1회 입력**: `type="secondary"` (월 1회)
- **보정/과거 입력**: `type="secondary"` (필요할 때만)

### 6.3 네비게이션 구현

모든 버튼은 동일한 패턴을 사용:
```python
if st.button("...", key="..."):
    st.session_state["current_page"] = "페이지 키"
    st.rerun()
```

---

## 7️⃣ 추가 고려 사항

### 7.1 주간 리포트 위치

**현재**: 입력 그룹에 포함되어 있지만 입력 허브에는 버튼이 없음

**이유**: 주간 리포트는 입력보다는 분석/리포트 성격이 강함

**권장**: 향후 분석 그룹으로 이동 고려 또는 입력 허브에 추가 고려

### 7.2 입력 허브 접근성

**현재**: 사이드바에서만 접근 가능

**향후 개선**: 
- 홈 페이지에서 입력 허브로 바로가기 버튼 추가 고려
- 일일 입력 페이지에서 입력 허브로 돌아가기 버튼 추가 고려

---

**작성일**: 2026-01-24  
**담당**: 입력 허브 추가 작업
