# 입력센터 하위 페이지 상세 정리

## 📋 목차
1. [개요](#개요)
2. [페이지별 상세 내용](#페이지별-상세-내용)
   - [1. 마감입력](#1-마감입력)
   - [2. QSC입력](#2-qsc입력)
   - [3. 월간정산입력](#3-월간정산입력)
   - [4. 매출목표입력](#4-매출목표입력)
   - [5. 비용목표입력](#5-비용목표입력)
   - [6. 메뉴입력](#6-메뉴입력)
   - [7. 재료입력](#7-재료입력)
   - [8. 레시피입력](#8-레시피입력)
   - [9. 재고입력](#9-재고입력)
   - [10. 매출방문자입력](#10-매출방문자입력)
   - [11. 판매량입력](#11-판매량입력)

---

## 개요

**입력센터**는 매장 운영 데이터를 입력하는 통합 센터입니다. 일일 마감부터 월간 정산, 목표 설정, 메뉴/재료/레시피/재고 관리까지 모든 데이터 입력 기능을 제공합니다.

### 전체 구조
```
✍ 입력
└─ 데이터 입력센터 (입력 허브)
   ├─ 마감입력 → "일일 입력(통합)"
   ├─ QSC입력 → "건강검진 실시"
   ├─ 월간정산입력 → "실제정산"
   ├─ 매출목표입력 → "목표 매출구조"
   ├─ 비용목표입력 → "목표 비용구조"
   ├─ 메뉴입력 → "메뉴 입력"
   ├─ 재료입력 → "재료 입력"
   ├─ 레시피입력 → "레시피 등록"
   ├─ 재고입력 → "재고 입력"
   ├─ 매출방문자입력 → "매출 등록"
   └─ 판매량입력 → "판매량 등록"
```

---

## 페이지별 상세 내용

### 1. 마감입력
**페이지 키**: `"일일 입력(통합)"`  
**파일**: `ui_pages/daily_input_hub.py`  
**함수**: `render_daily_input_hub()`

#### 역할
- **일일 마감 통합 입력 페이지**
- 매출, 네이버 방문자, 판매량, 메모를 한 화면에서 입력
- 임시 저장 및 마감 저장 기능 제공

#### 주요 기능

**A. 날짜 & 상태 대시보드**
- 날짜 선택 (기본값: 오늘)
- 진행률 표시 (매출/방문자/판매량/메모 완료 여부)
- 상태 표시:
  - ✅ 마감 완료
  - ⚠️ 임시 기록
  - 📝 미입력
- 각 항목별 완료 여부 및 값 표시

**B. 탭 기반 단계별 입력**
- **탭 1: 💰 매출**
  - 카드 매출 입력
  - 현금 매출 입력
  - 총 매출 자동 계산
  - 임시 저장 버튼

- **탭 2: 👥 네이버 방문자**
  - 네이버 스마트플레이스 방문자 수 입력
  - 임시 저장 버튼

- **탭 3: 📦 판매량**
  - 메뉴별 판매 수량 입력 (3열 그리드)
  - 전체 메뉴 일괄 입력
  - 기존 판매량 자동 로드
  - 임시 저장 버튼

- **탭 4: 📝 메모**
  - 운영 메모 입력 (선택사항)
  - 특이사항 기록

**C. 저장 옵션**
- **💾 임시 저장**: 입력한 내용을 임시로 저장 (마감 전 수정 가능)
- **📋 마감하기**: 최종 마감 저장 (이후 보정만 가능)

#### 데이터 저장
- `save_sales_entry()`: 매출/방문자 저장
- `save_daily_sales_item()`: 판매량 저장
- `save_daily_close()`: 마감 저장 (매출/방문자/판매량/메모/이슈 통합)

#### 특징
- 매출이 없어도 네이버 방문자/판매량/메모만 입력해도 저장 가능
- 매출이 있어야 분석이 시작됨 (안내 메시지 표시)
- 기존 데이터 자동 프리필 (날짜 선택 시)
- 진행률 대시보드로 입력 상태 한눈에 확인

---

### 2. QSC입력
**페이지 키**: `"건강검진 실시"`  
**파일**: `ui_pages/health_check/health_check_page.py`  
**함수**: `render_health_check_page()`

#### 역할
- **매장 체크리스트 입력**
- QSCPPPMHF 9개 영역 매장 체크
- 월 2-3회 정기 체크
- 체크 결과 요약 및 히스토리 확인

#### 주요 기능

**A. 체크 시작 화면**
- 새 체크 시작 버튼
- 진행 중인 체크 이어서 진행
- 예상 소요 시간: 7-10분

**B. 탭 구조**
- **📝 체크 입력**
- **📊 결과 리포트**
- **📋 체크 이력**

**C. 체크 입력 폼**

**진행 상황 대시보드:**
- 전체 문항: 90개
- 완료 문항 수
- 미완료 문항 수
- 완료율 (%)
- 진행률 바
- 영역별 진행률 (9개 영역)

**영역 필터 & 검색:**
- 영역 필터 (전체 또는 특정 영역)
- 질문 검색 (질문 코드 또는 텍스트)

**빠른 입력 테이블:**
- 9개 영역별 질문 표시
  - Q (Quality): 품질
  - S (Service): 서비스
  - C (Cleanliness): 청결
  - P1 (Price): 가격
  - P2 (Product): 제품
  - P3 (Promotion): 프로모션
  - M (Management): 관리
  - H (Hygiene): 위생
  - F (Facility): 시설
- 각 영역당 10문항씩 총 90문항
- 질문별 버튼 그리드 (예/애매함/아니다)
- 자동 저장 (버튼 클릭 시 즉시 저장)

**저장 & 완료:**
- 저장 상태 표시
- 수동 저장 버튼
- 초기화 버튼
- 체크 완료 버튼 (최소 60개 문항 답변 필요)

**D. 결과 리포트**
- 전체 점수
- 등급 (A/B/C/D/E)
- 주요 병목 영역
- 영역별 결과 테이블
  - 영역명
  - 점수
  - 리스크 레벨 (green/yellow/red)
- 병목 TOP 2 요약
- 다음에 할 것 안내

**E. 체크 이력**
- 최근 10개 체크 목록
- 날짜, 점수, 등급, 주요 병목 표시
- 보기 버튼 (결과 리포트로 이동)

#### 데이터 저장
- `create_health_session()`: 체크 세션 생성
- `upsert_health_answers_batch()`: 답변 일괄 저장
- `finalize_health_session()`: 체크 완료 처리
- `get_health_session()`: 세션 정보 로드
- `get_health_answers()`: 답변 로드
- `get_health_results()`: 결과 로드
- `list_health_sessions()`: 세션 목록 로드

#### 특징
- 9개 영역 × 10문항 = 90문항
- 버튼 그리드 방식으로 빠른 입력
- 자동 저장 (버튼 클릭 시 즉시 저장)
- 진행 상황 대시보드로 완료율 확인
- 최소 60개 문항 답변 시 완료 가능
- 결과 리포트로 영역별 점수 및 병목 확인
- 체크 이력으로 과거 결과 확인

---

### 3. 월간정산입력
**페이지 키**: `"실제정산"`  
**파일**: `ui_pages/settlement_actual.py`  
**함수**: `render_settlement_actual()`

#### 역할
- **월간 정산 입력 및 성적표 확인**
- 월별 비용 구조 입력
- 목표 대비 실제 성적표 확인
- PDF 성적표 다운로드

#### 주요 기능

**A. 헤더 섹션**
- 연도/월 선택
- 총매출 입력 (sales에서 자동 계산 또는 수동 입력)
- 매출 불러오기 버튼
- 템플릿 리셋 버튼
- PDF 성적표 다운로드 버튼

**B. 구조 리포트 섹션**
- 목표 대비 실제 구조 비교
- 비용 구조 시각화

**C. 비용 입력 영역**
- **템플릿 관리**
  - 템플릿 저장
  - 템플릿 불러오기
  - 템플릿 삭제

- **비용 카테고리별 입력**
  - **고정비**
    - 임차료
    - 인건비
    - 공과금
  - **변동비**
    - 재료비 (매출 대비 비율)
    - 부가세&카드수수료 (매출 대비 비율)

- **비용 항목 관리**
  - 항목 추가
  - 항목 수정
  - 항목 삭제
  - 금액/비율 입력

**D. 성적표 섹션 (Expander)**
- 목표 대비 실제 성적표
- 카테고리별 비교
- 등급 평가
- 개선 제안

**E. 히스토리 섹션**
- 최근 6개월 또는 24개월 히스토리
- 월별 성적표 요약
- 월별 상세 보기 버튼
- 목표 없는 달 안내

#### 데이터 저장
- `upsert_actual_settlement_item()`: 비용 항목 저장
- `save_cost_item_template()`: 템플릿 저장
- `load_actual_settlement_items()`: 비용 항목 로드
- `load_expense_structure()`: 비용 구조 로드
- `get_month_settlement_status()`: 월별 정산 상태 확인
- `set_month_settlement_status()`: 월별 정산 상태 저장

#### 특징
- 템플릿 저장/불러오기로 반복 입력 최소화
- 목표 대비 실제 성적표 자동 계산
- PDF 성적표 다운로드 기능
- readonly 모드 지원 (최종 확정 후)
- 월별 히스토리 관리

---

### 4. 매출목표입력
**페이지 키**: `"목표 매출구조"`  
**파일**: `ui_pages/target_sales_structure.py`  
**함수**: `render_target_sales_structure()`

#### 역할
- **목표 매출 및 매출 구조 입력**
- 월별 목표 매출 설정
- 메뉴 카테고리별 목표 매출 비율 설정
- 시간대별 목표 매출 비율 설정

#### 주요 기능

**A. 기간 선택**
- 연도 선택
- 월 선택
- 비용구조 페이지와 연/월 공유 (session_state)

**B. 목표 매출 입력**
- 목표 월매출 입력 (원 단위)
- 목표 저장 버튼

**C. 목표 매출 구조 입력**

**메뉴 카테고리별 목표 매출 비율:**
- 메인 메뉴 (%)
- 사이드 메뉴 (%)
- 음료 (%)
- 기타 (%)
- 합계 검증 (100%가 되어야 함)

**시간대별 목표 매출 비율:**
- 점심 (%)
- 저녁 (%)
- 기타 (%)
- 합계 검증 (100%가 되어야 함)

**D. 입력 현황 요약**
- 목표 매출 표시
- 비용 구조 입력 완료 여부
- 매출 구조 입력 완료 여부

#### 데이터 저장
- `save_targets()`: 목표 매출 저장
- `load_csv('targets.csv')`: 목표 데이터 로드

#### 특징
- 비용구조 페이지와 연/월 공유
- 메뉴 카테고리별/시간대별 비율 합계 검증
- 매출 구조 저장 기능은 향후 구현 예정 (현재는 UI만)

---

### 5. 비용목표입력
**페이지 키**: `"목표 비용구조"`  
**파일**: `ui_pages/target_cost_structure.py`  
**함수**: `render_target_cost_structure()`

#### 역할
- **목표 비용 구조 입력**
- 월별 목표 비용 설정
- 고정비/변동비 구조 설계

#### 주요 기능

**A. 기간 선택**
- 연도 선택
- 월 선택
- 전월 데이터 복사 버튼

**B. 비용 구조 입력**

**고정비 카테고리:**
- **임차료**
  - 항목 추가/수정/삭제
  - 금액 입력 (원 단위)

- **인건비**
  - 항목 추가/수정/삭제
  - 금액 입력 (원 단위)

- **공과금**
  - 항목 추가/수정/삭제
  - 금액 입력 (원 단위)

**변동비 카테고리:**
- **재료비**
  - 항목 추가/수정/삭제
  - 매출 대비 비율 입력 (%)
  - 변동비율 합계 검증 (100% 초과 불가)

- **부가세&카드수수료**
  - 항목 추가/수정/삭제
  - 매출 대비 비율 입력 (%)
  - 변동비율 합계 검증 (100% 초과 불가)

**C. 분석 및 요약**
- 고정비 총액
- 변동비율 합계
- 손익분기점 매출 계산
- 목표 매출 대비 분석

#### 데이터 저장
- `save_expense_item()`: 비용 항목 저장
- `update_expense_item()`: 비용 항목 수정
- `delete_expense_item()`: 비용 항목 삭제
- `copy_expense_structure_from_previous_month()`: 전월 데이터 복사
- `load_expense_structure()`: 비용 구조 로드
- `get_fixed_costs()`: 고정비 총액 계산
- `get_variable_cost_ratio()`: 변동비율 계산
- `calculate_break_even_sales()`: 손익분기점 매출 계산

#### 특징
- 고정비는 금액, 변동비는 비율로 입력
- 변동비율 합계 검증 (100% 초과 불가)
- 전월 데이터 복사 기능
- 손익분기점 매출 자동 계산

---

### 6. 메뉴입력
**페이지 키**: `"메뉴 입력"`  
**파일**: `ui_pages/input/menu_input.py`  
**함수**: `render_menu_input_page()`

#### 역할
- **판매 메뉴 마스터 등록 및 관리**
- 메뉴명, 판매가 입력
- 메뉴분류 및 해시태그 분류 관리
- 레시피 완성도 확인

#### 주요 기능

**A. ZONE A: 대시보드 & 현황 요약**
- 전체 메뉴 수
- 판매중 메뉴 수
- 레시피 완성도 (레시피가 있는 메뉴 수)
- 진행률 바 (레시피 완성도, 메뉴분류 지정률, 해시태그 분류 지정률)
- 스마트 알림 (레시피 없는 메뉴, 분류 미지정 메뉴)

**B. ZONE B: 메뉴 입력 (단일/일괄)**
- **단일 입력**
  - 메뉴명 입력
  - 판매가 입력
  - 메뉴분류 선택 (대표메뉴, 주력메뉴, 유인메뉴, 보조메뉴, 기타메뉴)
  - 상태 선택 (판매중, 판매중지)
  - 해시태그 분류 선택 (미끼, 볼륨, 마진)
  - 메모 입력

- **일괄 입력**
  - 등록할 메뉴 개수 선택 (최대 20개)
  - 일괄 메뉴분류/상태/해시태그 설정
  - 각 메뉴별 상세 입력 (Expander)

**C. ZONE C: 필터 & 검색**
- 메뉴분류 필터 (다중 선택)
- 해시태그 분류 필터 (다중 선택)
- 상태 필터
- 레시피 상태 필터 (레시피 있음/없음)
- 메뉴명 검색

**D. ZONE D: 메뉴 목록 & 관리**
- 메뉴 카드 형태 표시
  - 메뉴명, 판매가
  - 메뉴분류 뱃지 (색상 구분)
  - 해시태그 분류 뱃지 (색상 구분)
  - 원가, 원가율 (레시피 있는 경우)
  - 액션 버튼 (수정, 삭제, 레시피 입력)
- 수정 모달 (Expander)
- 삭제 확인

**E. ZONE E: 메뉴분류 & 해시태그 관리**
- 메뉴분류 현황 (카테고리별 개수)
- 해시태그 분류 현황 (역할별 개수)
- 메뉴 포트폴리오 설계실로 이동 버튼

#### 데이터 저장
- `save_menu()`: 메뉴 저장
- `update_menu()`: 메뉴 수정
- `delete_menu()`: 메뉴 삭제
- `update_menu_category()`: 메뉴분류 업데이트
- `set_menu_portfolio_category()`: 메뉴분류 저장 (DB)
- `set_menu_portfolio_tag()`: 해시태그 분류 저장 (DB)

#### 특징
- 5-Zone 구조로 체계적인 관리
- 단일/일괄 입력 모드 지원
- 메뉴분류 및 해시태그 분류로 포트폴리오 관리
- 레시피 완성도 추적
- 원가 정보 연동 (레시피 있는 경우)

---

### 7. 재료입력
**페이지 키**: `"재료 입력"`  
**파일**: `ui_pages/input/ingredient_input.py`  
**함수**: `render_ingredient_input_page()`

#### 역할
- **사용 재료 마스터 등록 및 관리**
- 재료명, 단위, 단가 입력
- 발주 단위 및 변환 비율 설정
- 재료 분류 관리

#### 주요 기능

**A. ZONE A: 대시보드 & 현황 요약**
- 전체 재료 수
- 사용중 재료 수
- 레시피 사용률 (레시피에서 사용하는 재료 수)
- 발주 필요 재료 수
- 진행률 바 (레시피 사용률, 재료 분류 지정률)
- 스마트 알림 (레시피 미사용 재료, 분류 미지정 재료, 발주 필요 재료)

**B. ZONE B: 재료 입력 (단일/일괄)**
- **단일 입력**
  - 재료명 입력
  - 기본 단위 선택 (g, ml, ea, 개, kg, L, 박스, 봉지)
  - 단가 입력 (원/기본단위)
  - 발주 단위 설정 (선택사항)
  - 변환 비율 입력 (1 발주단위 = ? 기본단위)
  - 재료 분류 선택 (채소, 육류, 해산물, 조미료, 기타)
  - 상태 선택 (사용중, 사용중지)
  - 메모 입력

- **일괄 입력**
  - 등록할 재료 개수 선택 (최대 20개)
  - 일괄 재료 분류/상태 설정
  - 각 재료별 상세 입력 (Expander)

**C. ZONE C: 필터 & 검색**
- 재료 분류 필터 (다중 선택)
- 상태 필터
- 레시피 사용 상태 필터 (레시피에서 사용/미사용)
- 발주 상태 필터 (발주 필요/불필요)
- 재료명 검색

**D. ZONE D: 재료 목록 & 관리**
- 재료 카드 형태 표시
  - 재료명, 단위, 단가
  - 재료 분류 뱃지 (색상 구분)
  - 발주단위/변환비율 정보
  - 레시피 사용 여부
  - 최근 사용량/발주 필요 여부
  - 액션 버튼 (수정, 삭제, 레시피 보기, 발주 관리)
- 수정 모달 (Expander)
- 삭제 확인
- 레시피 보기 (Expander)

**E. ZONE E: 재료 분류 & 통계 관리**
- 재료 분류 현황 (카테고리별 개수)
- 재료 사용 통계 (레시피 사용률, 최근 사용량 TOP 5)
- 재료 구조 설계실로 이동 버튼
- 발주 관리로 이동 버튼

#### 데이터 저장
- `save_ingredient()`: 재료 저장
- `update_ingredient()`: 재료 수정
- `delete_ingredient()`: 재료 삭제
- `_set_ingredient_category()`: 재료 분류 저장 (DB)
- `_set_ingredient_status_and_notes()`: 재료 상태/메모 저장 (DB)

#### 특징
- 5-Zone 구조로 체계적인 관리
- 단일/일괄 입력 모드 지원
- 발주 단위 및 변환 비율 지원 (kg→g, L→ml 자동 변환)
- 재료 분류로 카테고리 관리
- 레시피 사용 여부 추적
- 발주 필요 여부 자동 계산

---

### 8. 레시피입력
**페이지 키**: `"레시피 등록"`  
**파일**: `ui_pages/recipe_management.py`  
**함수**: `render_recipe_management()`

#### 역할
- **레시피 등록 및 관리**
- 메뉴-재료 매핑 입력
- 조리방법 입력
- 원가 계산 및 확인

#### 주요 기능

**A. 레시피 일괄 등록**
- 메뉴 선택
- 등록할 재료 개수 선택 (최대 30개)
- 재료별 입력 필드 (컴팩트 스타일)
  - 재료명 검색 (자동 필터링)
  - 기준단위 자동 표시 (발주 단위 포함)
  - 사용량 입력
  - 사용단가 자동 계산 (사용량 × 1단위 단가)
- 조리방법 입력 (줄글)
- 입력 요약 표시
- 일괄 저장 버튼

**B. 레시피 검색 및 수정**
- 메뉴 필터 (레시피가 있는 메뉴만 표시)
- 요리책 스타일 카드 레이아웃
  - 메뉴명, 판매가, 원가, 원가율 표시
- 구성 재료 및 사용량 테이블
  - 재료명, 기준단위, 사용량, 1단위 단가, 재료비
- 조리방법 표시 (등록된 경우)
- 재료 사용량 수정/삭제 UI
  - 각 재료별 사용량 수정
  - 재료 삭제

**C. 레시피 현황**
- 전체 메뉴 수
- 레시피 등록 메뉴 수 (완성도 %)
- 레시피 없음 메뉴 수
- 레시피 없는 메뉴 보기 버튼

#### 데이터 저장
- `save_recipe()`: 레시피 저장 (메뉴-재료-사용량)
- `update_menu_cooking_method()`: 조리방법 저장
- `delete_recipe()`: 레시피 삭제

#### 특징
- 일괄 등록 방식으로 빠른 입력
- 재료 검색 기능으로 편리한 입력
- 사용단가 자동 계산
- 컴팩트 스타일로 많은 재료 한 화면에 표시
- 요리책 스타일 카드로 메뉴 정보 시각화
- 원가 자동 계산 및 표시
- 레시피 완성도 추적

---

### 9. 재고입력
**페이지 키**: `"재고 입력"`  
**파일**: `ui_pages/input/inventory_input.py`  
**함수**: `render_inventory_input_page()`

#### 역할
- **재고 대량 입력 및 관리**
- 현재고 및 안전재고 입력
- 발주 단위 기준 입력
- 재고 상태 자동 계산

#### 주요 기능

**A. ZONE A: 대시보드 & 빠른 액션**
- 전체 재료 수
- 재고 등록 수 (등록률 %)
- 발주 필요 재료 수
- 정상 재고 수
- 진행률 바 (재고 등록률)
- 빠른 액션 버튼
  - 기존 재고 불러오기
  - 초기화
  - 전체 저장

**B. 필터 & 검색**
- 재료 분류 필터 (다중 선택)
- 재고 등록 상태 필터 (등록됨/미등록)
- 재료명 검색

**C. ZONE B: 대량 입력 테이블**
- 페이지네이션 (한 페이지에 50개씩)
- 테이블 형태로 대량 입력
  - 재료명, 재료분류, 단위
  - 현재고 입력 (발주 단위 기준)
  - 안전재고 입력 (발주 단위 기준)
  - 상태 자동 계산 (정상/주의/부족/미등록)
  - 기존 현재고/안전재고 표시
- 실시간 상태 업데이트
- 변경 감지 및 세션 상태 저장

**D. ZONE C: 저장 & 검증**
- 변경된 항목 표시
- 변경된 항목 목록 보기 (Expander)
- 변경된 항목 저장 버튼
- 초기화 버튼

#### 데이터 저장
- `save_inventory()`: 재고 저장 (재료명, 현재고, 안전재고)
- 발주 단위 → 기본 단위 자동 변환 (변환 비율 적용)

#### 특징
- 대량 입력 중심 UI (테이블 형태)
- 페이지네이션으로 많은 재료 관리
- 발주 단위 기준 입력 (자동 변환)
- 실시간 상태 계산 (정상/주의/부족)
- 변경 감지 및 선택적 저장
- 기존 재고 불러오기 기능

---

### 10. 매출방문자입력
**페이지 키**: `"매출 등록"`  
**파일**: `ui_pages/sales_entry.py`  
**함수**: `render_sales_entry()`

#### 역할
- **과거 매출 입력 및 보정 도구**
- 일반적인 매출 입력은 "오늘 마감" 사용 권장
- 이 화면은 과거 데이터 입력 및 보정용

#### 주요 기능

**A. 보정 도구 안내**
- 일반적인 매출 입력은 점장마감 사용 안내
- 과거 매출 입력 및 보정용임을 명시

**B. 카테고리 선택**
- **💰 매출**
- **👥 네이버 스마트플레이스 방문자**

**C. 매출 입력 섹션**

**입력 모드 선택:**
- **단일 입력**
  - 날짜 선택
  - 매장명 입력
  - 카드 매출 입력
  - 현금 매출 입력
  - 총 매출 자동 계산
  - 네이버 방문자 입력 (선택사항)
  - 저장 버튼 (상태에 따라 텍스트 변경)
    - 마감 완료: "💾 매출·네이버 방문자 수정(공식 반영)"
    - 임시 기록: "💾 임시 저장"
    - 미입력: "💾 저장"

- **일괄 입력 (여러 날짜)**
  - 여러 날짜의 매출을 한 번에 입력
  - 입력 요약 표시
  - 일괄 저장 버튼
  - 충돌 감지 및 경고 표시

**D. 날짜 상태 표시**
- **마감 완료(공식)**: 이미 마감된 날짜
- **임시 기록(미마감)**: 임시 저장만 된 날짜
- **아직 기록 없음**: 새로운 입력

**E. 네이버 방문자 입력 섹션**

**입력 모드 선택:**
- **단일 입력**
  - 날짜 선택
  - 네이버 방문자 수 입력
  - 저장 버튼

- **일괄 입력 (여러 날짜)**
  - 여러 날짜의 방문자 수를 한 번에 입력
  - 입력 요약 표시
  - 일괄 저장 버튼

#### 데이터 저장
- `save_sales_entry()`: 매출/방문자 통합 저장
- `save_sales()`: 매출 단독 저장 (충돌 체크 포함)
- `save_visitor()`: 방문자 단독 저장

#### 특징
- 보정 도구 성격 (일반 입력은 "오늘 마감" 사용)
- 충돌 감지 및 경고 표시
- 저장 후 상세한 성공/경고/에러 메시지 표시
- 개발 모드에서 DB 연결 상태 확인 가능

---

### 11. 판매량입력
**페이지 키**: `"판매량 등록"`  
**파일**: `ui_pages/sales_volume_entry.py`  
**함수**: `render_sales_volume_entry()`

#### 역할
- **판매량 보정 도구**
- 점장마감 이후 판매량 수정
- 과거 데이터 입력용

#### 주요 기능

**A. 보정 도구 안내**
- 점장마감 이후 판매량 수정용
- 과거 데이터 입력용임을 명시

**B. 일일 판매 입력 (전 메뉴 일괄 입력)**
- 판매 날짜 선택
- 마감 존재 여부 확인 및 안내
  - 마감 완료: "✅ 이 날짜는 이미 마감되었습니다. 여기에 입력한 값이 최종 판매량으로 적용됩니다."
  - 미마감: "⚠️ 이 날짜는 아직 마감되지 않았습니다. 이후 점장마감을 하면 기본 판매량이 다시 생성됩니다."

**C. 메뉴별 판매 수량 입력**
- 메뉴를 3열 그리드로 표시
- 각 메뉴별 판매 수량 입력 (0은 미판매)
- 전체 메뉴 일괄 입력 가능

**D. 저장**
- **💾 판매량 보정 저장** 버튼
- 저장 후 성공 메시지 및 풍선 효과
- 개발 모드에서 override 저장 확인 메시지

#### 데이터 저장
- `save_daily_sales_item()`: 판매량 저장 (override 레이어에 저장)
- `verify_overrides_saved()`: override 저장 확인 (개발 모드)

#### 특징
- 점장마감 판매량보다 우선 적용됨 (override)
- 마감 여부에 따른 안내 메시지
- 보정 도구 성격 (일반 입력은 "오늘 마감" 사용)

---

## 입력센터 전체 흐름

### 일일 입력 흐름
1. **마감입력** → 매출/방문자/판매량/메모 입력 → 임시 저장 또는 마감 저장
2. **매출방문자입력** → 과거 매출 보정 또는 일괄 입력
3. **판매량입력** → 점장마감 이후 판매량 수정

### 월간 입력 흐름
1. **비용목표입력** → 월별 목표 비용 구조 입력
2. **매출목표입력** → 월별 목표 매출 및 매출 구조 입력
3. **월간정산입력** → 월별 실제 비용 입력 → 성적표 확인

### 정기 입력 흐름
1. **QSC입력** → 월 2-3회 정기 체크 → 결과 확인

### 마스터 데이터 입력 흐름
1. **메뉴입력** → 메뉴 마스터 등록
2. **재료입력** → 재료 마스터 등록
3. **레시피입력** → 메뉴-재료 매핑 등록
4. **재고입력** → 재고 정보 입력

---

## 데이터 저장 위치

### 일일 데이터
- `sales` 테이블: 매출 데이터
- `naver_visitors` 테이블: 네이버 방문자 데이터
- `daily_sales_items` 테이블: 일일 판매 내역
- `daily_close` 테이블: 일일 마감 데이터

### 월간 데이터
- `expense_structure` 테이블: 비용 구조
- `targets` 테이블: 목표 매출
- `actual_settlement_items` 테이블: 실제 정산 항목
- `cost_item_templates` 테이블: 비용 항목 템플릿

### 체크 데이터
- `health_sessions` 테이블: 체크 세션
- `health_answers` 테이블: 체크 답변
- `health_results` 테이블: 체크 결과

### 마스터 데이터
- `menu_master` 테이블: 메뉴 마스터
- `ingredients` 테이블: 재료 마스터
- `recipes` 테이블: 레시피 (메뉴-재료 매핑)
- `inventory` 테이블: 재고 정보

---

## 주요 특징

### 1. 보정 도구 vs 일반 입력
- **일반 입력**: "마감입력" 사용
- **보정 도구**: "매출방문자입력", "판매량입력" 사용

### 2. 데이터 우선순위
- 판매량: `sales_volume_override` > `daily_close` > `daily_sales_items`
- 매출: `daily_close` > `sales`

### 3. 자동 계산
- 총 매출 = 카드 매출 + 현금 매출
- 손익분기점 매출 = 고정비 / (1 - 변동비율)
- 체크 점수 = 영역별 점수 평균
- 원가 = 재료 사용량 × 재료 단가 합계
- 원가율 = 원가 / 판매가 × 100

### 4. 검증 기능
- 변동비율 합계 검증 (100% 초과 불가)
- 매출 구조 비율 합계 검증 (100%가 되어야 함)
- 체크 완료 최소 문항 수 검증 (60개 이상)
- 단위 자동 변환 (kg→g, L→ml)

### 5. 입력 효율성
- 일괄 입력 모드 지원 (메뉴, 재료, 레시피, 매출 등)
- 템플릿 저장/불러오기 (월간정산입력)
- 페이지네이션 (재고입력)
- 자동 프리필 (기존 데이터 로드)

---

**작성일**: 2026-01-25  
**버전**: v2.0  
**상태**: 완료 (11개 페이지 정리)
