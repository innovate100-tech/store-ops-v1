# 사용 재료 입력 페이지 재기획안

**작업 일자**: 2026-01-24  
**목적**: 사용 재료 입력 페이지를 더 효율적이고 사용자 친화적으로 업그레이드

---

## 🎯 개선 목표

1. **입력 효율성 향상**: 재료 분류 관리, 상태 관리로 재료 관리 체계화
2. **시각적 피드백 강화**: 진행률, 상태 표시, 대시보드로 한눈에 파악
3. **작업 흐름 최적화**: 빠른 액션, 일괄 작업으로 생산성 향상
4. **연계성 강화**: 레시피 입력, 발주 관리와의 연결 강화, 사용량 정보 표시

---

## 📋 현재 상태 분석

### 현재 기능
- ✅ 단일 재료 입력
- ✅ 재료 목록 표시
- ✅ 검색 기능
- ✅ 레시피 사용 여부 표시
- ✅ 통계 (전체, 레시피에서 사용)

### 개선 필요 사항
- ❌ 재료 분류 관리 없음
- ❌ 재료 상태 관리 없음 (사용중/사용중지)
- ❌ 사용량 정보 표시 없음 (최근 사용량, 발주 빈도)
- ❌ 일괄 작업 기능 없음
- ❌ 필터링 기능 제한적 (검색만 가능)
- ❌ 수정/삭제 기능 없음
- ❌ 대시보드가 단순함
- ❌ 발주 정보 연계 없음

---

## 🚀 재기획안: 5-Zone 구조

### **ZONE A: 대시보드 & 현황 요약**
**목적**: 전체 재료 현황을 한눈에 파악

#### 구성 요소
1. **핵심 지표 카드 (4열)**
   - 전체 재료 수
   - 사용중 재료 수
   - 레시피 사용률 (레시피에서 사용하는 재료 / 전체 재료)
   - 발주 필요 재료 수 (재고 부족)

2. **진행률 바**
   - 레시피 사용률: `레시피에서 사용하는 재료 / 전체 재료 × 100%`
   - 재료 분류 지정률: `재료 분류 있는 재료 / 전체 재료 × 100%`

3. **스마트 알림**
   - 레시피에서 사용하지 않는 재료가 있으면 안내 표시
   - 재료 분류 미지정 재료가 있으면 안내 표시
   - 발주 필요 재료가 있으면 경고 표시
   - 단가 변동이 큰 재료가 있으면 경고 표시

---

### **ZONE B: 재료 입력 (단일/일괄)**
**목적**: 효율적인 재료 등록

#### B-1: 단일 입력
**입력 필드**:
- 재료명 (필수)
- 단위 (필수, 예: g, ml, 개)
- 단가 (필수, 숫자, 단위당 가격)
- 발주단위 (선택, 예: kg, L, 박스)
- 변환비율 (선택, 발주단위 → 단위 변환 비율)
- 재료 분류 (선택, 드롭다운: 채소/육류/해산물/조미료/기타)
- 상태 (기본값: 사용중, 선택: 사용중/사용중지)
- 메모 (선택, 텍스트 영역)

**액션 버튼**:
- 💾 저장 (Primary)
- 🔄 초기화

#### B-2: 일괄 입력
**입력 방식**:
- 입력할 재료 개수 선택 (1-20개)
- 각 재료별 입력 필드:
  - 재료명
  - 단위
  - 단가
  - 발주단위 (선택)
  - 변환비율 (선택)
  - 재료 분류 (선택)
  - 상태 (선택, 기본값: 사용중)

**액션 버튼**:
- 💾 일괄 저장 (Primary)
- 📋 템플릿 다운로드 (CSV)
- 📤 템플릿 업로드 (CSV)

**개선점**:
- 재료 분류 일괄 선택 옵션 추가
- 상태 일괄 선택 옵션 추가

---

### **ZONE C: 필터 & 검색**
**목적**: 원하는 재료를 빠르게 찾기

#### 필터 옵션
1. **재료 분류 필터** (멀티 선택)
   - 전체
   - 채소
   - 육류
   - 해산물
   - 조미료
   - 기타
   - 미지정

2. **상태 필터** (단일 선택)
   - 전체
   - 사용중
   - 사용중지

3. **레시피 사용 상태 필터** (단일 선택)
   - 전체
   - 레시피에서 사용
   - 레시피에서 미사용

4. **발주 상태 필터** (단일 선택)
   - 전체
   - 발주 필요 (재고 부족)
   - 발주 불필요

5. **검색**
   - 재료명 검색 (기존 유지)
   - 단가 범위 검색 (최소/최대)

---

### **ZONE D: 재료 목록 & 관리**
**목적**: 등록된 재료를 관리하고 액션 수행

#### 목록 표시 형식
**테이블 컬럼**:
- 체크박스 (일괄 선택용)
- 재료명
- 재료 분류 (뱃지 형태)
- 단위
- 단가
- 발주단위/변환비율
- 상태 (뱃지: 사용중/사용중지)
- 레시피 사용 상태 (아이콘: ✅/—)
- 최근 사용량 (최근 7일 평균)
- 발주 필요 여부 (아이콘: ⚠️/✓)
- 액션 (수정/삭제/레시피 보기)

#### 정렬 옵션
- 재료명 (가나다순)
- 단가 (높은순/낮은순)
- 재료 분류
- 최근 사용량 (높은순/낮은순)
- 레시피 사용 상태

#### 빠른 액션
1. **개별 재료 액션**
   - ✏️ 수정: 인라인 편집 또는 모달
   - 🗑️ 삭제: 확인 후 삭제 (레시피 참조 확인)
   - 📋 레시피 보기: 해당 재료를 사용하는 메뉴 목록 표시
   - 🛒 발주 관리: 발주 관리 페이지로 이동 (재료명 전달)

2. **일괄 액션** (체크박스 선택 후)
   - 📝 재료 분류 일괄 변경
   - 🔄 상태 일괄 변경
   - 💰 단가 일괄 수정 (비율 또는 금액)
   - 🗑️ 일괄 삭제

---

### **ZONE E: 재료 분류 & 통계 관리**
**목적**: 재료 분류와 통계를 체계적으로 관리

#### 재료 분류 현황
- 현재 사용 중인 재료 분류별 재료 개수 표시
- 채소/육류/해산물/조미료/기타별 통계

#### 재료 사용 통계
- 레시피에서 사용하는 재료 비율
- 최근 사용량 TOP 10 재료
- 발주 빈도가 높은 재료

#### 관리 액션
- 📊 재료 분류별 통계 보기
- 📈 사용량 통계 보기
- 🛒 발주 관리로 이동
- 💡 재료 구조 설계실로 이동 (설계 페이지)

---

## 🎨 UI/UX 개선 사항

### 1. 시각적 피드백
- **상태 뱃지**: 사용중 (초록), 사용중지 (회색)
- **레시피 사용 상태**: ✅ (초록), — (회색)
- **재료 분류 뱃지**: 채소(초록), 육류(빨강), 해산물(파랑), 조미료(노랑), 기타(회색)
- **발주 필요 경고**: 발주 필요 시 ⚠️ 아이콘 표시

### 2. 진행률 표시
- 레시피 사용률 진행률 바
- 재료 분류 지정률 진행률 바
- 각 진행률 바에 퍼센트 표시

### 3. 스마트 추천
- 레시피에서 사용하지 않는 재료 안내
- 재료 분류 미지정 재료 안내
- 발주 필요 재료 경고
- 단가 변동이 큰 재료 경고

### 4. 빠른 액션
- 목록에서 바로 수정 가능 (인라인 편집 또는 모달)
- 레시피 보기 버튼으로 해당 재료를 사용하는 메뉴 확인
- 발주 관리 바로가기
- 일괄 작업은 선택된 재료 수 표시

---

## 📊 데이터 구조 확장

### 재료 마스터 테이블 확장 (필요 시)
```sql
ALTER TABLE ingredients 
ADD COLUMN IF NOT EXISTS category TEXT CHECK (category IN ('채소', '육류', '해산물', '조미료', '기타')),
ADD COLUMN IF NOT EXISTS status TEXT DEFAULT '사용중' CHECK (status IN ('사용중', '사용중지')),
ADD COLUMN IF NOT EXISTS notes TEXT;
```

### 재료 분류 관리
- 재료 분류는 재료 마스터의 `category` 필드에 저장
- 재료 분류 목록은 재료 마스터에서 동적으로 추출
- 재료 분류별 색상은 프론트엔드에서 관리

---

## 🔄 작업 흐름 개선

### 시나리오 1: 신규 재료 등록
1. ZONE B에서 재료명, 단위, 단가, 재료 분류, 상태 입력
2. 저장 후 ZONE D 목록에 자동 반영
3. 레시피 입력에서 해당 재료 사용 가능

### 시나리오 2: 재료 수정
1. ZONE D 목록에서 수정 버튼 클릭
2. 인라인 편집 또는 모달에서 수정
3. 저장 후 즉시 반영

### 시나리오 3: 일괄 작업
1. ZONE D에서 여러 재료 체크박스 선택
2. 일괄 액션 버튼 클릭 (재료 분류 변경, 상태 변경 등)
3. 일괄 적용 후 목록 자동 갱신

### 시나리오 4: 레시피에서 사용하지 않는 재료 처리
1. ZONE A 대시보드에서 레시피 사용률 확인
2. ZONE C에서 "레시피에서 미사용" 필터 선택
3. ZONE D에서 미사용 재료 확인
4. 삭제 또는 레시피에 추가

### 시나리오 5: 발주 필요 재료 확인
1. ZONE A 대시보드에서 발주 필요 재료 수 확인
2. ZONE C에서 "발주 필요" 필터 선택
3. ZONE D에서 발주 필요 재료 확인
4. 발주 관리 버튼 클릭 → 발주 관리 페이지로 이동

---

## 🎯 우선순위

### Phase 1: 핵심 기능 (필수)
1. ✅ 재료 분류 필드 추가 및 관리 (채소/육류/해산물/조미료/기타)
2. ✅ 상태 필드 추가 (사용중/사용중지)
3. ✅ 필터링 강화 (재료 분류, 상태, 레시피 사용 상태)
4. ✅ 수정/삭제 기능
5. ✅ 대시보드 개선 (진행률 바, 지표 카드)

### Phase 2: 고급 기능 (권장)
1. ✅ 사용량 정보 표시 (최근 7일 평균 사용량)
2. ✅ 발주 정보 연계 (발주 필요 여부 표시)
3. ✅ 일괄 작업 (재료 분류, 상태, 단가)
4. ✅ 재료 분류 & 통계 관리 섹션
5. ✅ CSV 템플릿 업로드/다운로드
6. ✅ 정렬 기능

### Phase 3: 추가 개선 (선택)
1. ✅ 인라인 편집
2. ✅ 단가 범위 검색
3. ✅ 메모 필드
4. ✅ 재료 분류별 색상 지정
5. ✅ 레시피 보기 기능 (해당 재료를 사용하는 메뉴 목록)

---

## 📝 구현 고려사항

### 1. 데이터 호환성
- 기존 재료는 `status`가 없으면 "사용중"으로 기본값 설정
- 기존 재료는 `category`가 없으면 "미지정"으로 표시

### 2. 성능
- 재료 목록이 많을 경우 페이지네이션 고려
- 사용량 계산은 최근 7일 데이터만 사용

### 3. 사용자 경험
- 저장 후 즉시 피드백 (성공/실패 메시지)
- 삭제 시 확인 다이얼로그 (레시피 참조 확인)
- 일괄 작업 시 진행 상황 표시

### 4. 연계성
- 레시피 입력 페이지와 연계 (재료 목록 제공)
- 발주 관리 페이지와 연계 (재고 정보, 발주 필요 여부)
- 재료 구조 설계실과 연계 (설계 페이지)

---

## 🎨 디자인 가이드

### 색상 체계
- **사용중**: `#4ade80` (초록)
- **사용중지**: `#9ca3af` (회색)
- **레시피에서 사용**: `#22c55e` (초록)
- **레시피에서 미사용**: `#9ca3af` (회색)
- **발주 필요**: `#ef4444` (빨강)
- **재료 분류**: 채소(초록), 육류(빨강), 해산물(파랑), 조미료(노랑), 기타(회색)

### 레이아웃
- ZONE A: 전체 너비, 4열 그리드
- ZONE B: 전체 너비, 탭 구조 (단일/일괄)
- ZONE C: 전체 너비, 필터 + 검색
- ZONE D: 전체 너비, 테이블 + 액션 버튼
- ZONE E: 사이드바 또는 접을 수 있는 섹션 (재료 분류 & 통계)

---

## ✅ 기대 효과

1. **입력 효율성**: 재료 분류와 상태 관리로 체계적인 재료 관리
2. **시각적 피드백**: 대시보드와 진행률로 현황 파악 용이
3. **작업 생산성**: 일괄 작업과 빠른 액션으로 시간 절약
4. **연계성**: 레시피 입력, 발주 관리와의 연결 강화로 워크플로우 개선
5. **데이터 품질**: 사용량 정보 표시로 재료 관리 의사결정 지원

---

**작성일**: 2026-01-24  
**담당**: 사용 재료 입력 페이지 재기획
