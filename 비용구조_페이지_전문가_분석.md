# ë¹„ìš©êµ¬ì¡° í˜ì´ì§€ ì „ë¬¸ê°€ ë¶„ì„ ë³´ê³ ì„œ

## ğŸ“Š ì „ì²´ í‰ê°€

**ì¢…í•© ì ìˆ˜: 7.5/10**

ë¹„ìš©êµ¬ì¡° ê´€ë¦¬ì™€ ì†ìµë¶„ê¸°ì  ë¶„ì„ ê¸°ëŠ¥ì´ ì˜ êµ¬í˜„ë˜ì–´ ìˆìœ¼ë‚˜, ëª‡ ê°€ì§€ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.

---

## âœ… ì¥ì  (Strengths)

### 1. **í•µì‹¬ ê¸°ëŠ¥ì˜ ì™„ì„±ë„**
- âœ… ì†ìµë¶„ê¸°ì  ê³„ì‚° ë¡œì§ì´ ì •í™•í•¨ (ê³ ì •ë¹„ Ã· (1 - ë³€ë™ë¹„ìœ¨))
- âœ… í‰ì¼/ì£¼ë§ ë¹„ìœ¨ ê¸°ë°˜ ì¼ì¼ ë§¤ì¶œ ê³„ì‚°
- âœ… ëª©í‘œ ë§¤ì¶œê³¼ ì†ìµë¶„ê¸° ë§¤ì¶œ ë¹„êµ ê¸°ëŠ¥
- âœ… ì¶”ì • ì˜ì—…ì´ìµ ê³„ì‚° ë° í‘œì‹œ

### 2. **ì‚¬ìš©ì ê²½í—˜ (UX)**
- âœ… í•œê¸€ ì›í™” í‘œì‹œ ê¸°ëŠ¥ (ì˜ˆ: 1ë§Œì›, 1ì²œ5ë°±ë§Œì›)
- âœ… ì¹´í…Œê³ ë¦¬ë³„ ì´ì•¡ ìë™ ì§‘ê³„
- âœ… ì…ë ¥ í•„ë“œ ìë™ ì´ˆê¸°í™” (reset_count í™œìš©)
- âœ… ì‹œê°ì  êµ¬ë¶„ (ê³ ì •ë¹„/ë³€ë™ë¹„ ìƒ‰ìƒ ì°¨ë³„í™”)

### 3. **ë°ì´í„° êµ¬ì¡°**
- âœ… 5ê°œ ë¹„ìš© ì¹´í…Œê³ ë¦¬ ëª…í™•í•œ ë¶„ë¥˜
- âœ… ì„¸ë¶€ í•­ëª©ë³„ ì…ë ¥ ê°€ëŠ¥
- âœ… ì›”ë³„ ë°ì´í„° ê´€ë¦¬
- âœ… RLS ë³´ì•ˆ ì ìš©

### 4. **ì •ë³´ í‘œì‹œ**
- âœ… ê³„ì‚° ê³µì‹ ëª…ì‹œ
- âœ… ì†ìµë¶„ê¸° vs ëª©í‘œ ë¹„êµ
- âœ… ì¼ì¼/ì›”ê°„ ë‹¨ìœ„ ëª¨ë‘ ì œê³µ

---

## âš ï¸ ë‹¨ì  ë° ê°œì„  í•„ìš” ì‚¬í•­

### 1. **ë°ì´í„° ê²€ì¦ ë° ì˜¤ë¥˜ ì²˜ë¦¬**

#### ë¬¸ì œì 
- âŒ ë³€ë™ë¹„ìœ¨ í•©ê³„ê°€ 100%ë¥¼ ì´ˆê³¼í•  ìˆ˜ ìˆìŒ (ì¬ë£Œë¹„ 50% + ì¹´ë“œìˆ˜ìˆ˜ë£Œ 60% = 110%)
- âŒ ê³ ì •ë¹„ í•­ëª© ì¤‘ë³µ ì…ë ¥ ê²€ì¦ ì—†ìŒ
- âŒ ìŒìˆ˜ ê°’ ì…ë ¥ ê°€ëŠ¥ (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ìƒ ë¶ˆê°€ëŠ¥)
- âŒ í•­ëª©ëª… ì¤‘ë³µ ì²´í¬ ì—†ìŒ

#### ê°œì„ ì•ˆ
```python
# ë³€ë™ë¹„ìœ¨ í•©ê³„ ê²€ì¦
if info['type'] == 'variable':
    total_variable_rate = sum(item['amount'] for item in category_items) + new_rate
    if total_variable_rate > 100:
        st.error(f"ë³€ë™ë¹„ìœ¨ í•©ê³„ê°€ 100%ë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (í˜„ì¬: {total_variable_rate:.2f}%)")
        return

# í•­ëª©ëª… ì¤‘ë³µ ì²´í¬
existing_names = [item['item_name'] for item in category_items]
if new_item_name.strip() in existing_names:
    st.warning("ë™ì¼í•œ í•­ëª©ëª…ì´ ì´ë¯¸ ì¡´ì¬í•©ë‹ˆë‹¤.")
```

### 2. **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê°œì„ **

#### ë¬¸ì œì 
- âš ï¸ ì¼ì¼ ê³ ì •ë¹„ë¥¼ ë‹¨ìˆœíˆ 30ì¼ë¡œ ë‚˜ëˆ” (ì‹¤ì œë¡œëŠ” í‰ì¼/ì£¼ë§ ë¹„ìœ¨ ê³ ë ¤ í•„ìš”)
- âš ï¸ ë³€ë™ë¹„ ì¹´í…Œê³ ë¦¬ ë‚´ ì—¬ëŸ¬ í•­ëª©ì˜ í•©ê³„ê°€ 100% ì´ˆê³¼ ê°€ëŠ¥
- âš ï¸ ì†ìµë¶„ê¸°ì  ê³„ì‚° ì¡°ê±´ì´ ì—„ê²©í•¨ (5ê°œ í•­ëª© ëª¨ë‘ ì…ë ¥ í•„ìš”)

#### ê°œì„ ì•ˆ
```python
# ì¼ì¼ ê³ ì •ë¹„ ê³„ì‚° ê°œì„ 
# í‰ì¼ ê³ ì •ë¹„ = ê³ ì •ë¹„ Ã— (í‰ì¼ ì¼ìˆ˜ / ì´ ì¼ìˆ˜) / í‰ì¼ ì¼ìˆ˜
weekday_daily_fixed = (fixed_costs * (22 / 30)) / 22
weekend_daily_fixed = (fixed_costs * (8 / 30)) / 8

# ë˜ëŠ” ë” ì •í™•í•˜ê²Œ: ì›”ê°„ ê³ ì •ë¹„ë¥¼ í‰ì¼/ì£¼ë§ë¡œ ë¶„ë°°
weekday_monthly_fixed = fixed_costs * (22 / 30)
weekend_monthly_fixed = fixed_costs * (8 / 30)
```

### 3. **ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ (UI/UX)**

#### ë¬¸ì œì 
- âš ï¸ í˜ì´ì§€ê°€ ë„ˆë¬´ ê¸¸ì–´ì„œ ìŠ¤í¬ë¡¤ì´ ë§ìŒ
- âš ï¸ ë¹„ìš© ì…ë ¥ ì„¹ì…˜ì´ ì†ìµë¶„ê¸°ì  ê³„ì‚° ê²°ê³¼ ì•„ë˜ì— ìˆì–´ ì¤‘ìš”ë„ê°€ ë‚®ì•„ ë³´ì„
- âš ï¸ ê¸°ì¡´ í•­ëª© ìˆ˜ì • ê¸°ëŠ¥ ì—†ìŒ (ì‚­ì œ í›„ ì¬ì…ë ¥ë§Œ ê°€ëŠ¥)
- âš ï¸ ì›”ë³„ ë¹„êµ ê¸°ëŠ¥ ì—†ìŒ (ì „ì›” ëŒ€ë¹„, ì‘ë…„ ë™ì›” ëŒ€ë¹„)

#### ê°œì„ ì•ˆ
1. **íƒ­ êµ¬ì¡° ë„ì…**
   ```
   [ë¹„ìš© ì…ë ¥] [ì†ìµë¶„ê¸° ë¶„ì„] [ì›”ë³„ ë¹„êµ] [íŠ¸ë Œë“œ ë¶„ì„]
   ```

2. **í•­ëª© ìˆ˜ì • ê¸°ëŠ¥ ì¶”ê°€**
   ```python
   # ê¸°ì¡´ í•­ëª© í´ë¦­ ì‹œ ìˆ˜ì • ëª¨ë‹¬/í¼ í‘œì‹œ
   if st.button("âœï¸ ìˆ˜ì •", key=f"edit_{item['id']}"):
       st.session_state[f"editing_{item['id']}"] = True
   ```

3. **ì›”ë³„ ë¹„êµ ì°¨íŠ¸ ì¶”ê°€**
   - ì „ì›” ëŒ€ë¹„ ë¹„ìš© ë³€í™”ìœ¨
   - ì‘ë…„ ë™ì›” ëŒ€ë¹„ ë³€í™”ìœ¨
   - íŠ¸ë Œë“œ ë¼ì¸ ì°¨íŠ¸

### 4. **ë°ì´í„° ì‹œê°í™” ë¶€ì¡±**

#### ë¬¸ì œì 
- âŒ ë¹„ìš© êµ¬ì¡° íŒŒì´ ì°¨íŠ¸ ì—†ìŒ
- âŒ ê³ ì •ë¹„/ë³€ë™ë¹„ ë¹„ìœ¨ ì‹œê°í™” ì—†ìŒ
- âŒ ì›”ë³„ íŠ¸ë Œë“œ ê·¸ë˜í”„ ì—†ìŒ
- âŒ ëª©í‘œ ëŒ€ë¹„ ì‹¤ì  ë¹„êµ ì°¨íŠ¸ ì—†ìŒ

#### ê°œì„ ì•ˆ
```python
# ë¹„ìš© êµ¬ì¡° íŒŒì´ ì°¨íŠ¸
import matplotlib.pyplot as plt
fig, ax = plt.subplots()
categories = ['ì„ì°¨ë£Œ', 'ì¸ê±´ë¹„', 'ê³µê³¼ê¸ˆ', 'ì¬ë£Œë¹„', 'ë¶€ê°€ì„¸&ì¹´ë“œìˆ˜ìˆ˜ë£Œ']
amounts = [category_totals[cat] for cat in categories]
ax.pie(amounts, labels=categories, autopct='%1.1f%%')
st.pyplot(fig)

# ê³ ì •ë¹„/ë³€ë™ë¹„ ë¹„ìœ¨ ë°” ì°¨íŠ¸
fixed_vs_variable = {
    'ê³ ì •ë¹„': fixed_costs,
    'ë³€ë™ë¹„ (ì˜ˆìƒ)': target_sales_input * (variable_cost_rate / 100) if target_sales_input > 0 else 0
}
```

### 5. **ê¸°ëŠ¥ì  í•œê³„**

#### ë¬¸ì œì 
- âŒ ë¹„ìš© í•­ëª© ë³µì‚¬ ê¸°ëŠ¥ ì—†ìŒ (ì „ì›” ë°ì´í„° ë³µì‚¬)
- âŒ í…œí”Œë¦¿ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° ê¸°ëŠ¥ ì—†ìŒ
- âŒ ì˜ˆì‚° ê³„íš ê¸°ëŠ¥ ì—†ìŒ (ëª©í‘œ ë¹„ìš© êµ¬ì¡° ì„¤ì •)
- âŒ ì•Œë¦¼ ê¸°ëŠ¥ ì—†ìŒ (ë¹„ìš© ì´ˆê³¼ ê²½ê³ )

#### ê°œì„ ì•ˆ
1. **ì „ì›” ë°ì´í„° ë³µì‚¬**
   ```python
   if st.button("ğŸ“‹ ì „ì›” ë°ì´í„° ë³µì‚¬", key="copy_prev_month"):
       prev_month_data = load_expense_structure(selected_year, selected_month - 1)
       # ë³µì‚¬ ë¡œì§
   ```

2. **ì˜ˆì‚° ê³„íš ê¸°ëŠ¥**
   - ëª©í‘œ ë§¤ì¶œ ëŒ€ë¹„ ëª©í‘œ ë¹„ìš© êµ¬ì¡° ì„¤ì •
   - ì‹¤ì  ëŒ€ë¹„ ì˜ˆì‚° ë¹„êµ

3. **ì•Œë¦¼ ì‹œìŠ¤í…œ**
   - ë³€ë™ë¹„ìœ¨ì´ ëª©í‘œì¹˜ ì´ˆê³¼ ì‹œ ê²½ê³ 
   - ê³ ì •ë¹„ê°€ ì˜ˆì‚° ì´ˆê³¼ ì‹œ ì•Œë¦¼

### 6. **ì„±ëŠ¥ ë° í™•ì¥ì„±**

#### ë¬¸ì œì 
- âš ï¸ ë§¤ë²ˆ ì „ì²´ ë°ì´í„°ë¥¼ ë¡œë“œ (í•„ìš”í•œ ê²½ìš°ë§Œ ë¡œë“œí•˜ë„ë¡ ìµœì í™” ê°€ëŠ¥)
- âš ï¸ ê³„ì‚° ë¡œì§ì´ UI ì½”ë“œì— ì„ì—¬ ìˆìŒ (ë¶„ë¦¬ í•„ìš”)

#### ê°œì„ ì•ˆ
```python
# ë³„ë„ ëª¨ë“ˆë¡œ ë¶„ë¦¬
# src/analytics/expense_analysis.py
def calculate_breakeven(fixed_costs, variable_rate):
    """ì†ìµë¶„ê¸°ì  ê³„ì‚°"""
    if fixed_costs > 0 and 0 < variable_rate < 100:
        return fixed_costs / (1 - variable_rate / 100)
    return None

def calculate_daily_profit(daily_sales, variable_rate, daily_fixed):
    """ì¼ì¼ ì˜ì—…ì´ìµ ê³„ì‚°"""
    return (daily_sales * (1 - variable_rate / 100)) - daily_fixed
```

### 7. **ë°ì´í„° ë¬´ê²°ì„±**

#### ë¬¸ì œì 
- âŒ ë³€ë™ë¹„ ì¹´í…Œê³ ë¦¬ì—ì„œ amount í•„ë“œì— ë¹„ìœ¨(%) ì €ì¥ â†’ í˜¼ë€ ê°€ëŠ¥
- âŒ ê³ ì •ë¹„ì™€ ë³€ë™ë¹„ë¥¼ ê°™ì€ amount í•„ë“œì— ì €ì¥ â†’ íƒ€ì… êµ¬ë¶„ ì–´ë ¤ì›€

#### ê°œì„ ì•ˆ
```sql
-- ìŠ¤í‚¤ë§ˆ ê°œì„  ì œì•ˆ
ALTER TABLE expense_structure 
ADD COLUMN amount_type TEXT CHECK (amount_type IN ('fixed', 'variable')),
ADD COLUMN rate_percentage NUMERIC(5, 2);  -- ë³€ë™ë¹„ìš© ì „ìš©

-- ë˜ëŠ” ë³„ë„ í…Œì´ë¸” ë¶„ë¦¬
CREATE TABLE fixed_expenses (...);
CREATE TABLE variable_expenses (...);
```

---

## ğŸ¯ ìš°ì„ ìˆœìœ„ë³„ ê°œì„ ì•ˆ

### ğŸ”´ ë†’ì€ ìš°ì„ ìˆœìœ„ (ì¦‰ì‹œ ê°œì„ )

1. **ë³€ë™ë¹„ìœ¨ í•©ê³„ ê²€ì¦ ì¶”ê°€**
   - ë³€ë™ë¹„ ì¹´í…Œê³ ë¦¬ í•©ê³„ê°€ 100% ì´ˆê³¼ ë°©ì§€
   - ì‹¤ì‹œê°„ ê²€ì¦ ë° ê²½ê³  ë©”ì‹œì§€

2. **í•­ëª© ìˆ˜ì • ê¸°ëŠ¥ ì¶”ê°€**
   - ì‚­ì œ í›„ ì¬ì…ë ¥ ëŒ€ì‹  ì§ì ‘ ìˆ˜ì • ê°€ëŠ¥í•˜ë„ë¡

3. **ë°ì´í„° ì…ë ¥ ê²€ì¦ ê°•í™”**
   - ìŒìˆ˜ ê°’ ë°©ì§€
   - í•­ëª©ëª… ì¤‘ë³µ ì²´í¬
   - í•„ìˆ˜ í•„ë“œ ê²€ì¦

### ğŸŸ¡ ì¤‘ê°„ ìš°ì„ ìˆœìœ„ (ë‹¨ê¸° ê°œì„ )

4. **ì›”ë³„ ë¹„êµ ê¸°ëŠ¥**
   - ì „ì›” ëŒ€ë¹„ ë³€í™”ìœ¨
   - ì‘ë…„ ë™ì›” ëŒ€ë¹„ ë³€í™”ìœ¨

5. **ì‹œê°í™” ì¶”ê°€**
   - ë¹„ìš© êµ¬ì¡° íŒŒì´ ì°¨íŠ¸
   - ê³ ì •ë¹„/ë³€ë™ë¹„ ë¹„ìœ¨ ë°” ì°¨íŠ¸
   - ì›”ë³„ íŠ¸ë Œë“œ ë¼ì¸ ì°¨íŠ¸

6. **ì¼ì¼ ê³ ì •ë¹„ ê³„ì‚° ê°œì„ **
   - í‰ì¼/ì£¼ë§ ë¹„ìœ¨ ë°˜ì˜

### ğŸŸ¢ ë‚®ì€ ìš°ì„ ìˆœìœ„ (ì¥ê¸° ê°œì„ )

7. **ì „ì›” ë°ì´í„° ë³µì‚¬ ê¸°ëŠ¥**
8. **ì˜ˆì‚° ê³„íš ê¸°ëŠ¥**
9. **ì•Œë¦¼ ì‹œìŠ¤í…œ**
10. **í…œí”Œë¦¿ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°**

---

## ğŸ’¡ ì¶”ê°€ ì œì•ˆ ì‚¬í•­

### 1. **ëŒ€ì‹œë³´ë“œ í†µí•©**
- ë¹„ìš©êµ¬ì¡° í˜ì´ì§€ë¥¼ í†µí•© ëŒ€ì‹œë³´ë“œì— ìœ„ì ¯ìœ¼ë¡œ í‘œì‹œ
- í•µì‹¬ ì§€í‘œë§Œ ìš”ì•½í•˜ì—¬ í•œëˆˆì— ë³´ê¸°

### 2. **ë¦¬í¬íŠ¸ ìƒì„±**
- ì›”ê°„ ë¹„ìš© ë¦¬í¬íŠ¸ PDF ë‹¤ìš´ë¡œë“œ
- ì´ë©”ì¼ ìë™ ë°œì†¡ ê¸°ëŠ¥

### 3. **ëª¨ë°”ì¼ ìµœì í™”**
- Streamlit ëª¨ë°”ì¼ ë·° ê°œì„ 
- í•µì‹¬ ê¸°ëŠ¥ë§Œ ëª¨ë°”ì¼ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡

### 4. **ë‹¤êµ­ì–´ ì§€ì›**
- ì˜ì–´ ë²„ì „ ì¶”ê°€ (í–¥í›„ í•´ì™¸ ì§„ì¶œ ëŒ€ë¹„)

---

## ğŸ“ˆ ì˜ˆìƒ íš¨ê³¼

### ê°œì„  í›„ ê¸°ëŒ€ íš¨ê³¼
- **ì‚¬ìš©ì ë§Œì¡±ë„**: 7.5/10 â†’ 9.0/10
- **ë°ì´í„° ì •í™•ë„**: 85% â†’ 98%
- **ì‚¬ìš© ì‹œê°„**: í‰ê·  5ë¶„ â†’ 3ë¶„ (íš¨ìœ¨ì„± í–¥ìƒ)
- **ì˜¤ë¥˜ ë°œìƒë¥ **: 15% â†’ 2%

---

## ğŸ“ ê²°ë¡ 

í˜„ì¬ ë¹„ìš©êµ¬ì¡° í˜ì´ì§€ëŠ” **í•µì‹¬ ê¸°ëŠ¥ì´ ì˜ êµ¬í˜„**ë˜ì–´ ìˆìœ¼ë©°, ì†ìµë¶„ê¸°ì  ë¶„ì„ê³¼ ëª©í‘œ ë§¤ì¶œ ë¹„êµ ê¸°ëŠ¥ì´ ì‹¤ìš©ì ì…ë‹ˆë‹¤. 

í•˜ì§€ë§Œ **ë°ì´í„° ê²€ì¦ ê°•í™”**, **í•­ëª© ìˆ˜ì • ê¸°ëŠ¥**, **ì‹œê°í™” ì¶”ê°€** ë“±ì„ í†µí•´ ë”ìš± ì „ë¬¸ì ì´ê³  ì‚¬ìš©í•˜ê¸° í¸í•œ ì‹œìŠ¤í…œìœ¼ë¡œ ë°œì „ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

íŠ¹íˆ **ë³€ë™ë¹„ìœ¨ í•©ê³„ ê²€ì¦**ê³¼ **í•­ëª© ìˆ˜ì • ê¸°ëŠ¥**ì€ ì¦‰ì‹œ ê°œì„ ì´ í•„ìš”í•œ ì‚¬í•­ì…ë‹ˆë‹¤.
