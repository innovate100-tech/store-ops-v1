# 판매 메뉴 입력 페이지 재기획안

**작업 일자**: 2026-01-24  
**목적**: 판매 메뉴 입력 페이지를 더 효율적이고 사용자 친화적으로 업그레이드

---

## 🎯 개선 목표

1. **입력 효율성 향상**: 카테고리 관리, 상태 관리로 메뉴 관리 체계화
2. **시각적 피드백 강화**: 진행률, 상태 표시, 대시보드로 한눈에 파악
3. **작업 흐름 최적화**: 빠른 액션, 일괄 작업으로 생산성 향상
4. **연계성 강화**: 레시피 입력과의 연결 강화, 원가 정보 표시

---

## 📋 현재 상태 분석

### 현재 기능
- ✅ 단일 메뉴 입력
- ✅ 일괄 메뉴 입력
- ✅ 메뉴 목록 표시
- ✅ 검색 기능
- ✅ 레시피 상태 표시 (있음/없음)
- ✅ 통계 (전체, 레시피 있음/없음)

### 개선 필요 사항
- ❌ 카테고리 관리 없음
- ❌ 메뉴 상태 관리 없음 (판매중/판매중지)
- ❌ 원가/원가율 정보 표시 없음
- ❌ 일괄 작업 기능 없음
- ❌ 필터링 기능 제한적 (검색만 가능)
- ❌ 수정/삭제 기능 없음
- ❌ 대시보드가 단순함

---

## 🚀 재기획안: 5-Zone 구조

### **ZONE A: 대시보드 & 현황 요약**
**목적**: 전체 메뉴 현황을 한눈에 파악

#### 구성 요소
1. **핵심 지표 카드 (3열)**
   - 전체 메뉴 수
   - 판매중 메뉴 수
   - 레시피 완성도 (레시피 있는 메뉴 / 전체 메뉴)

2. **진행률 바**
   - 레시피 완성도: `레시피 있는 메뉴 / 전체 메뉴 × 100%`
   - 메뉴분류 지정률: `메뉴분류 있는 메뉴 / 전체 메뉴 × 100%`
   - 해시태그 분류 지정률: `해시태그 분류 있는 메뉴 / 전체 메뉴 × 100%`

3. **스마트 알림**
   - 레시피 없는 메뉴가 있으면 경고 표시
   - 메뉴분류 미지정 메뉴가 있으면 안내 표시
   - 해시태그 분류 미지정 메뉴가 있으면 안내 표시
   - 판매중지 메뉴가 있으면 정보 표시

---

### **ZONE B: 메뉴 입력 (단일/일괄)**
**목적**: 효율적인 메뉴 등록

#### B-1: 단일 입력
**입력 필드**:
- 메뉴명 (필수)
- 판매가 (필수, 숫자)
- 메뉴분류 (선택, 드롭다운: 대표메뉴/주력메뉴/유인메뉴/보조메뉴/기타메뉴)
- 해시태그 분류 (선택, 멀티 선택: 미끼/볼륨/마진)
- 상태 (기본값: 판매중, 선택: 판매중/판매중지)
- 메모 (선택, 텍스트 영역)

**액션 버튼**:
- 💾 저장 (Primary)
- 🔄 초기화

#### B-2: 일괄 입력
**입력 방식**:
- 입력할 메뉴 개수 선택 (1-20개)
- 각 메뉴별 입력 필드:
  - 메뉴명
  - 판매가
  - 메뉴분류 (선택: 대표메뉴/주력메뉴/유인메뉴/보조메뉴/기타메뉴)
  - 해시태그 분류 (선택, 멀티: 미끼/볼륨/마진)
  - 상태 (선택, 기본값: 판매중)

**액션 버튼**:
- 💾 일괄 저장 (Primary)
- 📋 템플릿 다운로드 (CSV)
- 📤 템플릿 업로드 (CSV)

**개선점**:
- 메뉴분류 일괄 선택 옵션 추가
- 해시태그 분류 일괄 선택 옵션 추가
- 상태 일괄 선택 옵션 추가

---

### **ZONE C: 필터 & 검색**
**목적**: 원하는 메뉴를 빠르게 찾기

#### 필터 옵션
1. **메뉴분류 필터** (멀티 선택)
   - 전체
   - 대표메뉴
   - 주력메뉴
   - 유인메뉴
   - 보조메뉴
   - 기타메뉴
   - 미지정

2. **해시태그 분류 필터** (멀티 선택)
   - 전체
   - 미끼
   - 볼륨
   - 마진
   - 미분류

3. **상태 필터** (단일 선택)
   - 전체
   - 판매중
   - 판매중지

4. **레시피 상태 필터** (단일 선택)
   - 전체
   - 레시피 있음
   - 레시피 없음

5. **검색**
   - 메뉴명 검색 (기존 유지)
   - 가격 범위 검색 (최소/최대)

---

### **ZONE D: 메뉴 목록 & 관리**
**목적**: 등록된 메뉴를 관리하고 액션 수행

#### 목록 표시 형식
**테이블 컬럼**:
- 체크박스 (일괄 선택용)
- 메뉴명
- 메뉴분류 (뱃지 형태: 대표/주력/유인/보조/기타)
- 해시태그 분류 (뱃지 형태: 미끼/볼륨/마진, 멀티 표시 가능)
- 판매가
- 상태 (뱃지: 판매중/판매중지)
- 원가 (레시피 있으면 표시, 없으면 "-")
- 원가율 (레시피 있으면 표시, 없으면 "-")
- 레시피 상태 (아이콘: ✅/⚠️)
- 액션 (수정/삭제/레시피 입력)

#### 정렬 옵션
- 메뉴명 (가나다순)
- 판매가 (높은순/낮은순)
- 메뉴분류
- 해시태그 분류
- 원가율 (높은순/낮은순)
- 레시피 상태

#### 빠른 액션
1. **개별 메뉴 액션**
   - ✏️ 수정: 인라인 편집 또는 모달
   - 🗑️ 삭제: 확인 후 삭제
   - 🧑‍🍳 레시피 입력: 레시피 입력 페이지로 이동 (메뉴명 전달)

2. **일괄 액션** (체크박스 선택 후)
   - 📝 메뉴분류 일괄 변경
   - 🏷️ 해시태그 분류 일괄 변경
   - 🔄 상태 일괄 변경
   - 💰 가격 일괄 수정 (비율 또는 금액)
   - 🗑️ 일괄 삭제

---

### **ZONE E: 메뉴분류 & 해시태그 관리**
**목적**: 메뉴분류와 해시태그 분류를 체계적으로 관리

#### 메뉴분류 현황
- 현재 사용 중인 메뉴분류별 메뉴 개수 표시
- 대표메뉴/주력메뉴/유인메뉴/보조메뉴/기타메뉴별 통계

#### 해시태그 분류 현황
- 미끼/볼륨/마진별 메뉴 개수 표시
- 해시태그 분류별 통계

#### 관리 액션
- 📊 메뉴분류별 통계 보기
- 🏷️ 해시태그 분류별 통계 보기
- 💡 포트폴리오 균형 가이드 (메뉴 포트폴리오 설계실로 이동)

---

## 🎨 UI/UX 개선 사항

### 1. 시각적 피드백
- **상태 뱃지**: 판매중 (초록), 판매중지 (회색)
- **레시피 상태**: ✅ (초록), ⚠️ (노랑)
- **메뉴분류 뱃지**: 대표(금), 주력(파랑), 유인(노랑), 보조(회색), 기타(연두)
- **해시태그 분류 뱃지**: 미끼(주황), 볼륨(초록), 마진(보라)
- **원가율 경고**: 원가율이 높으면 빨간색 강조

### 2. 진행률 표시
- 레시피 완성도 진행률 바
- 메뉴분류 지정률 진행률 바
- 해시태그 분류 지정률 진행률 바
- 각 진행률 바에 퍼센트 표시

### 3. 스마트 추천
- 레시피 없는 메뉴 강조 표시
- 메뉴분류 미지정 메뉴 안내
- 해시태그 분류 미지정 메뉴 안내
- 원가율이 40% 이상인 메뉴 경고
- 포트폴리오 균형 가이드 링크 (메뉴 포트폴리오 설계실)

### 4. 빠른 액션
- 목록에서 바로 수정 가능 (인라인 편집 또는 모달)
- 레시피 입력 버튼이 레시피 없는 메뉴에만 강조 표시
- 일괄 작업은 선택된 메뉴 수 표시

---

## 📊 데이터 구조 확장

### 메뉴 마스터 테이블 확장 (필요 시)
```sql
ALTER TABLE menu_master 
ADD COLUMN IF NOT EXISTS category TEXT CHECK (category IN ('대표메뉴', '주력메뉴', '유인메뉴', '보조메뉴', '기타메뉴')),
ADD COLUMN IF NOT EXISTS status TEXT DEFAULT '판매중' CHECK (status IN ('판매중', '판매중지')),
ADD COLUMN IF NOT EXISTS notes TEXT;
```

### 메뉴분류 & 해시태그 분류 관리
- **메뉴분류**: 메뉴 마스터의 `category` 필드에 저장 (대표메뉴/주력메뉴/유인메뉴/보조메뉴/기타메뉴)
- **해시태그 분류**: session_state에 저장 (`menu_portfolio_tags::{store_id}`) - 향후 DB 저장 예정
- 메뉴분류는 DB와 동기화 (기존 `update_menu_category` 함수 사용)
- 해시태그 분류는 session_state 기반 (메뉴 포트폴리오 설계실과 동일한 방식)

---

## 🔄 작업 흐름 개선

### 시나리오 1: 신규 메뉴 등록
1. ZONE B에서 메뉴명, 판매가, 메뉴분류, 해시태그 분류, 상태 입력
2. 저장 후 ZONE D 목록에 자동 반영
3. 레시피 입력 버튼 클릭 → 레시피 입력 페이지로 이동

### 시나리오 2: 메뉴 수정
1. ZONE D 목록에서 수정 버튼 클릭
2. 인라인 편집 또는 모달에서 수정
3. 저장 후 즉시 반영

### 시나리오 3: 일괄 작업
1. ZONE D에서 여러 메뉴 체크박스 선택
2. 일괄 액션 버튼 클릭 (메뉴분류 변경, 해시태그 분류 변경, 상태 변경 등)
3. 일괄 적용 후 목록 자동 갱신

### 시나리오 4: 레시피 없는 메뉴 처리
1. ZONE A 대시보드에서 레시피 완성도 확인
2. ZONE C에서 "레시피 없음" 필터 선택
3. ZONE D에서 레시피 없는 메뉴 확인
4. 레시피 입력 버튼 클릭 → 레시피 입력 페이지로 이동

---

## 🎯 우선순위

### Phase 1: 핵심 기능 (필수)
1. ✅ 메뉴분류 필드 추가 및 관리 (대표/주력/유인/보조/기타)
2. ✅ 해시태그 분류 필드 추가 및 관리 (미끼/볼륨/마진)
3. ✅ 상태 필드 추가 (판매중/판매중지)
4. ✅ 필터링 강화 (메뉴분류, 해시태그 분류, 상태, 레시피 상태)
5. ✅ 수정/삭제 기능
6. ✅ 대시보드 개선 (진행률 바, 지표 카드)

### Phase 2: 고급 기능 (권장)
1. ✅ 원가/원가율 표시 (레시피 있는 메뉴)
2. ✅ 일괄 작업 (메뉴분류, 해시태그 분류, 상태, 가격)
3. ✅ 메뉴분류 & 해시태그 분류 현황 섹션
4. ✅ CSV 템플릿 업로드/다운로드
5. ✅ 정렬 기능
6. ✅ 메뉴 포트폴리오 설계실 연계

### Phase 3: 추가 개선 (선택)
1. ✅ 인라인 편집
2. ✅ 가격 범위 검색
3. ✅ 메모 필드
4. ✅ 메뉴분류별 색상 지정
5. ✅ 해시태그 분류별 색상 지정

---

## 📝 구현 고려사항

### 1. 데이터 호환성
- 기존 메뉴는 `status`가 없으면 "판매중"으로 기본값 설정
- 기존 메뉴는 `category`가 없으면 "미지정"으로 표시
- 해시태그 분류는 session_state 기반이므로 기존 메뉴는 "미분류"로 표시
- 메뉴 포트폴리오 설계실과 동일한 session_state 키 사용 (`menu_portfolio_tags::{store_id}`)

### 2. 성능
- 메뉴 목록이 많을 경우 페이지네이션 고려
- 원가 계산은 레시피 있는 메뉴만 수행

### 3. 사용자 경험
- 저장 후 즉시 피드백 (성공/실패 메시지)
- 삭제 시 확인 다이얼로그
- 일괄 작업 시 진행 상황 표시

### 4. 연계성
- 레시피 입력 페이지로 이동 시 메뉴명 전달
- 레시피 입력 완료 후 메뉴 입력 페이지로 돌아올 수 있도록
- 메뉴 포트폴리오 설계실과 데이터 동기화 (메뉴분류는 DB, 해시태그 분류는 session_state)
- 메뉴 포트폴리오 설계실로 이동 링크 제공

---

## 🎨 디자인 가이드

### 색상 체계
- **판매중**: `#4ade80` (초록)
- **판매중지**: `#9ca3af` (회색)
- **레시피 있음**: `#22c55e` (초록)
- **레시피 없음**: `#eab308` (노랑)
- **원가율 경고**: `#ef4444` (빨강, 40% 이상)
- **메뉴분류**: 대표메뉴(금색), 주력메뉴(파랑), 유인메뉴(노랑), 보조메뉴(회색), 기타메뉴(연두)
- **해시태그 분류**: 미끼(주황), 볼륨(초록), 마진(보라)

### 레이아웃
- ZONE A: 전체 너비, 3열 그리드
- ZONE B: 전체 너비, 탭 구조 (단일/일괄)
- ZONE C: 전체 너비, 필터 + 검색
- ZONE D: 전체 너비, 테이블 + 액션 버튼
- ZONE E: 사이드바 또는 접을 수 있는 섹션 (메뉴분류 & 해시태그 분류 현황)

---

## ✅ 기대 효과

1. **입력 효율성**: 메뉴분류와 해시태그 분류, 상태 관리로 체계적인 메뉴 관리
2. **시각적 피드백**: 대시보드와 진행률로 현황 파악 용이
3. **작업 생산성**: 일괄 작업과 빠른 액션으로 시간 절약
4. **연계성**: 레시피 입력과의 연결 강화로 워크플로우 개선
5. **데이터 품질**: 원가 정보 표시로 메뉴 관리 의사결정 지원

---

**작성일**: 2026-01-24  
**담당**: 판매 메뉴 입력 페이지 재기획
