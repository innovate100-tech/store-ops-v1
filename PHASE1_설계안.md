# Phase 1 "사장 MVP 완성" 설계안
## 신규 사장 5분 안에 첫 입력→첫 코칭까지 도달

**작업 일자**: 2026-01-24  
**목표**: 신규 가입 후 5분 내에 매장 생성/선택 → (오늘/어제) 통합 입력 1회 저장 → 홈에서 "오늘의 지시 TOP3" 확인

---

## A) 현재 UX 흐름 맵핑 (실제 사용자 관점)

### 1. 가입/로그인 후 흐름

```
[로그인 화면]
  ↓ (로그인 성공)
[온보딩 체크]
  ↓ (onboarding_mode가 NULL이면)
[온보딩 화면] (onboarding_mode_select.py)
  - 환영 메시지
  - "시작하기" 버튼 클릭
  - 자동으로 onboarding_mode='coach' 저장
  ↓
[매장 체크]
  ↓ (store_id가 없으면)
[매장 생성 화면] (store_setup.py)
  - 매장명 입력
  - "매장 생성" 버튼 클릭
  - store_id 생성 및 세션에 저장
  ↓
[홈 화면] (home_page.py)
  - ZONE 0: 오늘의 운영 지시
  - ZONE 1: 이번 달 가게 전략 요약
  - ZONE 2: 문제 인식 & 빠른 진입
  - ZONE 3: 오늘 상태판
  - ZONE 4: 이번 주 우선순위 TOP3 (lazy)
  - ZONE 5: 가게 구조 스냅샷 (lazy)
```

### 2. 첫 설정이 무엇인지

**현재 첫 설정**:
1. 온보딩 모드 선택 (자동 완료, 실제로는 사용 안 함)
2. 매장명 입력 (필수)

**문제점**:
- 온보딩 화면이 불필요한 단계 (자동 완료인데 화면을 보여줌)
- 매장 생성 후 바로 홈으로 가는데, 홈에서 무엇을 해야 할지 명확하지 않음

### 3. 입력은 어디서 하는지

**현재 입력 경로**:
1. **일일 입력(통합)** (`daily_input_hub.py`) - 이미 존재!
   - 매출 (카드/현금)
   - 네이버 방문자
   - 판매량 (메뉴별)
   - 메모
   - 저장/마감 버튼

2. **점장 마감** (`manager_close.py`)
   - 공식 마감 입력
   - 더 상세한 입력 (issues, 메모 등)

3. **매출 등록** (`sales_entry.py`)
   - 매출 보정/과거 입력용

**문제점**:
- 일일 입력(통합) 페이지가 사이드바에 있지만, 신규 사용자가 찾기 어려울 수 있음
- 홈에서 일일 입력으로 가는 명확한 경로가 부족

### 4. 홈에서 무엇을 얻는지

**현재 홈 화면**:
- ZONE 0: "오늘은 'XXX'부터 하세요" (1개 행동)
- ZONE 1: 이번 달 가게 전략 요약 (전략 카드 TOP3)
- ZONE 2: 문제 인식 & 빠른 진입
- ZONE 3: 오늘 상태판 (KPI)
- ZONE 4: 이번 주 우선순위 TOP3 (lazy)
- ZONE 5: 가게 구조 스냅샷 (lazy)

**문제점**:
- 신규 사용자(데이터 0개)일 때 ZONE 0이 의미 있는 지시를 주지 못할 수 있음
- "오늘의 지시 TOP3"가 명확하게 표시되지 않음 (ZONE 0은 1개만 표시)

---

## B) "5분 시나리오"를 막는 지점 Top 10

### 1. 🔴 CRITICAL: 온보딩 화면이 불필요한 단계

**막히는 이유**:
- 자동 완료인데 화면을 보여줘서 시간 낭비
- "시작하기" 버튼 클릭 후 rerun 발생

**해결안**:
- 온보딩 화면을 완전히 제거하고, 매장 생성 화면에서 자동 처리
- 또는 온보딩 화면을 최소화 (1줄 메시지 + 바로 매장 생성으로 이동)

### 2. 🔴 CRITICAL: 매장 생성 후 홈으로 가는데, 홈에서 무엇을 해야 할지 모름

**막히는 이유**:
- 신규 사용자는 데이터가 없어서 홈의 지시가 의미 없음
- "오늘의 지시"가 "가게 설계 센터부터 시작" 같은 추상적인 메시지

**해결안**:
- 매장 생성 후 바로 "일일 입력" 화면으로 이동
- 또는 홈에서 신규 사용자일 때 "오늘 매출 입력하기"를 최우선 지시로 표시

### 3. 🔴 CRITICAL: 일일 입력 화면을 찾기 어려움

**막히는 이유**:
- 사이드바에 "일일 입력(통합)"이 있지만, 신규 사용자가 찾기 어려움
- 홈에서 일일 입력으로 가는 명확한 버튼이 없음

**해결안**:
- 홈 ZONE 0에서 신규 사용자일 때 "오늘 매출 입력하기" 버튼을 최우선으로 표시
- 매장 생성 후 바로 일일 입력 화면으로 이동

### 4. 🟡 HIGH: 일일 입력 화면이 복잡함

**막히는 이유**:
- 매출, 방문자, 판매량(메뉴별), 메모 등 여러 입력이 한 화면에 있음
- 신규 사용자는 메뉴가 없어서 판매량 입력이 불가능

**해결안**:
- 신규 사용자용 "간단 입력 모드": 매출 + 방문자만 입력
- 메뉴가 없으면 판매량 섹션을 숨기거나 "나중에" 제공

### 5. 🟡 HIGH: 저장 후 홈으로 돌아가도 의미 있는 코칭이 없음

**막히는 이유**:
- 데이터가 1개뿐이면 홈의 지시가 의미 없음
- "오늘의 지시 TOP3"가 표시되지 않음 (ZONE 0은 1개만)

**해결안**:
- 첫 입력 후 홈에서 "첫 입력 완료! 내일도 입력하면 패턴이 보이기 시작합니다" 같은 피드백
- "오늘의 지시 TOP3"를 명확하게 표시 (ZONE 0 아래에 TOP3 리스트)

### 6. 🟡 HIGH: 온보딩 화면에서 rerun 발생

**막히는 이유**:
- "시작하기" 버튼 클릭 후 rerun으로 인한 지연

**해결안**:
- Phase 0 STEP 5 패턴 적용: rerun 제거, 바로 다음 화면으로 이동

### 7. 🟡 MEDIUM: 매장 생성 화면이 너무 단순함

**막히는 이유**:
- 매장명만 입력하는데, 이후에 무엇을 해야 할지 안내가 없음

**해결안**:
- 매장 생성 후 "다음 단계" 안내 표시
- "지금 오늘 매출을 입력하시겠어요?" 같은 CTA 제공

### 8. 🟡 MEDIUM: 홈 ZONE 0이 데이터 부족 시 의미 없는 메시지

**막히는 이유**:
- 신규 사용자는 데이터가 없어서 "가게 설계 센터부터 시작" 같은 추상적인 메시지

**해결안**:
- 신규 사용자일 때 ZONE 0을 "오늘 매출 입력하기"로 고정
- 데이터 레벨에 따라 지시 내용 변경

### 9. 🟢 LOW: 일일 입력 화면에서 메뉴가 없으면 판매량 입력 불가

**막히는 이유**:
- 메뉴가 없으면 판매량 섹션이 비활성화되거나 경고만 표시

**해결안**:
- 메뉴가 없으면 판매량 섹션을 숨기고 "나중에 메뉴 등록 후 입력 가능" 안내
- 또는 "메뉴 등록하기" 버튼 제공

### 10. 🟢 LOW: 홈에서 "오늘의 지시 TOP3"가 명확하지 않음

**막히는 이유**:
- ZONE 0은 1개만 표시하고, TOP3는 ZONE 1에 있음

**해결안**:
- ZONE 0 아래에 "오늘의 지시 TOP3" 섹션 추가
- 또는 ZONE 0을 확장하여 TOP3 표시

---

## C) 설계안

### 설계 원칙

1. **최소 단계**: 온보딩 최소화, 불필요한 화면 제거
2. **명확한 다음 행동**: 각 단계에서 다음에 무엇을 해야 할지 명확히 제시
3. **신규 사용자 우선**: 데이터가 없을 때도 의미 있는 경험 제공
4. **점진적 복잡도**: 처음은 간단하게, 필요할 때만 복잡한 기능 노출

### 설계안 1: 온보딩 최소화

**현재**: 로그인 → 온보딩 화면 (환영 메시지 + 시작하기 버튼) → 매장 생성

**변경 후**: 로그인 → 매장 생성 (온보딩은 자동 처리, 화면 제거)

**구현**:
- `onboarding_mode_select.py`를 완전히 제거하거나 최소화
- `app.py`에서 온보딩 체크 시 자동으로 `onboarding_mode='coach'` 설정 후 매장 생성으로 이동
- 매장 생성 화면에서 환영 메시지 포함

### 설계안 2: 통합 입력 화면 1스크린 완성

**현재**: `daily_input_hub.py`가 이미 존재하지만, 신규 사용자용 최적화 필요

**변경 후**: 
- 신규 사용자용 "간단 입력 모드": 매출 + 방문자만 입력 (판매량/메모는 "나중에" 제공)
- 메뉴가 없으면 판매량 섹션 숨김
- 저장 규칙: 마감 있으면 보정, 없으면 임시 저장 (현재와 동일)

**구현**:
- `daily_input_hub.py`에 데이터 레벨 체크 추가
- 신규 사용자일 때 판매량/메모 섹션 숨김 또는 접기
- 저장 후 성공 메시지에 "홈에서 오늘의 지시 확인하기" 안내

### 설계안 3: 홈 - 오늘의 지시 TOP3 고정

**현재**: ZONE 0에 1개만 표시, TOP3는 ZONE 1에 있음

**변경 후**:
- ZONE 0: "오늘은 'XXX'부터 하세요" (1개, 메인)
- ZONE 0 아래: "오늘의 지시 TOP3" (3개, 체크리스트 형태)
- 신규 사용자일 때: "오늘 매출 입력하기"를 최우선으로 표시

**구현**:
- `home_v3_zones.py`에 `_render_zone0_today_instruction_top3()` 함수 추가
- 신규 사용자일 때 ZONE 0 내용을 "오늘 매출 입력하기"로 고정
- TOP3를 체크리스트 형태로 표시 (완료/미완료 표시)

### 설계안 4: 매장 생성 후 바로 일일 입력으로 이동

**현재**: 매장 생성 후 홈으로 이동

**변경 후**: 매장 생성 후 "일일 입력" 화면으로 이동 (선택사항 제공)

**구현**:
- `store_setup.py`에서 매장 생성 성공 시 "일일 입력" 또는 "홈" 선택 제공
- 기본값은 "일일 입력"으로 설정

---

## D) 구현 계획 (최소 변경)

### 변경 1: 온보딩 최소화

**파일**: `app.py`, `ui_pages/onboarding_mode_select.py`

**변경 내용**:
- `app.py`에서 온보딩 체크 시 자동으로 `onboarding_mode='coach'` 설정 후 매장 생성으로 바로 이동
- `onboarding_mode_select.py`는 유지하되, 최소화 (또는 완전 제거)

**성공 기준**:
- 신규 가입 후 온보딩 화면 없이 바로 매장 생성 화면으로 이동
- 온보딩 모드는 자동으로 'coach'로 설정됨

### 변경 2: 매장 생성 화면 개선

**파일**: `ui_pages/store_setup.py`

**변경 내용**:
- 매장 생성 성공 시 "일일 입력" 또는 "홈" 선택 제공
- 기본값은 "일일 입력"으로 설정
- 환영 메시지 추가

**성공 기준**:
- 매장 생성 후 "일일 입력" 또는 "홈" 선택 가능
- 기본값으로 "일일 입력" 화면으로 이동

### 변경 3: 일일 입력 화면 신규 사용자 최적화

**파일**: `ui_pages/daily_input_hub.py`

**변경 내용**:
- 데이터 레벨 체크 추가 (`detect_data_level`)
- 신규 사용자일 때 판매량/메모 섹션 숨김 또는 접기
- 저장 후 성공 메시지에 "홈에서 오늘의 지시 확인하기" 안내

**성공 기준**:
- 신규 사용자가 매출 + 방문자만 입력하여 저장 가능
- 저장 후 홈으로 가는 명확한 안내 제공

### 변경 4: 홈 ZONE 0 신규 사용자 최적화

**파일**: `ui_pages/home/home_v3_zones.py`

**변경 내용**:
- 신규 사용자일 때 ZONE 0 내용을 "오늘 매출 입력하기"로 고정
- ZONE 0 아래에 "오늘의 지시 TOP3" 섹션 추가 (체크리스트 형태)

**성공 기준**:
- 신규 사용자가 홈에 들어오면 "오늘 매출 입력하기"가 최우선 지시로 표시됨
- "오늘의 지시 TOP3"가 명확하게 표시됨

---

## E) Phase 1 UX 플로우 다이어그램 (텍스트)

```
[1. 가입/로그인]
  ↓
[2. 온보딩 자동 처리] (화면 없음, 백그라운드)
  - onboarding_mode='coach' 자동 설정
  ↓
[3. 매장 생성 화면]
  - 매장명 입력
  - "매장 생성" 버튼
  ↓ (생성 성공)
[4. 다음 단계 선택]
  - "오늘 매출 입력하기" (기본값, 추천)
  - "홈으로 가기"
  ↓ (일일 입력 선택)
[5. 일일 입력 화면] (신규 사용자 모드)
  - 매출 입력 (카드/현금)
  - 네이버 방문자 입력
  - [판매량/메모는 "나중에" 제공]
  - "저장" 버튼
  ↓ (저장 성공)
[6. 성공 메시지]
  - "저장 완료! 홈에서 오늘의 지시를 확인하세요"
  - "홈으로 가기" 버튼
  ↓
[7. 홈 화면] (신규 사용자 모드)
  - ZONE 0: "오늘은 '오늘 매출 입력하기'부터 하세요" (고정)
  - 오늘의 지시 TOP3 (체크리스트)
    1. [✓] 오늘 매출 입력하기 (완료)
    2. [ ] 내일도 매출 입력하기
    3. [ ] 메뉴 3개 등록하기
  - "내일도 입력하기" 버튼
```

**예상 소요 시간**: 5분 이내
- 매장 생성: 30초
- 일일 입력: 2분
- 홈 확인: 30초
- 여유: 2분

---

## F) 변경 파일 리스트

1. **app.py**
   - 온보딩 체크 로직 수정 (자동 완료 후 매장 생성으로 이동)

2. **ui_pages/onboarding_mode_select.py**
   - 최소화 또는 제거 (선택사항)

3. **ui_pages/store_setup.py**
   - 매장 생성 성공 시 "일일 입력" 또는 "홈" 선택 제공
   - 환영 메시지 추가

4. **ui_pages/daily_input_hub.py**
   - 신규 사용자 모드 추가 (판매량/메모 섹션 숨김)
   - 저장 후 성공 메시지 개선

5. **ui_pages/home/home_v3_zones.py**
   - ZONE 0 신규 사용자 최적화 (고정 지시)
   - "오늘의 지시 TOP3" 섹션 추가

---

## G) 각 변경의 성공 기준

### 변경 1: 온보딩 최소화

- [ ] 신규 가입 후 온보딩 화면 없이 바로 매장 생성 화면으로 이동
- [ ] 온보딩 모드는 자동으로 'coach'로 설정됨
- [ ] 기존 사용자는 영향 없음

### 변경 2: 매장 생성 화면 개선

- [ ] 매장 생성 성공 시 "일일 입력" 또는 "홈" 선택 가능
- [ ] 기본값으로 "일일 입력" 화면으로 이동
- [ ] 환영 메시지가 표시됨

### 변경 3: 일일 입력 화면 신규 사용자 최적화

- [ ] 신규 사용자가 매출 + 방문자만 입력하여 저장 가능
- [ ] 판매량/메모 섹션이 숨겨지거나 "나중에" 제공됨
- [ ] 저장 후 "홈에서 오늘의 지시 확인하기" 안내 표시

### 변경 4: 홈 ZONE 0 신규 사용자 최적화

- [ ] 신규 사용자가 홈에 들어오면 "오늘 매출 입력하기"가 최우선 지시로 표시됨
- [ ] "오늘의 지시 TOP3"가 체크리스트 형태로 명확하게 표시됨
- [ ] 첫 입력 완료 후 체크리스트에 완료 표시

---

## H) 테스트 체크리스트

### 신규 계정 테스트

- [ ] **1. 가입/로그인**
  - 신규 계정 생성
  - 로그인 성공
  - ✅ 온보딩 화면 없이 바로 매장 생성 화면으로 이동

- [ ] **2. 매장 생성**
  - 매장명 입력 (예: "테스트 매장")
  - "매장 생성" 버튼 클릭
  - ✅ 매장 생성 성공
  - ✅ "일일 입력" 또는 "홈" 선택 화면 표시
  - ✅ 기본값으로 "일일 입력" 선택

- [ ] **3. 일일 입력 (신규 사용자 모드)**
  - 일일 입력 화면 진입
  - ✅ 매출 입력 섹션 표시
  - ✅ 네이버 방문자 입력 섹션 표시
  - ✅ 판매량 섹션이 숨겨지거나 "나중에" 제공됨
  - ✅ 메모 섹션이 숨겨지거나 "나중에" 제공됨
  - 매출 입력 (카드: 100,000원, 현금: 50,000원)
  - 네이버 방문자 입력 (10명)
  - "저장" 버튼 클릭
  - ✅ 저장 성공 메시지 표시
  - ✅ "홈에서 오늘의 지시 확인하기" 안내 표시

- [ ] **4. 홈 화면 (신규 사용자 모드)**
  - 홈 화면 진입
  - ✅ ZONE 0: "오늘은 '오늘 매출 입력하기'부터 하세요" 표시
  - ✅ "오늘의 지시 TOP3" 섹션 표시
  - ✅ 체크리스트에 "오늘 매출 입력하기" 완료 표시
  - ✅ "내일도 입력하기" 버튼 표시

- [ ] **5. 5분 시나리오 완료**
  - 가입부터 홈에서 지시 확인까지 5분 이내 완료
  - ✅ 모든 단계가 막힘 없이 진행됨

### 기존 계정 테스트

- [ ] **1. 기존 계정 로그인**
  - 기존 계정으로 로그인
  - ✅ 온보딩 화면 없이 바로 홈으로 이동
  - ✅ 기존 기능이 정상 작동

- [ ] **2. 일일 입력 (기존 사용자 모드)**
  - 일일 입력 화면 진입
  - ✅ 모든 섹션 (매출, 방문자, 판매량, 메모) 표시
  - ✅ 저장 기능 정상 작동

- [ ] **3. 홈 화면 (기존 사용자 모드)**
  - 홈 화면 진입
  - ✅ ZONE 0이 데이터 기반 지시를 표시
  - ✅ "오늘의 지시 TOP3" 섹션 표시

---

## I) 다음 단계

Phase 1 설계안이 완료되었습니다. 다음 단계는 실제 구현입니다.

**우선순위**:
1. 온보딩 최소화 (가장 빠른 개선)
2. 매장 생성 화면 개선 (사용자 경험 개선)
3. 일일 입력 화면 신규 사용자 최적화 (핵심 기능)
4. 홈 ZONE 0 신규 사용자 최적화 (최종 목표)

**예상 작업 시간**: 각 변경당 30분~1시간

---

**작성일**: 2026-01-24  
**담당**: Phase 1 PM+엔지니어
