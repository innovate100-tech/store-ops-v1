# 입력 허브 UX v1 완료 보고서

**작업 일자**: 2026-01-24  
**목적**: 입력 허브를 제품급으로 정리 (기능/DB 영향 0)

---

## 1️⃣ 변경 사항

### 1.1 상단 문구 교체

**변경 전**:
```
💡 입력은 기준(원본)을 만드는 곳입니다. 업그레이드/변형은 🧠 설계에서 합니다.
```

**변경 후**:
```
💡 입력은 기준(원본)을 만드는 곳입니다.
🧠 설계는 기준을 업그레이드/변형하는 곳입니다.
```

**변경 이유**: 입력과 설계의 역할을 명확히 구분하여 사용자 이해도 향상

### 1.2 섹션 4구역으로 재배치

**변경 전**: 3개 섹션
- 매일 입력
- 월 1회 입력
- 보정/과거 입력

**변경 후**: 4개 섹션
- 매일 입력: 일일 입력(통합), 점장 마감
- 월 1회 입력: 실제정산(월간 성적표), 목표 매출구조, 목표 비용구조
- 주간·불시: 주간 리포트, 건강검진 (신규 추가)
- 보정/과거 입력: 매출 등록, 판매량 등록

### 1.3 "오늘 추천" 섹션 추가 (최상단)

**구현 내용**:
- 오늘 데이터(매출/마감) 확인 함수: `_get_today_recommendation()`
- 규칙 v1:
  - 오늘 데이터가 없으면: "📝 오늘 입력을 시작하세요" → "📝 오늘 입력(통합)" 버튼
  - 오늘 데이터가 있으면: "📋 오늘 마감을 완료하세요" → "📋 점장 마감" 버튼
- 데이터 확인: `get_day_record_status()` 함수 활용

**UI 구성**:
- 그라데이션 배경 카드 (보라색)
- 추천 메시지 표시
- 추천 버튼 (primary 타입)

---

## 2️⃣ 구현 세부 사항

### 2.1 오늘 추천 로직

**함수**: `_get_today_recommendation(store_id: str) -> dict`

**로직**:
1. `store_id` 확인
2. `today_kst()`로 오늘 날짜 가져오기
3. `get_day_record_status(store_id, today)`로 오늘 데이터 상태 확인
4. `has_close` 또는 `has_sales` 확인
5. 데이터 없으면 → "오늘 입력(통합)" 추천
6. 데이터 있으면 → "점장 마감" 추천

**에러 처리**:
- `store_id` 없으면 기본값 반환
- 예외 발생 시 기본값 반환 (오늘 입력 추천)

**TODO**:
- 주간 리포트는 요일이 월요일이면 추천 (향후 구현)

### 2.2 4구역 섹션 구성

**A) 매일 입력** (2개 버튼, 2열):
- 📝 오늘 입력(통합) → "일일 입력(통합)"
- 📋 점장 마감 → "점장 마감"
- 버튼 타입: `primary`

**B) 월 1회 입력** (3개 버튼, 3열):
- 📅 월간 정산(실제 입력) → "실제정산" (캡션: "페이지 키: 실제정산 (기존 유지)")
- 🎯 목표 매출 구조(기준 입력) → "목표 매출구조"
- 🧾 목표 비용 구조(기준 입력) → "목표 비용구조"
- 버튼 타입: `secondary`

**C) 주간·불시** (2개 버튼, 2열) - 신규:
- 📈 주간 리포트 → "주간 리포트"
- 🩺 건강검진 → "건강검진 실시"
- 버튼 타입: `secondary`

**D) 보정/과거 입력** (2개 버튼, 2열):
- 🧮 매출 등록(보정) → "매출 등록"
- 📦 판매량 등록(보정) → "판매량 등록"
- 버튼 타입: `secondary`

---

## 3️⃣ 기능 영향 없음 체크리스트

### ✅ 기존 페이지 파일/함수 변경 없음
- [x] 모든 기존 페이지 파일 경로 유지
- [x] 모든 기존 함수명 변경 없음
- [x] 모든 기존 로직 변경 없음

### ✅ 기존 page key 유지
- [x] "일일 입력(통합)" 키 유지
- [x] "점장 마감" 키 유지
- [x] "실제정산" 키 유지
- [x] "목표 매출구조" 키 유지
- [x] "목표 비용구조" 키 유지
- [x] "매출 등록" 키 유지
- [x] "판매량 등록" 키 유지
- [x] "주간 리포트" 키 유지
- [x] "건강검진 실시" 키 유지

### ✅ DB/저장 로직 변경 없음
- [x] 데이터 저장 로직 변경 없음
- [x] DB 쿼리 변경 없음 (조회만 사용)
- [x] 테이블 구조 변경 없음

### ✅ 라우팅 로직 변경 없음
- [x] 라우팅 키 유지
- [x] 라우팅 로직 변경 없음
- [x] 내부 이동 패턴 유지

---

## 4️⃣ 검증 체크리스트

### 오늘 추천 섹션
- [ ] 오늘 데이터가 없을 때: "📝 오늘 입력을 시작하세요" 메시지 표시
- [ ] 오늘 데이터가 없을 때: "📝 오늘 입력(통합)" 버튼 표시
- [ ] 오늘 데이터가 있을 때: "📋 오늘 마감을 완료하세요" 메시지 표시
- [ ] 오늘 데이터가 있을 때: "📋 점장 마감" 버튼 표시
- [ ] 추천 버튼 클릭 시 해당 페이지로 정상 이동

### 4구역 섹션
- [ ] 매일 입력 섹션: 2개 버튼 정상 표시
- [ ] 월 1회 입력 섹션: 3개 버튼 정상 표시
- [ ] 주간·불시 섹션: 2개 버튼 정상 표시 (신규)
- [ ] 보정/과거 입력 섹션: 2개 버튼 정상 표시
- [ ] 모든 버튼 클릭 시 해당 페이지로 정상 이동

### 상단 문구
- [ ] 안내 문구가 2줄로 표시됨
- [ ] "입력은 기준(원본)을 만드는 곳" 문구 표시
- [ ] "설계는 기준을 업그레이드/변형하는 곳" 문구 표시

---

## 5️⃣ 구현 세부 사항

### 5.1 오늘 추천 로직 구현

**파일**: `ui_pages/input/input_hub.py`

**함수**: `_get_today_recommendation(store_id: str) -> dict`

**사용 함수**:
- `get_day_record_status(store_id, today)`: 오늘 데이터 상태 확인
- `today_kst()`: 오늘 날짜 가져오기

**반환값**:
```python
{
    "message": "📝 오늘 입력을 시작하세요" 또는 "📋 오늘 마감을 완료하세요",
    "button_label": "📝 오늘 입력(통합)" 또는 "📋 점장 마감",
    "page_key": "일일 입력(통합)" 또는 "점장 마감"
}
```

### 5.2 UI 구성

**최상단**: 오늘 추천 카드
- 그라데이션 배경 (보라색)
- 추천 메시지
- 추천 버튼 (primary)

**안내 문구**: 입력 vs 설계 역할 설명

**4개 섹션**: 각 섹션별 버튼 배치

### 5.3 주간 리포트 추가

**추가 이유**: 주간 리포트는 입력 그룹에 포함되어 있지만 입력 허브에 버튼이 없었음

**위치**: 주간·불시 섹션에 추가

**버튼**: "📈 주간 리포트" → "주간 리포트" 페이지

### 5.4 건강검진 추가

**추가 이유**: 불시 루틴으로 입력 허브에 포함

**위치**: 주간·불시 섹션에 추가

**버튼**: "🩺 건강검진" → "건강검진 실시" 페이지

---

## 6️⃣ 향후 개선 사항

### 6.1 주간 리포트 추천 로직

**현재**: TODO로 표시

**향후 구현**:
- 요일이 월요일이면 주간 리포트 추천
- `datetime.now().weekday()` 활용 (0=월요일)

**예시 코드**:
```python
from datetime import datetime
today = today_kst()
if today.weekday() == 0:  # 월요일
    return {
        "message": "📈 이번 주 리포트를 확인하세요",
        "button_label": "📈 주간 리포트",
        "page_key": "주간 리포트"
    }
```

### 6.2 추천 로직 고도화

**향후 개선**:
- 마감 완료 여부 확인
- 주간 리포트 작성 여부 확인
- 월간 정산 완료 여부 확인
- 건강검진 최근 실시 여부 확인

---

## 7️⃣ 테스트 시나리오

### 시나리오 1: 오늘 데이터 없음
1. 오늘 매출/마감 데이터가 없는 상태
2. 입력 허브 접근
3. **예상 결과**: "📝 오늘 입력을 시작하세요" 메시지 + "📝 오늘 입력(통합)" 버튼 표시
4. 버튼 클릭 시 일일 입력 페이지로 이동

### 시나리오 2: 오늘 데이터 있음
1. 오늘 매출/마감 데이터가 있는 상태
2. 입력 허브 접근
3. **예상 결과**: "📋 오늘 마감을 완료하세요" 메시지 + "📋 점장 마감" 버튼 표시
4. 버튼 클릭 시 점장 마감 페이지로 이동

### 시나리오 3: 4구역 섹션 확인
1. 입력 허브 접근
2. **예상 결과**: 4개 섹션이 정상 표시됨
   - 매일 입력 (2개 버튼)
   - 월 1회 입력 (3개 버튼)
   - 주간·불시 (2개 버튼) - 신규
   - 보정/과거 입력 (2개 버튼)
3. 각 버튼 클릭 시 해당 페이지로 이동

---

**작성일**: 2026-01-24  
**담당**: 입력 허브 UX v1 작업
