# 🎯 Supabase SQL 실행 가이드 (왕초보용)

이 가이드는 Supabase 대시보드에서 SQL 파일을 실행하는 방법을 **클릭만 하면 되게** 설명합니다.

---

## 📋 준비물

1. Supabase 계정 (이미 있으시죠?)
2. 프로젝트 접근 권한
3. 아래 SQL 파일 내용 (복사할 준비)

---

## 🚀 단계별 실행 방법

### 1단계: Supabase 대시보드 접속

1. 웹 브라우저 열기 (Chrome, Edge 등)
2. 주소창에 입력: `https://supabase.com`
3. **"Sign In"** 또는 **"로그인"** 버튼 클릭
4. 이메일과 비밀번호 입력 후 로그인

---

### 2단계: 프로젝트 선택

1. 로그인 후 대시보드 화면이 보입니다
2. 왼쪽 상단에 프로젝트 목록이 보입니다
3. **당신의 프로젝트 이름** 클릭
   - 예: "worqfdsudzxhzbdidele" 같은 이름

---

### 3단계: SQL Editor 열기

1. 왼쪽 메뉴에서 **"SQL Editor"** 찾기
   - 아이콘: 📝 또는 "SQL" 글자
2. **"SQL Editor"** 클릭
3. 화면 중앙에 큰 텍스트 입력창이 보입니다
   - 여기가 SQL 명령어를 입력하는 곳입니다!

---

### 4단계: RLS 정책 헬퍼 함수 실행

#### 4-1. SQL 파일 내용 복사

1. 프로젝트 폴더에서 파일 열기:
   - `sql/rls_policy_helper.sql` 파일 열기
2. **전체 내용 선택** (Ctrl + A)
3. **복사** (Ctrl + C)

#### 4-2. Supabase에 붙여넣기

1. Supabase SQL Editor의 텍스트 입력창 클릭
2. 기존 내용이 있다면 모두 삭제 (Ctrl + A → Delete)
3. **붙여넣기** (Ctrl + V)
4. SQL 코드가 입력창에 나타납니다

#### 4-3. 실행하기

1. 입력창 아래쪽에 **"Run"** 버튼 찾기
   - 또는 **"실행"** 버튼
   - 보통 초록색 버튼입니다
2. **"Run"** 버튼 클릭
3. 잠시 기다리기 (1-2초)
4. 화면 아래쪽에 결과가 나타납니다
   - ✅ 성공 메시지: "Success. No rows returned" 또는 "Success"
   - ❌ 에러 메시지: 빨간색으로 에러 내용 표시

#### 4-4. 정책 생성 함수 실행

1. 입력창 내용을 모두 삭제 (Ctrl + A → Delete)
2. 아래 명령어 입력:
   ```sql
   SELECT create_all_rls_policies();
   ```
3. **"Run"** 버튼 클릭
4. 성공 메시지 확인

---

### 5단계: 뷰 생성 (선택사항)

#### 5-1. SQL 파일 내용 복사

1. 프로젝트 폴더에서 파일 열기:
   - `sql/views_from_daily_close.sql` 파일 열기
2. **전체 내용 선택** (Ctrl + A)
3. **복사** (Ctrl + C)

#### 5-2. Supabase에 붙여넣기 및 실행

1. SQL Editor 입력창 클릭
2. 기존 내용 삭제 (Ctrl + A → Delete)
3. **붙여넣기** (Ctrl + V)
4. **"Run"** 버튼 클릭
5. 성공 메시지 확인

---

## ✅ 확인 방법

### RLS 정책이 생성되었는지 확인

1. 왼쪽 메뉴에서 **"Authentication"** → **"Policies"** 클릭
2. 또는 **"Table Editor"** → 테이블 선택 → **"Policies"** 탭
3. 각 테이블에 4개의 정책이 보이면 성공!

### 뷰가 생성되었는지 확인

1. 왼쪽 메뉴에서 **"Database"** → **"Views"** 클릭
2. 다음 뷰들이 보이면 성공:
   - `sales_from_daily_close`
   - `naver_visitors_from_daily_close`
   - `daily_sales_items_from_daily_close`

---

## 🆘 문제 해결

### 에러가 발생했어요!

**에러 메시지 예시:**
- "relation already exists" → 이미 생성된 것 → 무시해도 됩니다
- "permission denied" → 권한 문제 → 관리자에게 문의
- "syntax error" → SQL 문법 오류 → 파일 내용 확인

**해결 방법:**
1. 에러 메시지를 읽어보세요
2. "already exists" 에러는 무시해도 됩니다 (이미 생성된 것)
3. 다른 에러는 에러 메시지를 복사해서 저장해두세요

### 버튼이 안 보여요!

1. 화면을 아래로 스크롤해보세요
2. 브라우저를 새로고침 (F5)
3. 다른 브라우저로 시도해보세요

### SQL Editor가 안 보여요!

1. 왼쪽 메뉴를 확인하세요
2. "SQL Editor" 또는 "SQL" 메뉴 찾기
3. 프로젝트가 올바르게 선택되었는지 확인

---

## 📝 간단 요약 (3단계)

1. **Supabase 접속** → 프로젝트 선택 → **SQL Editor** 클릭
2. **SQL 파일 내용 복사** → 입력창에 **붙여넣기**
3. **"Run"** 버튼 클릭 → 완료!

---

## 💡 팁

- SQL Editor는 여러 개의 쿼리를 한 번에 실행할 수 있습니다
- 실행 전에 항상 내용을 확인하세요
- 실수로 중요한 데이터를 삭제하지 않도록 주의하세요
- 에러가 나도 당황하지 마세요! 대부분 해결 가능합니다

---

## 🎉 완료!

이제 모든 SQL 파일이 실행되었습니다. 
앱이 더 효율적으로 작동할 것입니다!
