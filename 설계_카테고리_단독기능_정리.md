# 설계 카테고리 단독 기능 정리

**작성 일자**: 2026-01-24  
**목적**: 설계 카테고리 페이지들에만 있는 **단독 기능**과, 입력·분석과 **중복되는 내용**을 구분해 정리

---

## 1. 설계 카테고리 페이지 목록

| 설계 페이지(라벨) | page_key | 렌더 모듈 |
|------------------|----------|-----------|
| 설계 허브 | 설계 허브 | `design_hub` |
| 가게 설계 센터 | 가게 설계 센터 | `design_center` |
| 전략 보드 | 전략 보드 | `strategy_board` |
| 메뉴 포트폴리오 설계 | 메뉴 등록 | `menu_management` |
| 메뉴 수익 설계 | 메뉴 수익 구조 설계실 | `menu_profit_design_lab` |
| 재료 구조 설계 | 재료 등록 | `ingredient_management` |
| 수익 구조 설계 | 수익 구조 설계실 | `revenue_structure_design_lab` |
| 레시피 설계 | 레시피 등록 | `recipe_management` (※ 라우팅 없음) |
| 목표 비용 구조 입력 | 목표 비용구조 | `target_cost_structure` |
| 목표 매출 구조 입력 | 목표 매출구조 | `target_sales_structure` |

---

## 2. 입력·분석과 중복되는 내용

### 2.1 완전 동일 페이지 (같은 모듈, 같은 기능)

| 설계 페이지 | 입력/분석 쪽 | 비고 |
|-------------|--------------|------|
| **목표 비용 구조 입력** | 입력(빠른 입력) "목표 비용 구조 입력" | 동일 `target_cost_structure`. 입력·설계 양쪽에서 링크 |
| **목표 매출 구조 입력** | 입력(빠른 입력) "목표 매출 구조 입력" | 동일 `target_sales_structure`. 입력·설계 양쪽에서 링크 |
| **레시피 설계** (→ 레시피 등록) | 입력 "판매 레시피 입력" (→ 레시피 입력) | 동일 `recipe_management`. ※ 설계 "레시피 등록" 전용 라우팅 없음 |

### 2.2 데이터·기능 겹침 (모듈은 다름, 하는 일 일부 중복)

| 설계 페이지 | 입력/분석 쪽 | 중복 내용 |
|-------------|--------------|-----------|
| **메뉴 포트폴리오 설계** (메뉴 등록) | 입력 "판매 메뉴 입력" (메뉴 입력) | 메뉴 CRUD, 포트폴리오 역할/카테고리(tags, categories). **입력**: `menu_input` 5-Zone. **설계**: `menu_management` + Design Lab 프레임 |
| **재료 구조 설계** (재료 등록) | 입력 "사용 재료 입력" (재료 입력) | 재료 CRUD. **입력**: `ingredient_input` 5-Zone, 사용량/발주 추천. **설계**: `ingredient_management` + Design Lab 프레임 |
| **메뉴 수익 설계** | 분석 "원가 파악" (원가 분석) | 메뉴별 원가·원가율·공헌이익. **분석**: `cost_overview` 지표/ABC/트렌드 등. **설계**: `menu_profit_design_lab` Design Lab 프레임·전략 브리핑/실행 탭 |
| **수익 구조 설계** | 비용 분석, 목표 비용구조 | 고정비·변동비·손익분기. **비용 분석**: 5대 비용, 목표 vs 실제 등. **목표 비용**: expense 입력. **설계**: `revenue_structure_design_lab` Design Lab 프레임·시뮬레이션 |

### 2.3 목표 비용구조의 Design Lab 사용 여부

- `target_cost_structure`는 `design_lab_frame`·`design_lab_coach_data`를 **import**하지만,  
  `render_target_cost_structure`에서는 **"공통 프레임 제거"** 후 **`_render_revenue_design_tools`만** 호출.
- 따라서 **현재는 Design Lab 프레임(코치 보드, 구조 맵, 스쿨 카드 등) 미사용**.  
  목표 비용 **입력(expense CRUD, 전월 복사)** 기능만 있고, **설계 전용 UI는 없음**.

---

## 3. 설계 카테고리에만 있는 단독 기능

### 3.1 Design Lab 공통 프레임 (설계 전용 UI)

**사용처**: `design_center`, `menu_management`, `ingredient_management`, `menu_profit_design_lab`, `revenue_structure_design_lab`  
(`target_cost_structure`, `target_sales_structure`는 **미사용**)

| 기능 | 설명 | 제공 모듈 |
|------|------|-----------|
| **Coach Board** (`render_coach_board`) | 3~4개 요약 카드 + 한 줄 판결문 + "이번 달 추천 액션" 버튼 | `design_lab_frame` |
| **Structure Map** (`render_structure_map_container`) | 구조 맵(시각화) 영역, 데이터 없을 때 안내 메시지/액션 | `design_lab_frame` |
| **Owner School** (`render_school_cards`) | 이론 카드 (설계 관련 설명) | `design_lab_frame` |
| **Design Tools** (`render_design_tools_container`) | 기존 CRUD/설정 등을 감싼 "설계 도구" 영역 | `design_lab_frame` |
| **가게 설계 센터로 돌아가기** (`render_back_to_design_center_button`) | 설계실 → 가게 설계 센터 네비게이션 | `design_lab_nav` |

입력·분석 페이지에는 **위 조합 없음**. 설계 전용 단독 기능.

### 3.2 가게 설계 센터 (통합 진단실)

| 기능 | 설명 |
|------|------|
| **4개 설계실 통합 진단** | 메뉴 포트폴리오, 메뉴 수익 구조, 재료 구조, 수익 구조 상태를 한 화면에 요약 |
| **영역별 코치 카드** | 균형 점수, 고원가율 메뉴 수, TOP3 집중도, 손익분기 대비 등 |
| **판결문·추천 액션** | `get_primary_concern` 기반 "가장 의심되는 구조" + 해당 설계실로 이동 CTA |
| **이번 주 구조 점검 완료** | `get_routine_status` / `mark_weekly_check_done` (루틴 완료 처리) |
| **전략 보드 바로가기** | "이번 달 전략 보드" 버튼 |
| **최근 전략 실행 결과** | `load_recent_evaluated_missions` 기반 미션 결과·코치 코멘트 |
| **Design Tools 컨테이너** | 4개 설계실 링크, CTAs 등 |

입력·분석에는 **동일한 통합 진단 + 루틴 점검 + 설계실 맵** 구조 없음. **완전 설계 단독**.

### 3.3 전략 보드

| 기능 | 설명 |
|------|------|
| **가게 상태 분류** | `classify_store_state` (매출·손익·메뉴 등 점수화) |
| **전략 카드 TOP3** | `build_strategy_cards` (v4, 건강검진 연동) |
| **이번 주 실행 로드맵** | `build_weekly_roadmap` |
| **Evidence Bundle** | `build_evidence_bundle` (숫자+설계+검진 통합) |
| **상태 배지, 근거 섹션, 전략 카드 섹션** | UI 전용 구성 |

전략·로드맵·evidence 조합은 **설계/전략 쪽에만** 존재. **설계 단독**.

### 3.4 설계 상태·인사이트 (설계 전용 데이터)

| 기능 | 설명 | 사용처 |
|------|------|--------|
| **설계 상태 통합** (`get_design_state`) | 4개 영역(메뉴 포트폴리오, 메뉴 수익, 재료 구조, 수익 구조) 점수·상태·시그널 | `design_center`, `design_state_loader` 등 |
| **설계 인사이트** (`get_design_insights`) | 영역별 인사이트 | `design_center_data`, `strategy_board` 등 |
| **우선 리스크 영역** (`get_primary_risk_area`) | 설계 기반 리스크 | `design_center` 등 |

입력·분석에는 **설계 상태/인사이트/리스크** 개념 없음. **설계 단독**.

### 3.5 메뉴 포트폴리오 설계실 전용

| 기능 | 설명 |
|------|------|
| **포트폴리오 균형 점수** | `calculate_portfolio_balance_score`, `get_portfolio_verdict` |
| **역할 태그** (미끼/볼륨/마진) | `get_menu_portfolio_tags`, `set_menu_portfolio_tag` (DB+세션) |
| **카테고리** (대표/주력/유인/보조/기타) | `get_menu_portfolio_categories`, `set_menu_portfolio_category` |
| **Structure Map** | 메뉴 포트폴리오 시각화 |
| **Design Tools** | `_render_menu_portfolio_tools` (메뉴 CRUD + 역할/카테고리 설정) |

메뉴 입력(`menu_input`)에는 **균형 점수·verdict·역할/카테고리 DB 저장·Structure Map** 없음. **설계 단독**.

### 3.6 재료 구조 설계실 전용

| 기능 | 설명 |
|------|------|
| **재료 사용금액·원가 비중** | `calculate_ingredient_usage_cost` |
| **원가 집중도** | `calculate_cost_concentration` |
| **고위험 재료** | `identify_high_risk_ingredients` |
| **발주 구조 상태** | `check_order_structure_status` |
| **재료 구조 verdict** | `get_ingredient_structure_verdict` |
| **Structure Map** | 재료 구조 시각화 |
| **Design Tools** | `_render_ingredient_strategy_tools` (재료 CRUD + 전략 도구) |

재료 입력(`ingredient_input`)에는 **사용금액·집중도·고위험·발주 구조·verdict·Structure Map** 없음. **설계 단독**.

### 3.7 메뉴 수익 구조 설계실 전용

| 기능 | 설명 |
|------|------|
| **전략 브리핑 / 전략 실행 탭** | 탭 전환 구조, `design_lab_coach_data` 연동 |
| **Coach Board** | 평균 공헌이익 등 카드 + verdict |
| **Structure Map** | 원가·공헌이익 관련 시각화 |
| **Design Tools** | `_render_menu_profit_design_tools` (가격·마진 설계) |

원가 분석(`cost_overview`)에는 **Design Lab 프레임·전략 브리핑/실행 탭·설계용 Coach/Map** 없음. **설계 단독**.

### 3.8 수익 구조 설계실 전용

| 기능 | 설명 |
|------|------|
| **월 매출 예측** | `_calculate_monthly_sales_forecast` (이번 달 추정) |
| **Coach Board** | 고정비·변동비·손익분기·예상 매출 등 |
| **Structure Map** | 수익 구조 시각화 |
| **Design Tools** | 손익분기·시나리오 시뮬레이션 등 |

비용 분석·목표 비용 입력에는 **수익 구조 설계실 전용 Coach/Map/시뮬** 조합 없음. **설계 단독**.

### 3.9 설계 허브

| 기능 | 설명 |
|------|------|
| **9개 영역 완성도** | 메뉴/재료/레시피/목표 비용·매출, 가게 설계 센터, 전략 보드 등 |
| **우선순위 액션** | 완성도 낮은 영역별 "다음 설계" 제안 |
| **세부설계선택** | 사이드바 expander (세부 설계 페이지 진입) |

입력 허브·분석 허브와 **완성도·우선순위 액션** 구조는 비슷하지만, **설계 영역 전용**이라 설계 단독 기능에 포함해도 됨.

---

## 4. 요약 표

| 구분 | 설계 페이지 | 입력/분석과 중복 | 설계만 있는 단독 기능 |
|------|-------------|------------------|------------------------|
| **완전 동일** | 목표 비용, 목표 매출, (레시피) | 동일 모듈·동일 기능 | 없음 |
| **일부 중복** | 메뉴 등록, 재료 등록 | CRUD, 역할/카테고리 등 | Design Lab 프레임, 균형/verdict, Structure Map, 전략 도구 |
| **일부 중복** | 메뉴 수익 설계, 수익 구조 설계 | 원가·비용·손익분기 데이터 | Design Lab 프레임, 전략 브리핑/실행 탭, 설계 전용 시뮬 |
| **완전 단독** | 가게 설계 센터, 전략 보드, 설계 허브 | 없음 | 통합 진단, 루틴 점검, 전략 카드·로드맵·evidence, 완성도·우선순위 |

---

## 5. 설계 전용 모듈·헬퍼 (참고)

- **`design_lab`**: `design_lab_frame`, `design_lab_nav`, `design_center`, `design_center_data`, `design_insights`, `design_state_loader`, `menu_portfolio_helpers`, `ingredient_structure_helpers`, `design_lab_coach_data`
- **`menu_profit_design_lab`**, **`revenue_structure_design_lab`**: 설계실 전용
- **`strategy`**: `strategy_board`, `strategy_cards`, `roadmap`, `evidence_builder`, `store_state` 등 — 전략 보드 및 설계 연동

---

**작성일**: 2026-01-24  
**참고**: `ui_pages/design_lab/`, `ui_pages/input/`, `ui_pages/analysis/`, `app.py` 라우팅·메뉴
