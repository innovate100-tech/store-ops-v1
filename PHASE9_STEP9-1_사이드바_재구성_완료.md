# PHASE 9 / STEP 9-1 — 사이드바 카테고리 재구성 완료

## 📋 작업 목표

사이드바 카테고리 구조를 전면 개편했습니다.
기능 변경 없이, 정보 구조(IA)와 라우팅만 새 기획 기준으로 재편했습니다.

**원칙**: 페이지 UI/로직은 최대한 건드리지 않고, 사이드바 카테고리, 메뉴명, 그룹핑, 이동 경로만 수정했습니다.

---

## ✅ 완료된 작업

### 1. 사이드바 카테고리 구조 재편
- **파일**: `app.py` (라인 1515-1549)
- **변경 내용**: `menu_categories` 딕셔너리를 새 구조로 완전 교체

### 2. 메뉴 라벨 및 그룹핑 변경
- 모든 메뉴 항목의 표시 라벨을 새 구조에 맞게 변경
- 페이지 키(`page key`)는 유지하여 라우팅 호환성 보장

### 3. 가게 설계 카테고리 Expander 처리
- 항목이 많은 "🔥 가게 설계" 카테고리는 expander로 표시
- 기존 "⚙️ 관리/보정(예외)" expander 로직을 재사용

---

## 📝 새로운 사이드바 구조

### 🟡 오늘 가게
- **홈** (사장 계기판)
  - 페이지 키: `"홈"`

### 🟢 오늘 입력
- **점장 마감**
  - 페이지 키: `"점장 마감"`
- **매출·네이버방문자 보정**
  - 페이지 키: `"매출 등록"` (기존 유지)
- **판매량 보정**
  - 페이지 키: `"판매량 등록"` (기존 유지)

### 🔵 내일 준비
- **발주 관리**
  - 페이지 키: `"발주 관리"` (기존 유지)
- **재료 사용량**
  - 페이지 키: `"재료 사용량 집계"` (기존 유지)
- **재고 현황**
  - 페이지 키: (TODO: 추후 추가 예정)

### 🟣 장사 분석
- **매출 분석**
  - 페이지 키: `"매출 관리"` (기존 유지)
- **판매·메뉴 분석**
  - 페이지 키: `"판매 관리"` (기존 유지)
- **원가 분석**
  - 페이지 키: `"원가 파악"` (기존 유지)

### 🔴 성적표
- **월간 성적표**
  - 페이지 키: `"실제정산"` (기존 유지)
- **주간 리포트**
  - 페이지 키: `"주간 리포트"` (기존 유지)

### 🔥 가게 설계 (Expander)
- **메뉴 설계실**
  - 페이지 키: `"메뉴 등록"` (기존 유지)
- **재료 구조 설계실**
  - 페이지 키: `"재료 등록"` (기존 유지)
- **레시피 설계실**
  - 페이지 키: `"레시피 등록"` (기존 유지)
- **목표 비용 구조**
  - 페이지 키: `"목표 비용구조"` (기존 유지)
- **목표 매출 구조**
  - 페이지 키: `"목표 매출구조"` (기존 유지)
- **직원 연락망**
  - 페이지 키: `"직원 연락망"` (기존 유지)
- **협력사 연락망**
  - 페이지 키: `"협력사 연락망"` (기존 유지)
- **게시판**
  - 페이지 키: `"게시판"` (기존 유지)

---

## 📊 변경 사항 요약

### 변경된 메뉴 라벨

| 기존 라벨 | 새 라벨 | 페이지 키 (변경 없음) |
|-----------|---------|---------------------|
| 홈 | 홈 | `"홈"` |
| 점장 마감 | 점장 마감 | `"점장 마감"` |
| 매출 보정 | 매출·네이버방문자 보정 | `"매출 등록"` |
| 판매량 보정 | 판매량 보정 | `"판매량 등록"` |
| 발주 | 발주 관리 | `"발주 관리"` |
| 재료 사용 | 재료 사용량 | `"재료 사용량 집계"` |
| 매출 | 매출 분석 | `"매출 관리"` |
| 판매 | 판매·메뉴 분석 | `"판매 관리"` |
| 원가 | 원가 분석 | `"원가 파악"` |
| 실제정산 | 월간 성적표 | `"실제정산"` |
| 주간 리포트 | 주간 리포트 | `"주간 리포트"` |
| 메뉴 | 메뉴 설계실 | `"메뉴 등록"` |
| 재료 | 재료 구조 설계실 | `"재료 등록"` |
| 레시피 | 레시피 설계실 | `"레시피 등록"` |
| 목표 비용 | 목표 비용 구조 | `"목표 비용구조"` |
| 목표 매출 | 목표 매출 구조 | `"목표 매출구조"` |
| 직원 | 직원 연락망 | `"직원 연락망"` |
| 협력사 | 협력사 연락망 | `"협력사 연락망"` |
| 게시판 | 게시판 | `"게시판"` |

### 변경된 카테고리 구조

| 기존 카테고리 | 새 카테고리 | 변경 사항 |
|--------------|------------|----------|
| 🏠 사장 계기판 | 🟡 오늘 가게 | 이모지 및 이름 변경 |
| 📋 오늘 마감 | 🟢 오늘 입력 | 이모지 및 이름 변경, 항목 추가 |
| 🛒 운영(내일 장사 준비) | 🔵 내일 준비 | 이모지 및 이름 변경 |
| 📊 분석(원인 찾기) | 🟣 장사 분석 | 이모지 및 이름 변경 |
| 🧾 성적표(월간) | 🔴 성적표 | 이모지 및 이름 변경, 항목 재배치 |
| ⚙️ 관리/보정(예외) | 🔥 가게 설계 | 이모지 및 이름 변경, 항목 재배치 |

---

## 🔍 라우팅 호환성 확인

### 페이지 키 유지 확인
모든 페이지 키(`page key`)는 기존과 동일하게 유지되어 라우팅 호환성이 보장됩니다.

**확인된 라우팅 매핑**:
- `"홈"` → `ui_pages/home/home_page.py`
- `"점장 마감"` → `ui_pages/manager_close.py`
- `"매출 등록"` → `ui_pages/sales_entry.py`
- `"판매량 등록"` → `ui_pages/sales_volume_entry.py`
- `"발주 관리"` → `ui_pages/order_management.py`
- `"재료 사용량 집계"` → `ui_pages/ingredient_usage_summary.py`
- `"매출 관리"` → `ui_pages/sales_management.py`
- `"판매 관리"` → `ui_pages/sales_analysis.py`
- `"원가 파악"` → `ui_pages/cost_overview.py`
- `"실제정산"` → `ui_pages/settlement_actual.py`
- `"주간 리포트"` → `ui_pages/weekly_report.py`
- `"메뉴 등록"` → `ui_pages/menu_management.py`
- `"재료 등록"` → `ui_pages/ingredient_management.py`
- `"레시피 등록"` → 인라인 코드 (app.py 내부)
- `"목표 비용구조"` → `ui_pages/target_cost_structure.py`
- `"목표 매출구조"` → `ui_pages/target_sales_structure.py`
- `"직원 연락망"` → `ui_pages/staff_contacts.py`
- `"협력사 연락망"` → `ui_pages/vendor_contacts.py`
- `"게시판"` → `ui_pages/board.py`

### 라우팅 코드 점검 결과
- ✅ 모든 `elif page == "..."` 조건문이 기존 페이지 키를 사용
- ✅ 페이지 키 변경 없음으로 인한 라우팅 깨짐 없음
- ✅ Import 경로 변경 없음

---

## 📝 수정된 파일 목록

### 1. `app.py`
**변경 내용**:
- 라인 1515-1549: `menu_categories` 딕셔너리 완전 교체
- 라인 1569-1584: 카테고리 렌더링 로직 수정 (가게 설계를 expander로 처리)

**변경 전**:
```python
menu_categories = {
    "🏠 사장 계기판": [("홈", "홈")],
    "📋 오늘 마감": [("점장 마감", "점장 마감")],
    "🛒 운영(내일 장사 준비)": [...],
    "📊 분석(원인 찾기)": [...],
    "🧾 성적표(월간)": [...],
    "⚙️ 관리/보정(예외)": [...],
}
```

**변경 후**:
```python
menu_categories = {
    "🟡 오늘 가게": [("홈", "홈")],
    "🟢 오늘 입력": [
        ("점장 마감", "점장 마감"),
        ("매출·네이버방문자 보정", "매출 등록"),
        ("판매량 보정", "판매량 등록"),
    ],
    "🔵 내일 준비": [...],
    "🟣 장사 분석": [...],
    "🔴 성적표": [...],
    "🔥 가게 설계": [...],
}
```

---

## ✅ 앱 실행 시 확인 체크리스트

### 기본 동작 확인
- [ ] 앱 시작 시 에러 없이 로그인 화면 표시
- [ ] 사이드바에 새 카테고리 구조 표시
- [ ] 각 메뉴 항목 클릭 시 해당 페이지로 정상 이동

### 카테고리별 확인
- [ ] 🟡 오늘 가게: 홈 페이지 정상 표시
- [ ] 🟢 오늘 입력: 점장 마감, 매출 보정, 판매량 보정 정상 동작
- [ ] 🔵 내일 준비: 발주 관리, 재료 사용량 정상 동작
- [ ] 🟣 장사 분석: 매출 분석, 판매·메뉴 분석, 원가 분석 정상 동작
- [ ] 🔴 성적표: 월간 성적표, 주간 리포트 정상 동작
- [ ] 🔥 가게 설계: Expander 클릭 시 모든 항목 표시 및 정상 동작

### 라우팅 확인
- [ ] 모든 페이지 키가 기존과 동일하게 작동
- [ ] URL 파라미터로 직접 접근 시 정상 동작
- [ ] 세션 상태 유지 확인

---

## 🎯 기대 동작

### 사용자 경험
1. **카테고리 구조**: 직관적인 6개 카테고리로 재편
   - 오늘 가게 → 오늘 입력 → 내일 준비 → 장사 분석 → 성적표 → 가게 설계
2. **메뉴 라벨**: 더 명확하고 일관된 네이밍
   - 예: "매출 보정" → "매출·네이버방문자 보정"
   - 예: "판매" → "판매·메뉴 분석"
3. **가게 설계**: Expander로 접근성 향상 (항목이 많아 접기/펼치기 가능)

### 코드 안정성
- 모든 페이지 키 유지로 라우팅 호환성 보장
- Import 경로 변경 없음
- 기존 페이지 로직 변경 없음

---

## 📌 참고사항

### 미구현 항목
- **재고 현황**: 요청된 "재고 현황" 페이지는 아직 구현되지 않았습니다.
  - 위치: `🔵 내일 준비` 카테고리
  - 상태: TODO 주석으로 표시
  - 추후 구현 시 추가 예정

### 임시 연결 항목
- **메뉴 수익 구조 설계실**: 요청된 신규 개념이지만, 현재는 기존 페이지와 연결되지 않았습니다.
  - 추후 별도 페이지 구현 시 추가 예정

### 기존 기능 보존
- 모든 페이지의 UI/로직은 변경되지 않았습니다.
- 데이터 저장/로드 로직 변경 없음
- SSOT 정책 및 캐시 무효화 로직 변경 없음

---

## 🚀 배포 준비

모든 수정이 완료되었습니다. 다음 단계:
1. ✅ 앱 재시작
2. ✅ 사이드바 새 구조 확인
3. ✅ 각 메뉴 항목 클릭하여 페이지 정상 동작 확인
4. ✅ 가게 설계 Expander 동작 확인

---

## 📊 작업 요약

| 항목 | 상태 | 비고 |
|------|------|------|
| 사이드바 카테고리 재편 | ✅ 완료 | 6개 카테고리로 재구성 |
| 메뉴 라벨 변경 | ✅ 완료 | 모든 라벨 업데이트 |
| 페이지 키 유지 | ✅ 완료 | 라우팅 호환성 보장 |
| 가게 설계 Expander | ✅ 완료 | 항목이 많아 접기/펼치기 |
| 라우팅 코드 점검 | ✅ 완료 | 깨짐 없음 확인 |

---

## ✅ 최종 확인

- [x] 사이드바 카테고리 구조 재편 완료
- [x] 메뉴 라벨 및 그룹핑 변경 완료
- [x] 페이지 키 유지로 라우팅 호환성 보장
- [x] 가게 설계 카테고리 Expander 처리 완료
- [x] 라우팅 코드 점검 완료 (깨짐 없음)
- [ ] 앱 실행 및 동작 확인 (사용자 확인 필요)

**참고**: 모든 페이지 키는 기존과 동일하게 유지되어 라우팅 호환성이 보장됩니다. 앱을 재시작하여 새 사이드바 구조를 확인하세요.
