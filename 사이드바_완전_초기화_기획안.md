# 사이드바 완전 초기화 기획안

## 📋 현재 상황 분석

### 문제점
1. **사이드바가 보이지 않음**: CSS나 JavaScript가 사이드바를 숨기고 있을 가능성
2. **코드 복잡도**: 사이드바 관련 코드가 여러 곳에 분산되어 있음
3. **충돌 가능성**: 커스텀 사이드바 코드와 기본 사이드바 코드가 충돌

### 현재 사이드바 관련 코드 위치
1. **CSS 코드** (app.py 약 280-620줄)
   - 사이드바 숨김/표시 관련 CSS
   - 커스텀 사이드바 스타일링
   - 레이아웃 조정 CSS

2. **JavaScript 코드** (app.py 약 620-800줄)
   - 사이드바 상태 동기화
   - Streamlit 내부 함수 차단
   - DOM 조작 코드

3. **사이드바 렌더링 함수** (app.py 약 1222-1396줄)
   - `render_expanded_sidebar()`: 펼친 상태 사이드바
   - `render_collapsed_sidebar()`: 접힌 상태 사이드바
   - `render_custom_sidebar()`: 커스텀 사이드바 (사용 안 함)

4. **사이드바 호출 코드** (app.py 약 1402-1404줄)
   - `with st.sidebar: render_expanded_sidebar(menu)`

---

## 🎯 목표

**Streamlit 기본 사이드바만 사용하는 깔끔한 상태로 초기화**

---

## 📝 제거할 코드 목록

### 1단계: CSS 코드 제거
- **위치**: app.py 약 280-620줄
- **제거 대상**:
  - `/* Streamlit 네이티브 사이드바 토글 버튼 완전히 숨김 */` 관련 CSS
  - `/* Streamlit 기본 사이드바 완전히 숨기기 */` 관련 CSS
  - `/* 사이드바가 완전히 사라지지 않도록 보장 */` 관련 CSS
  - `/* 사이드바 오버레이 제거 */` 관련 CSS
  - 커스텀 사이드바 관련 모든 CSS

### 2단계: JavaScript 코드 제거
- **위치**: app.py 약 620-800줄
- **제거 대상**:
  - `sidebar_collapsed_js` 변수
  - `window.streamlit.toggleSidebar` 차단 코드
  - `window.streamlit.setSidebarVisibility` 차단 코드
  - 이벤트 리스너 차단 코드
  - `syncSidebarState()` 함수
  - `removeHamburgerButtons()` 함수
  - 모든 사이드바 관련 JavaScript

### 3단계: 사용하지 않는 함수 제거
- **위치**: app.py 약 1271-1396줄
- **제거 대상**:
  - `render_collapsed_sidebar()` 함수 (사용 안 함)
  - `render_custom_sidebar()` 함수 (사용 안 함)

---

## ✅ 남길 코드

### 필수 코드만 유지
1. **`render_expanded_sidebar()` 함수** (app.py 약 1222-1269줄)
   - 기본 사이드바 렌더링에 사용
   - 매장 선택, 메뉴 렌더링, 로그아웃 등 핵심 기능 포함

2. **사이드바 호출 코드** (app.py 약 1402-1404줄)
   ```python
   with st.sidebar:
       render_expanded_sidebar(menu)
   ```

3. **current_page 초기화** (app.py 약 1398-1400줄)
   ```python
   if "current_page" not in st.session_state:
       st.session_state.current_page = "홈"
   ```

---

## 🔧 실행 계획

### Phase 1: CSS 코드 제거
1. 사이드바 숨김 관련 CSS 블록 찾기
2. 커스텀 사이드바 관련 CSS 블록 찾기
3. 모든 사이드바 관련 CSS 제거
4. 메인 콘텐츠 레이아웃 조정 CSS는 유지 (필요시)

### Phase 2: JavaScript 코드 제거
1. `sidebar_collapsed_js` 변수 선언 찾기
2. `syncSidebarState()` 함수 찾기
3. `removeHamburgerButtons()` 함수 찾기
4. Streamlit 함수 차단 코드 찾기
5. 모든 사이드바 관련 JavaScript 제거

### Phase 3: 사용하지 않는 함수 제거
1. `render_collapsed_sidebar()` 함수 제거
2. `render_custom_sidebar()` 함수 제거

### Phase 4: 검증
1. 앱 실행하여 사이드바가 보이는지 확인
2. 사이드바 메뉴 클릭 동작 확인
3. 페이지 라우팅 정상 작동 확인
4. 매장 선택 기능 확인
5. 로그아웃 기능 확인

---

## 📊 예상 결과

### Before (현재)
- ❌ 사이드바가 보이지 않음
- ❌ 복잡한 CSS/JavaScript 코드
- ❌ 사용하지 않는 함수들

### After (목표)
- ✅ Streamlit 기본 사이드바 정상 표시
- ✅ 깔끔한 코드 구조
- ✅ 기본 기능만 포함
- ✅ 유지보수 용이

---

## ⚠️ 주의사항

1. **CSS 제거 시 주의**
   - 메인 콘텐츠 레이아웃 관련 CSS는 유지 필요
   - 다른 UI 요소에 영향을 주는 CSS는 확인 후 제거

2. **JavaScript 제거 시 주의**
   - 다른 기능에 사용되는 JavaScript는 유지 필요
   - 사이드바 관련 코드만 선별적으로 제거

3. **함수 제거 시 주의**
   - `render_expanded_sidebar()`는 반드시 유지
   - 다른 곳에서 사용하는 함수인지 확인 후 제거

---

## 🚀 실행 순서

1. **백업**: 현재 코드 상태 확인
2. **CSS 제거**: Phase 1 실행
3. **JavaScript 제거**: Phase 2 실행
4. **함수 제거**: Phase 3 실행
5. **테스트**: Phase 4 실행
6. **문제 발생 시**: 롤백 및 점진적 제거

---

## 📌 체크리스트

### 제거 확인
- [ ] CSS: 사이드바 숨김 코드 제거
- [ ] CSS: 커스텀 사이드바 스타일 제거
- [ ] JavaScript: 사이드바 상태 동기화 코드 제거
- [ ] JavaScript: Streamlit 함수 차단 코드 제거
- [ ] JavaScript: DOM 조작 코드 제거
- [ ] 함수: `render_collapsed_sidebar()` 제거
- [ ] 함수: `render_custom_sidebar()` 제거

### 유지 확인
- [ ] 함수: `render_expanded_sidebar()` 유지
- [ ] 코드: `with st.sidebar:` 호출 코드 유지
- [ ] 코드: `current_page` 초기화 유지

### 테스트 확인
- [ ] 사이드바가 화면에 보임
- [ ] 사이드바 메뉴 클릭 동작
- [ ] 페이지 라우팅 정상
- [ ] 매장 선택 기능 정상
- [ ] 로그아웃 기능 정상

---

## 💡 추가 개선 사항 (선택)

나중에 필요시 추가할 수 있는 기능:
1. 사이드바 접기/펼치기 기능 (Streamlit 기본 기능 사용)
2. 사이드바 스타일링 (최소한의 CSS만)
3. 사이드바 애니메이션 (선택적)

---

**작성일**: 2026-01-25  
**목적**: 사이드바 관련 코드 완전 초기화 및 Streamlit 기본 사이드바로 복원
