# 입력 허브 라우팅 안정화 + 키 표기 일관화 완료 보고서

**작업 일자**: 2026-01-24  
**목적**: 입력 허브 라우팅 안정화 및 키 표기 일관화 (기능/DB 영향 0)

---

## 1️⃣ 수정 사항

### 1.1 app.py 라우팅 수정

**위치**: `app.py` 라인 1727-1730

**변경 전**:
```python
# 입력 허브 페이지
if page == "입력 허브":
    from ui_pages.input.input_hub import render_input_hub
    render_input_hub()
```

**변경 후**:
```python
# 입력 허브 페이지
elif page == "입력 허브":
    from ui_pages.input.input_hub import render_input_hub
    render_input_hub()
```

**변경 이유**:
- 독립 `if` 문은 다른 페이지와 중복 렌더링될 수 있는 위험이 있음
- `elif`로 변경하여 라우팅 체인에 편입, 중복 렌더/다중 라우팅 방지

### 1.2 input_hub.py 키 표기 일관화

**위치**: `ui_pages/input/input_hub.py` 라인 42-45

**변경 전**:
```python
with col1:
    if st.button("📅 월간 정산(실제 입력)", use_container_width=True, type="secondary", key="input_hub_settlement"):
        st.session_state["current_page"] = "실제정산"
        st.rerun()
```

**변경 후**:
```python
with col1:
    if st.button("📅 월간 정산(실제 입력)", use_container_width=True, type="secondary", key="input_hub_settlement"):
        st.session_state["current_page"] = "실제정산"
        st.rerun()
    st.caption("페이지 키: 실제정산 (기존 유지)")
```

**변경 이유**:
- 버튼 텍스트("월간 정산(실제 입력)")와 실제 페이지 키("실제정산")의 차이를 명확히 표시
- 사용자가 어떤 페이지로 이동하는지 명확히 인지할 수 있도록 캡션 추가

---

## 2️⃣ 검증 체크리스트

### 라우팅 안정화
- [x] "입력 허브" 라우팅이 `elif`로 변경됨
- [x] 라우팅 체인에 정상 편입됨
- [x] 독립 `if` 문 제거됨

### 키 표기 일관화
- [x] 월간 정산 버튼의 `current_page`가 "실제정산"으로 설정됨 (기존 유지)
- [x] 월간 정산 버튼 아래 캡션 추가됨
- [x] 캡션 내용: "페이지 키: 실제정산 (기존 유지)"

### 기능 영향 없음
- [x] 기존 페이지 파일/함수 변경 없음
- [x] 기존 page key 유지
- [x] DB/저장 로직 변경 없음
- [x] 다른 페이지 라우팅에 영향 없음

---

## 3️⃣ 검증 시나리오

### 시나리오 1: 입력 허브 단독 렌더링
1. 사이드바에서 "입력 허브" 클릭
2. **예상 결과**: 입력 허브 페이지만 렌더링됨 (다른 페이지 섞임 없음)
3. **검증**: `elif` 체인으로 인해 다른 페이지와 중복 렌더링되지 않음

### 시나리오 2: 월간 정산 버튼 클릭
1. 입력 허브 페이지에서 "📅 월간 정산(실제 입력)" 버튼 클릭
2. **예상 결과**: "실제정산" 페이지로 100% 이동
3. **검증**: `st.session_state["current_page"] = "실제정산"` 설정 확인

### 시나리오 3: 키 표기 확인
1. 입력 허브 페이지에서 월간 정산 버튼 확인
2. **예상 결과**: 버튼 아래에 "페이지 키: 실제정산 (기존 유지)" 캡션 표시
3. **검증**: 사용자가 실제 이동할 페이지 키를 명확히 인지 가능

---

## 4️⃣ 기술적 세부 사항

### 4.1 라우팅 체인 구조

**현재 라우팅 순서**:
```python
if page == "홈":
    ...
elif page == "전략 보드":
    ...
elif page == "입력 허브":  # ← 여기에 편입
    ...
elif page == "일일 입력(통합)":
    ...
```

**장점**:
- 단일 페이지만 렌더링됨 (중복 방지)
- 라우팅 체인에 일관되게 편입됨
- 유지보수 용이

### 4.2 키 표기 일관화

**버튼 텍스트 vs 페이지 키**:
- 버튼 텍스트: "📅 월간 정산(실제 입력)" (사용자 친화적)
- 페이지 키: "실제정산" (기존 라우팅 키 유지)
- 캡션: "페이지 키: 실제정산 (기존 유지)" (명확성)

**이유**:
- 버튼 텍스트는 사용자가 이해하기 쉬운 문구 사용
- 페이지 키는 기존 라우팅과의 호환성 유지
- 캡션으로 실제 이동할 페이지를 명확히 표시

---

## 5️⃣ 추가 고려 사항

### 5.1 다른 버튼에도 캡션 추가 여부

**현재**: 월간 정산 버튼에만 캡션 추가

**고려 사항**:
- 다른 버튼들은 버튼 텍스트와 페이지 키가 일치하거나 명확함
- 월간 정산만 "월간 정산(실제 입력)" vs "실제정산"으로 차이가 있어 캡션 추가
- 필요 시 다른 버튼에도 동일하게 적용 가능

### 5.2 라우팅 체인 순서

**현재**: 입력 허브가 홈/전략 보드 다음에 위치

**고려 사항**:
- 입력 허브는 입력 그룹의 허브이므로 입력 관련 페이지들 앞에 위치하는 것이 자연스러움
- 현재 위치가 적절함 (홈 다음, 입력 페이지들 앞)

---

**작성일**: 2026-01-24  
**담당**: 입력 허브 라우팅 안정화 작업
