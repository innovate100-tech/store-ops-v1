# 설계 카테고리 역할 재정의 기획안

**작성 일자**: 2026-01-24  
**목적**: 제공된 **3층 구조(기준 구조 → 조작 레버 → 결과판)**를 바탕으로 설계 카테고리의 역할과 기능을 재정의

---

## 1. 설계 카테고리의 정체성 (재정의)

### 1.1 핵심 철학

> **"숫자 만지는 곳" ❌ → "사업 구조를 만지는 곳" ⭕**

- **입력**: 실제 발생한 데이터를 기록하는 곳
- **분석**: 기록된 데이터를 해석하는 곳
- **설계**: **사업 구조를 설계하고 시뮬레이션하는 곳**

### 1.2 설계의 역할

**"이 설계안은 살아남는 구조인가?"**  
→ 구조 시뮬레이터: 레버를 조작하면 즉시 결과가 보이는 **인터랙티브 설계 도구**

---

## 2. 3층 구조 체계

### 2.1 1층: 기준 구조 만들기 (Baseline)

**목적**: 현재 분석 데이터를 **"고정된 설계 기준안"**으로 변환

#### 2.1.1 현재 월 손익 구조 자동 불러오기

| 항목 | 데이터 소스 | 설명 |
|------|------------|------|
| **매출 구성** | 분석(매출 분석) | 일평균 매출, 요일별 패턴, 메뉴별 매출 비중 |
| **객단가** | 분석(매출 분석) | 일평균 매출 / 일평균 방문자 |
| **회전** | 분석(매출 분석) | 일평균 방문자, 좌석 수(설정) → 회전율 |
| **인건비율** | 분석(비용 분석) | 인건비 / 매출 × 100 |
| **원가율** | 분석(원가 분석) | 원가 / 매출 × 100 (메뉴별 평균) |
| **고정비** | 분석(비용 분석) | 임차료 + 인건비 + 공과금 합계 |
| **변동비율** | 분석(비용 분석) | 재료비 + 부가세&카드수수료 비율 |

#### 2.1.2 "현재 구조" 저장

- **저장 형식**: 설계 전용 테이블 또는 세션 상태
- **UI 이름**: 
  - "현재 가게 구조"
  - "우리 매장 기본 설계도"
  - "기준 구조"
- **용도**: 설계의 출발점, 레버 조작 전 **기준선**

#### 2.1.3 구현 위치

- **설계 허브**: "기준 구조 불러오기" 버튼 → 현재 월 분석 데이터 자동 수집
- **가게 설계 센터**: 기준 구조 요약 카드 표시
- **각 설계실**: 기준 구조 vs 설계안 비교

---

### 2.2 2층: 조작 레버 만들기 (Levers)

**목적**: 사장이 **실제로 바꿀 수 있는 것만** 남긴다

#### 2.2.1 매출 레버

| 레버 | 설명 | 현재 상태 | 조작 방법 |
|------|------|-----------|-----------|
| **일 방문객 수** | 하루 평균 방문자 수 | 분석 데이터에서 자동 계산 | 숫자 입력 또는 ±버튼 |
| **객단가** | 1인당 평균 결제금액 | 분석 데이터에서 자동 계산 | 숫자 입력 또는 ±버튼 |
| **회전율** | 좌석당 하루 평균 회전 수 | 분석 데이터에서 자동 계산 | 숫자 입력 또는 좌석 수 조정 |
| **영업일수** | 월간 영업일 수 | 기본값 30일 | 숫자 입력 |

**중요 규칙**:  
❌ "총매출 입력"  
⭕ "구조 입력 → 매출 자동계산"  
→ `예상 월매출 = 일 방문객 수 × 객단가 × 회전율 × 영업일수`

#### 2.2.2 메뉴 레버

| 레버 | 설명 | 현재 상태 | 조작 방법 |
|------|------|-----------|-----------|
| **메뉴별 가격** | 각 메뉴의 판매가 | 메뉴 마스터에서 로드 | 가격 입력 또는 ±버튼 |
| **원가율** | 메뉴별 원가 / 판매가 | 원가 분석에서 로드 | 원가율 입력 또는 원가 입력 |
| **판매 비중** | 메뉴별 매출 비중 | 판매 메뉴 분석에서 로드 | 비중(%) 입력 또는 드래그 |

**중요 규칙**:  
→ 메뉴 가격·원가율·판매 비중을 바꾸면 → **전체 매출·원가·공헌이익 자동 재계산**

#### 2.2.3 비용 레버

| 레버 | 설명 | 현재 상태 | 조작 방법 |
|------|------|-----------|-----------|
| **인건비 구조** | 인원 수 / 시급 / 시간 | 목표 비용구조에서 로드 | 인원·시급·시간 입력 |
| **고정비** | 임차료 + 공과금 | 목표 비용구조에서 로드 | 항목별 금액 입력 |
| **프로모션 비용** | 마케팅·할인 비용 | (신규) | 월간 프로모션 비용 입력 |

**중요 규칙**:  
→ 인건비 구조를 바꾸면 → **고정비·변동비율·손익분기점 자동 재계산**

#### 2.2.4 구조 레버

| 레버 | 설명 | 현재 상태 | 조작 방법 |
|------|------|-----------|-----------|
| **좌석 수** | 매장 좌석 수 | (신규 입력 필요) | 숫자 입력 |
| **테이블 구성** | 테이블 크기별 구성 | (신규 입력 필요) | 테이블 타입별 수량 입력 |
| **운영시간** | 일일 운영 시간 | (신규 입력 필요) | 오픈/마감 시간 입력 |

**중요 규칙**:  
→ 좌석 수·운영시간을 바꾸면 → **최대 회전율·최대 매출 상한 자동 계산**

---

### 2.3 3층: 결과판 만들기 (Impact Board)

**목적**: 레버를 건드리면 **즉시 바뀌는 것들** 표시

#### 2.3.1 예상 결과 지표

| 지표 | 계산식 | 표시 방법 |
|------|--------|-----------|
| **예상 월매출** | 일 방문객 × 객단가 × 회전율 × 영업일수 | 큰 숫자 + 기준 대비 ±% |
| **예상 영업이익** | 예상 매출 - (고정비 + 변동비) | 큰 숫자 + 기준 대비 ±% |
| **손익분기점 변화** | 고정비 / (1 - 변동비율) | 기준 손익분기 vs 설계안 손익분기 비교 |
| **인건비율 변화** | 인건비 / 예상 매출 × 100 | 기준 vs 설계안 비교 |
| **원가율 변화** | 원가 / 예상 매출 × 100 | 기준 vs 설계안 비교 |
| **목표 달성 가능성** | 예상 매출 / 목표 매출 × 100 | 게이지 + 달성 가능/불가 판정 |
| **위험 경고** | 손익분기 미달, 원가율 과다 등 | 경고 배지 + 이유 |

#### 2.3.2 "살아남는 구조" 판정

**판정 기준**:
- ✅ **안정**: 예상 매출 > 손익분기점 × 1.2, 원가율 < 35%, 인건비율 < 30%
- ⚠️ **주의**: 예상 매출 > 손익분기점, 원가율 35~40%, 인건비율 30~35%
- 🔴 **위험**: 예상 매출 < 손익분기점, 원가율 > 40%, 인건비율 > 35%

**표시 방법**:
- **대형 배지**: "이 설계안은 살아남는 구조입니다" / "이 설계안은 위험합니다"
- **상세 이유**: 위험 요소별 설명

---

## 3. 설계 카테고리 페이지 재구성

### 3.1 설계 허브 (업그레이드)

**역할**: 설계의 시작점, 기준 구조 불러오기 + 설계 상태 요약

#### ZONE A: 기준 구조 불러오기 (신규)

- **"현재 가게 구조 불러오기"** 버튼
- 분석 데이터(매출·비용·원가)에서 자동 수집
- 기준 구조 요약 카드:
  - 현재 월매출, 객단가, 회전율
  - 인건비율, 원가율, 고정비
  - 손익분기점
- **"이 구조를 기준으로 설계 시작"** 버튼

#### ZONE B: 설계 영역별 완성도 (기존 유지)

#### ZONE C: 우선순위 액션 (기존 유지)

---

### 3.2 가게 설계 센터 (업그레이드)

**역할**: 4개 설계실 통합 진단 + **기준 구조 vs 설계안 비교**

#### ZONE A: 기준 구조 요약 (신규)

- 현재 월 기준 구조 카드 4개:
  - 매출 구조 (객단가, 회전율, 영업일수)
  - 메뉴 구조 (평균 원가율, 판매 비중)
  - 비용 구조 (고정비, 변동비율)
  - 수익 구조 (손익분기점, 예상 이익)

#### ZONE B: 4개 설계실 통합 진단 (기존 유지)

#### ZONE C: 기준 vs 설계안 비교 (신규)

- 각 설계실에서 **기준 구조**와 **설계안**을 비교
- 변화량 표시: ±매출, ±이익, ±손익분기점 등

---

### 3.3 수익 구조 설계실 (대폭 업그레이드)

**역할**: **구조 시뮬레이터** - 레버 조작 → 즉시 결과 확인

#### ZONE A: Coach Board (기존 유지)

#### ZONE B: 기준 구조 (신규)

- **"현재 구조 불러오기"** 버튼
- 기준 구조 표시:
  - 일 방문객 수, 객단가, 회전율, 영업일수
  - 고정비, 변동비율
  - 기준 손익분기점, 기준 월매출

#### ZONE C: 조작 레버 (신규)

**매출 레버**:
- 일 방문객 수: `st.number_input` 또는 ±버튼
- 객단가: `st.number_input` 또는 ±버튼
- 회전율: `st.number_input` 또는 좌석 수 조정
- 영업일수: `st.number_input`

**비용 레버**:
- 인건비 구조: 인원 수, 시급, 시간 입력
- 고정비: 임차료, 공과금 입력
- 변동비율: 재료비율, 부가세&카드수수료 비율 입력

**구조 레버**:
- 좌석 수: `st.number_input`
- 운영시간: 오픈/마감 시간 선택

#### ZONE D: 결과판 (Impact Board) (신규)

**실시간 계산 표시**:
- 예상 월매출 (기준 대비 ±%)
- 예상 영업이익 (기준 대비 ±%)
- 손익분기점 변화 (기준 vs 설계안)
- 인건비율 변화 (기준 vs 설계안)
- 원가율 변화 (기준 vs 설계안)
- 목표 달성 가능성 (게이지)
- **"살아남는 구조" 판정** (대형 배지)

**시각화**:
- 매출 구간별 예상 이익 테이블 (기존 유지)
- 기준 vs 설계안 비교 차트

#### ZONE E: Design Tools (기존 유지)

---

### 3.4 메뉴 수익 구조 설계실 (대폭 업그레이드)

**역할**: 메뉴 레버 조작 → 매출·원가·공헌이익 자동 재계산

#### ZONE A: Coach Board (기존 유지)

#### ZONE B: 기준 구조 (신규)

- 현재 메뉴별 가격, 원가율, 판매 비중 표시

#### ZONE C: 메뉴 레버 (신규)

**메뉴별 조작**:
- 가격: `st.number_input` 또는 ±버튼
- 원가율: `st.number_input` 또는 원가 입력
- 판매 비중: `st.slider` 또는 드래그

**일괄 조작**:
- 전체 가격 ±N% 버튼
- 전체 원가율 ±N%p 버튼

#### ZONE D: 결과판 (Impact Board) (신규)

**실시간 계산 표시**:
- 예상 월매출 (메뉴별 가격 × 판매 비중 기반)
- 예상 원가 (메뉴별 원가율 × 매출 기반)
- 예상 공헌이익 (매출 - 원가)
- 평균 원가율 변화 (기준 vs 설계안)
- **"살아남는 구조" 판정** (원가율 기준)

#### ZONE E: Design Tools (기존 유지)

---

### 3.5 메뉴 포트폴리오 설계실 (업그레이드)

**역할**: 메뉴 구성 레버 → 포트폴리오 균형·매출 자동 계산

#### ZONE A: Coach Board (기존 유지)

#### ZONE B: 기준 구조 (신규)

- 현재 메뉴 포트폴리오 구성 (역할별, 카테고리별)

#### ZONE C: 포트폴리오 레버 (신규)

- 역할 태그 변경 (미끼/볼륨/마진)
- 카테고리 변경 (대표/주력/유인/보조/기타)
- 메뉴 추가/제거

#### ZONE D: 결과판 (Impact Board) (신규)

- 포트폴리오 균형 점수 변화
- 예상 매출 변화 (역할별 기여도 기반)
- **"살아남는 구조" 판정** (균형 점수 기준)

---

### 3.6 재료 구조 설계실 (업그레이드)

**역할**: 재료 레버 → 원가·발주 구조 자동 계산

#### ZONE A: Coach Board (기존 유지)

#### ZONE B: 기준 구조 (신규)

- 현재 재료별 사용금액, 원가 비중, 집중도

#### ZONE C: 재료 레버 (신규)

- 재료 단가 변경
- 대체재 선택
- 발주 구조 변경 (발주단위, 변환비율)

#### ZONE D: 결과판 (Impact Board) (신규)

- 원가 변화 (재료 단가 변경 영향)
- 원가 집중도 변화
- 발주 구조 효율성 변화

---

### 3.7 전략 보드 (기존 유지)

**역할**: 설계 결과를 바탕으로 전략 수립

---

## 4. 핵심 원칙 및 규칙

### 4.1 입력 방식 원칙

| ❌ 금지 | ⭕ 권장 |
|---------|--------|
| "총매출 입력" | "구조 입력 → 매출 자동계산" |
| "목표 매출 직접 입력" | "이익 목표 입력 → 목표 매출 역산" |
| "원가 직접 입력" | "원가율 입력 → 원가 자동계산" |
| "비용 직접 입력" | "구조 입력 → 비용 자동계산" |

### 4.2 레버 조작 원칙

- **실시간 반영**: 레버를 바꾸면 즉시 결과판 업데이트
- **기준 대비 표시**: 모든 결과는 "기준 구조 대비 ±%" 표시
- **위험 경고**: 살아남지 못하는 구조면 즉시 경고
- **되돌리기**: "기준 구조로 되돌리기" 버튼 제공

### 4.3 설계안 저장·비교

- **설계안 저장**: 레버 조작 결과를 "설계안 1", "설계안 2" 등으로 저장
- **설계안 비교**: 여러 설계안을 나란히 비교
- **최적 설계안 선택**: "이 설계안으로 적용" 버튼 → 목표 비용구조/목표 매출구조에 반영

---

## 5. 데이터 흐름

### 5.1 기준 구조 불러오기

```
분석 데이터 (매출·비용·원가)
    ↓
설계 허브 "기준 구조 불러오기"
    ↓
기준 구조 저장 (세션 상태 또는 DB)
    ↓
각 설계실에서 기준 구조 로드
```

### 5.2 레버 조작 → 결과 계산

```
레버 조작 (일 방문객, 객단가, 가격, 원가율 등)
    ↓
실시간 계산 (예상 매출, 예상 이익, 손익분기점 등)
    ↓
결과판 업데이트 (Impact Board)
    ↓
"살아남는 구조" 판정
```

### 5.3 설계안 적용

```
설계안 저장
    ↓
"이 설계안으로 적용" 버튼
    ↓
목표 비용구조 / 목표 매출구조에 반영
    ↓
분석 카테고리에서 "목표 vs 실제" 비교 가능
```

---

## 6. UI/UX 요약

### 6.1 레버 조작 UI

- **±버튼**: 숫자 입력 옆에 ±10%, ±5% 버튼
- **슬라이더**: 비중, 비율 조정 시 슬라이더
- **드래그**: 메뉴 포트폴리오 구성 시 드래그 앤 드롭
- **즉시 피드백**: 레버 조작 시 결과판 즉시 업데이트 (st.rerun 없이)

### 6.2 결과판 UI

- **대형 배지**: "살아남는 구조" / "위험 구조" 배지
- **비교 카드**: 기준 vs 설계안 나란히 표시
- **변화량 강조**: ±%를 크고 눈에 띄게 표시
- **위험 경고**: 위험 요소별 경고 메시지

### 6.3 설계안 관리 UI

- **설계안 저장**: "이 구조를 설계안으로 저장" 버튼
- **설계안 목록**: 저장된 설계안 목록 (설계안 1, 설계안 2, ...)
- **설계안 비교**: 여러 설계안을 탭으로 전환하여 비교
- **설계안 적용**: "이 설계안으로 적용" 버튼

---

## 7. 구현 순서 제안

### Phase 1: 기준 구조 만들기 (1층)

| 단계 | 작업 | 예상 시간 |
|------|------|-----------|
| 1 | 기준 구조 데이터 모델 설계 (매출 구성, 객단가, 회전율, 인건비율, 원가율, 고정비, 변동비율) | 1일 |
| 2 | 설계 허브에 "기준 구조 불러오기" 기능 추가 | 2일 |
| 3 | 분석 데이터에서 기준 구조 자동 수집 함수 구현 | 2일 |
| 4 | 기준 구조 저장/로드 (세션 상태 또는 DB) | 1일 |
| 5 | 가게 설계 센터에 기준 구조 요약 표시 | 1일 |

### Phase 2: 조작 레버 만들기 (2층)

| 단계 | 작업 | 예상 시간 |
|------|------|-----------|
| 1 | 수익 구조 설계실에 매출 레버 UI 추가 (일 방문객, 객단가, 회전율, 영업일수) | 2일 |
| 2 | 수익 구조 설계실에 비용 레버 UI 추가 (인건비 구조, 고정비, 변동비율) | 2일 |
| 3 | 수익 구조 설계실에 구조 레버 UI 추가 (좌석 수, 운영시간) | 1일 |
| 4 | 메뉴 수익 구조 설계실에 메뉴 레버 UI 추가 (가격, 원가율, 판매 비중) | 2일 |
| 5 | 메뉴 포트폴리오 설계실에 포트폴리오 레버 UI 추가 | 1일 |
| 6 | 재료 구조 설계실에 재료 레버 UI 추가 | 1일 |

### Phase 3: 결과판 만들기 (3층)

| 단계 | 작업 | 예상 시간 |
|------|------|-----------|
| 1 | 실시간 계산 엔진 구현 (레버 변경 → 결과 즉시 계산) | 3일 |
| 2 | 결과판 UI 구현 (예상 매출, 예상 이익, 손익분기점 변화 등) | 2일 |
| 3 | "살아남는 구조" 판정 로직 구현 | 1일 |
| 4 | 기준 vs 설계안 비교 UI 구현 | 2일 |
| 5 | 위험 경고 시스템 구현 | 1일 |

### Phase 4: 설계안 관리

| 단계 | 작업 | 예상 시간 |
|------|------|-----------|
| 1 | 설계안 저장/로드 기능 구현 | 2일 |
| 2 | 설계안 비교 UI 구현 | 2일 |
| 3 | 설계안 적용 기능 (목표 비용구조/목표 매출구조 반영) | 2일 |

### Phase 5: 통합 및 테스트

| 단계 | 작업 | 예상 시간 |
|------|------|-----------|
| 1 | 모든 설계실에 기준 구조 + 레버 + 결과판 통합 | 3일 |
| 2 | 실시간 계산 성능 최적화 | 2일 |
| 3 | 사용자 테스트 및 피드백 반영 | 3일 |

**총 예상 시간**: 약 4~5주

---

## 8. 기대 효과

### 8.1 사용자 경험

- **직관적**: 레버를 조작하면 즉시 결과 확인
- **체계적**: 기준 구조 → 레버 조작 → 결과 확인의 명확한 흐름
- **실용적**: "살아남는 구조" 판정으로 즉시 판단 가능

### 8.2 설계의 정체성 명확화

- **입력**: 실제 데이터 기록
- **분석**: 기록된 데이터 해석
- **설계**: **사업 구조 설계 및 시뮬레이션** ← 명확한 차별화

### 8.3 비즈니스 가치

- **의사결정 지원**: 여러 설계안을 비교하여 최적안 선택
- **리스크 관리**: 설계 단계에서 위험 구조 사전 차단
- **목표 달성**: 구조 기반 목표 설정으로 달성 가능성 향상

---

## 9. 정리

### 9.1 설계 카테고리의 새로운 역할

1. **기준 구조 만들기**: 현재 분석 데이터를 설계 기준안으로 변환
2. **조작 레버 제공**: 사장이 실제로 바꿀 수 있는 구조 요소만 조작
3. **결과판 표시**: 레버 조작 시 즉시 예상 결과 표시
4. **"살아남는 구조" 판정**: 설계안의 생존 가능성 자동 판정

### 9.2 핵심 원칙

- ❌ "총매출 입력" → ⭕ "구조 입력 → 매출 자동계산"
- ❌ "숫자 만지는 곳" → ⭕ "사업 구조를 만지는 곳"
- **"이 설계안은 살아남는 구조인가?"** ← 설계의 정체성

---

**작성일**: 2026-01-24  
**참고**: 제공된 3층 구조 원칙, `설계_카테고리_단독기능_정리.md`, 기존 설계 페이지 구조
