# 설계 카테고리 재구성 방안

**작성 일자**: 2026-01-24  
**목적**: 기존 설계 페이지 구조를 유지하면서 3층 구조(기준 구조 → 레버 → 결과판)를 추가하는 방안

---

## 현재 상황 분석

### 기존 설계 페이지 구조

#### 1. 수익 구조 설계실 (`revenue_structure_design_lab.py`)

**현재 구조**:
- **탭 구조**: "전략 브리핑" / "전략 실행"
- **전략 브리핑 탭**:
  - ZONE A: Coach Board (고정비, 변동비율, 손익분기점, 예상 매출 카드)
  - ZONE B: Structure Map (매출 구간별 예상 이익 테이블, 손익분기점 vs 예상 매출 차트)
  - ZONE C: Owner School (이론 카드)
- **전략 실행 탭**:
  - ZONE D: Design Tools (구조 파라미터 편집, 손익분기 시뮬레이션)

**기존 기능**:
- ✅ Coach Board (요약 카드 + verdict)
- ✅ Structure Map (시각화)
- ✅ Owner School (이론)
- ✅ Design Tools (비용 구조 입력 링크, 시뮬레이션)

#### 2. 메뉴 수익 구조 설계실 (`menu_profit_design_lab.py`)

**현재 구조**:
- ZONE A: Coach Board
- ZONE B: Structure Map
- ZONE C: Owner School
- ZONE D: Design Tools (메뉴별 가격/원가율 편집)

**기존 기능**:
- ✅ Coach Board
- ✅ Structure Map
- ✅ Owner School
- ✅ Design Tools (메뉴 CRUD)

#### 3. 가게 설계 센터 (`design_center.py`)

**현재 구조**:
- 4개 설계실 통합 진단
- 영역별 코치 카드
- 판결문·추천 액션
- 루틴 점검 완료
- 전략 보드 바로가기
- 최근 전략 실행 결과

**기존 기능**:
- ✅ 통합 진단
- ✅ 루틴 점검
- ✅ 전략 연동

---

## 재구성 방안: 기존 유지 + 신규 추가

### 방안 1: 기존 구조 유지 + 신규 ZONE 추가 (권장)

**핵심 원칙**: 기존 기능은 유지하고, 새로운 기능을 추가

#### 수익 구조 설계실 재구성

**기존 탭 구조 유지**:
- "전략 브리핑" / "전략 실행" 탭 유지

**전략 브리핑 탭 재구성**:
```
ZONE A: Coach Board (기존 유지)
    ↓
ZONE B: 기준 구조 (신규 추가)
    - "현재 구조 불러오기" 버튼
    - 기준 구조 요약 카드 (일 방문객, 객단가, 회전율, 영업일수, 고정비, 변동비율)
    ↓
ZONE C: 조작 레버 (신규 추가)
    - 매출 레버 (일 방문객, 객단가, 회전율, 영업일수)
    - 비용 레버 (인건비 구조, 고정비, 변동비율)
    - 구조 레버 (좌석 수, 운영시간)
    ↓
ZONE D: 결과판 (Impact Board) (신규 추가)
    - 예상 월매출, 예상 영업이익
    - 손익분기점 변화
    - 인건비율/원가율 변화
    - "살아남는 구조" 판정
    - 기준 vs 설계안 비교 차트
    ↓
ZONE E: Structure Map (기존 유지, 위치 조정)
    - 매출 구간별 예상 이익 테이블
    - 손익분기점 vs 예상 매출 차트
    ↓
ZONE F: Owner School (기존 유지)
```

**전략 실행 탭**:
```
ZONE G: Design Tools (기존 유지)
    - 구조 파라미터 편집
    - 손익분기 시뮬레이션
```

**장점**:
- ✅ 기존 기능 유지 (사용자 혼란 최소화)
- ✅ 새로운 기능 추가 (3층 구조 구현)
- ✅ 점진적 업그레이드 가능

**단점**:
- ⚠️ 페이지가 길어질 수 있음 (하지만 탭 구조로 분리 가능)

---

### 방안 2: 기존 ZONE 재구성 (대폭 변경)

**핵심 원칙**: 기존 ZONE을 새로운 구조로 교체

#### 수익 구조 설계실 재구성

**전략 브리핑 탭**:
```
ZONE A: Coach Board (기존 유지)
    ↓
ZONE B: 기준 구조 (기존 Structure Map → 교체)
    ↓
ZONE C: 조작 레버 (신규)
    ↓
ZONE D: 결과판 (신규)
    ↓
ZONE E: Owner School (기존 유지)
```

**전략 실행 탭**:
```
ZONE F: Design Tools (기존 유지)
```

**장점**:
- ✅ 페이지 구조가 더 간결
- ✅ 새로운 기능에 집중

**단점**:
- ⚠️ 기존 Structure Map 기능 손실 (하지만 결과판에 통합 가능)
- ⚠️ 사용자 혼란 가능성 (기존 기능 위치 변경)

---

### 방안 3: 하이브리드 (권장)

**핵심 원칙**: 기존 기능 유지 + 새로운 기능 추가, Structure Map은 결과판에 통합

#### 수익 구조 설계실 재구성

**전략 브리핑 탭**:
```
ZONE A: Coach Board (기존 유지)
    ↓
ZONE B: 기준 구조 (신규 추가)
    ↓
ZONE C: 조작 레버 (신규 추가)
    ↓
ZONE D: 결과판 (Impact Board) (신규)
    - 예상 월매출, 예상 영업이익
    - 손익분기점 변화
    - "살아남는 구조" 판정
    - 기준 vs 설계안 비교 차트
    - [기존 Structure Map 내용 통합]
        - 매출 구간별 예상 이익 테이블
        - 손익분기점 vs 예상 매출 차트
    ↓
ZONE E: Owner School (기존 유지)
```

**전략 실행 탭**:
```
ZONE F: Design Tools (기존 유지)
```

**장점**:
- ✅ 기존 기능 유지 (Coach Board, Owner School, Design Tools)
- ✅ 새로운 기능 추가 (기준 구조, 레버, 결과판)
- ✅ 기존 Structure Map 기능을 결과판에 통합 (중복 제거)
- ✅ 페이지 구조가 명확 (기준 → 레버 → 결과)

---

## 최종 권장 방안: 방안 3 (하이브리드)

### 수익 구조 설계실

**전략 브리핑 탭**:
1. **ZONE A: Coach Board** (기존 유지)
2. **ZONE B: 기준 구조** (신규)
   - "현재 구조 불러오기" 버튼
   - 기준 구조 요약 카드
3. **ZONE C: 조작 레버** (신규)
   - 매출 레버, 비용 레버, 구조 레버
4. **ZONE D: 결과판 (Impact Board)** (신규)
   - 예상 결과 지표
   - "살아남는 구조" 판정
   - 기준 vs 설계안 비교
   - [기존 Structure Map 통합]
5. **ZONE E: Owner School** (기존 유지)

**전략 실행 탭**:
6. **ZONE F: Design Tools** (기존 유지)

---

### 메뉴 수익 구조 설계실

**전략 브리핑 탭**:
1. **ZONE A: Coach Board** (기존 유지)
2. **ZONE B: 기준 구조** (신규)
   - 현재 메뉴별 가격, 원가율, 판매 비중
3. **ZONE C: 메뉴 레버** (신규)
   - 메뉴별 가격, 원가율, 판매 비중 조작
4. **ZONE D: 결과판** (신규)
   - 예상 월매출, 원가, 공헌이익
   - 평균 원가율 변화
   - "살아남는 구조" 판정
   - [기존 Structure Map 통합]
5. **ZONE E: Owner School** (기존 유지)

**전략 실행 탭**:
6. **ZONE F: Design Tools** (기존 유지)

---

### 가게 설계 센터

**기존 구조 유지 + 신규 추가**:
1. **ZONE A: 기준 구조 요약** (신규 추가, 상단)
   - 기준 구조 카드 4개
2. **ZONE B: 4개 설계실 통합 진단** (기존 유지)
3. **ZONE C: 기준 vs 설계안 비교** (신규 추가)
   - 각 설계실별 기준 vs 설계안 비교

---

## 구현 전략

### 1단계: 기존 코드 유지

- 기존 ZONE 렌더링 함수는 그대로 유지
- Coach Board, Owner School, Design Tools는 변경 없음

### 2단계: 신규 ZONE 추가

- `_render_baseline_structure()` 함수 추가
- `_render_levers()` 함수 추가
- `_render_impact_board()` 함수 추가

### 3단계: 기존 ZONE 통합

- 기존 Structure Map 내용을 결과판에 통합
- 기존 Structure Map ZONE은 제거하거나 결과판 내부로 이동

### 4단계: 데이터 흐름 연결

- 기준 구조 불러오기 → 레버 초기값 설정
- 레버 변경 → 결과판 실시간 업데이트
- 결과판 → "살아남는 구조" 판정

---

## 결론

**기존 페이지를 완전히 제거할 필요는 없습니다.**

대신:
1. ✅ **기존 기능 유지**: Coach Board, Owner School, Design Tools
2. ✅ **신규 기능 추가**: 기준 구조, 조작 레버, 결과판
3. ✅ **기존 기능 통합**: Structure Map을 결과판에 통합
4. ✅ **점진적 업그레이드**: 기존 사용자 혼란 최소화

이렇게 하면 **기존 기능은 유지하면서 새로운 3층 구조를 추가**할 수 있습니다.

---

**작성일**: 2026-01-24  
**참고**: `설계_카테고리_역할_재정의_기획안.md`, 기존 설계 페이지 코드
