# PHASE 9 / STEP 9-1C — "가게 설계" 메뉴 트리 수정 완료

## 📋 작업 목표

"🔥 가게 설계" 카테고리 내부 메뉴를 최종 기획에 맞게 수정했습니다.
UI/로직 변경 없이, 메뉴 항목(라벨/배치/연결)만 정합성 있게 수정했습니다.

---

## ✅ 완료된 작업

### 1. "레시피 설계실" 제거
- **변경 내용**: 사이드바 메뉴에서 "레시피 설계실" 항목 제거
- **이유**: 레시피는 "메뉴 설계실" 내부 기능/섹션으로 흡수될 성격
- **라우팅**: 기존 `"레시피 등록"` 페이지는 유지 (직접 URL 접근 가능)

### 2. "메뉴 수익 구조 설계실" 추가
- **라벨**: "메뉴 수익 구조 설계실 (가격·마진)"
- **임시 연결**: `"원가 파악"` 페이지 (`cost_overview.py`)
- **이유**: 메뉴별 원가/원가율/공헌이익 분석 기능이 가장 적합

### 3. "수익 구조 설계실" 추가
- **라벨**: "수익 구조 설계실 (가게 전체 돈 구조)"
- **임시 연결**: `"목표 비용구조"` 페이지 (`target_cost_structure.py`)
- **이유**: 가게 전체 비용 구조와 수익성 분석 기능이 가장 적합

### 4. "운영 기반" 하위 항목 유지
- 직원 연락망
- 협력사 연락망
- 게시판

---

## 📝 최종 "가게 설계" 메뉴 트리 (상→하)

1. **메뉴 설계실**
   - 페이지 키: `"메뉴 등록"`
   - 파일: `ui_pages/menu_management.py`

2. **재료 구조 설계실**
   - 페이지 키: `"재료 등록"`
   - 파일: `ui_pages/ingredient_management.py`

3. **메뉴 수익 구조 설계실** (신규)
   - 페이지 키: `"원가 파악"` (임시 연결)
   - 파일: `ui_pages/cost_overview.py`
   - **임시 연결 이유**: 메뉴별 원가/원가율/공헌이익 분석 기능 제공

4. **수익 구조 설계실** (신규)
   - 페이지 키: `"목표 비용구조"` (임시 연결)
   - 파일: `ui_pages/target_cost_structure.py`
   - **임시 연결 이유**: 가게 전체 비용 구조와 수익성 분석 기능 제공

5. **목표 비용 구조**
   - 페이지 키: `"목표 비용구조"`
   - 파일: `ui_pages/target_cost_structure.py`

6. **목표 매출 구조**
   - 페이지 키: `"목표 매출구조"`
   - 파일: `ui_pages/target_sales_structure.py`

7. **직원 연락망**
   - 페이지 키: `"직원 연락망"`
   - 파일: `ui_pages/staff_contacts.py`

8. **협력사 연락망**
   - 페이지 키: `"협력사 연락망"`
   - 파일: `ui_pages/vendor_contacts.py`

9. **게시판**
   - 페이지 키: `"게시판"`
   - 파일: `ui_pages/board.py`

---

## 📊 변경 사항 요약

### 제거된 항목
- **레시피 설계실** → 사이드바 메뉴에서 제거
  - 기존 페이지 키: `"레시피 등록"`
  - 라우팅 코드: 유지 (직접 URL 접근 가능)
  - 향후 계획: "메뉴 설계실" 내부 기능으로 흡수 예정

### 추가된 항목
- **메뉴 수익 구조 설계실**
  - 임시 페이지 키: `"원가 파악"`
  - 임시 연결 파일: `ui_pages/cost_overview.py`
  - 최종 계획: 별도 페이지 구현 예정

- **수익 구조 설계실**
  - 임시 페이지 키: `"목표 비용구조"`
  - 임시 연결 파일: `ui_pages/target_cost_structure.py`
  - 최종 계획: 별도 페이지 구현 예정

---

## 🔍 임시 연결 기준 설명

### 메뉴 수익 구조 설계실 → "원가 파악" (`cost_overview.py`)
**선택 기준**:
- `cost_overview.py`는 메뉴별 원가, 원가율, 공헌이익을 분석하는 기능 제공
- "가격·마진" 분석 목적에 가장 적합한 기존 페이지
- 메뉴별 수익성 분석 기능이 이미 구현되어 있음

### 수익 구조 설계실 → "목표 비용구조" (`target_cost_structure.py`)
**선택 기준**:
- `target_cost_structure.py`는 가게 전체 비용 구조(고정비/변동비)와 수익성 분석 기능 제공
- "가게 전체 돈 구조" 분석 목적에 가장 적합한 기존 페이지
- 손익분기점, 이익률 등 종합 수익성 분석 기능이 이미 구현되어 있음

---

## 📝 수정된 파일 목록

### 1. `app.py`
**변경 내용**:
- 라인 1540-1549: `"🔥 가게 설계"` 카테고리 메뉴 항목 수정

**변경 전**:
```python
"🔥 가게 설계": [
    ("메뉴 설계실", "메뉴 등록"),
    ("재료 구조 설계실", "재료 등록"),
    ("레시피 설계실", "레시피 등록"),  # 제거
    ("목표 비용 구조", "목표 비용구조"),
    ("목표 매출 구조", "목표 매출구조"),
    ("직원 연락망", "직원 연락망"),
    ("협력사 연락망", "협력사 연락망"),
    ("게시판", "게시판"),
],
```

**변경 후**:
```python
"🔥 가게 설계": [
    ("메뉴 설계실", "메뉴 등록"),
    ("재료 구조 설계실", "재료 등록"),
    ("메뉴 수익 구조 설계실", "원가 파악"),  # 신규 추가 (임시 연결)
    ("수익 구조 설계실", "목표 비용구조"),  # 신규 추가 (임시 연결)
    ("목표 비용 구조", "목표 비용구조"),
    ("목표 매출 구조", "목표 매출구조"),
    ("직원 연락망", "직원 연락망"),
    ("협력사 연락망", "협력사 연락망"),
    ("게시판", "게시판"),
],
```

---

## ⚠️ 주의사항

### 레시피 등록 페이지
- **상태**: 사이드바 메뉴에서만 제거됨
- **라우팅**: `elif page == "레시피 등록":` 코드는 유지
- **접근**: 직접 URL 파라미터(`?page=레시피 등록`)로 접근 가능
- **향후 계획**: "메뉴 설계실" 내부 기능으로 흡수 예정

### 임시 연결 페이지
- **메뉴 수익 구조 설계실**: 현재 `"원가 파악"` 페이지로 연결
  - 향후 별도 페이지 구현 시 라우팅 변경 필요
- **수익 구조 설계실**: 현재 `"목표 비용구조"` 페이지로 연결
  - 향후 별도 페이지 구현 시 라우팅 변경 필요
  - **참고**: "목표 비용 구조"와 동일 페이지로 연결되어 있으나, 라벨로 구분

---

## ✅ 앱 실행 시 확인 체크리스트

### 기본 동작 확인
- [ ] 사이드바 "🔥 가게 설계" Expander 클릭 시 새 메뉴 구조 표시
- [ ] "레시피 설계실" 항목이 사라졌는지 확인
- [ ] "메뉴 수익 구조 설계실" 항목이 추가되었는지 확인
- [ ] "수익 구조 설계실" 항목이 추가되었는지 확인

### 메뉴 클릭 동작 확인
- [ ] 메뉴 설계실 → 메뉴 등록 페이지 정상 이동
- [ ] 재료 구조 설계실 → 재료 등록 페이지 정상 이동
- [ ] 메뉴 수익 구조 설계실 → 원가 파악 페이지 정상 이동
- [ ] 수익 구조 설계실 → 목표 비용구조 페이지 정상 이동
- [ ] 목표 비용 구조 → 목표 비용구조 페이지 정상 이동
- [ ] 목표 매출 구조 → 목표 매출구조 페이지 정상 이동
- [ ] 직원 연락망 → 직원 연락망 페이지 정상 이동
- [ ] 협력사 연락망 → 협력사 연락망 페이지 정상 이동
- [ ] 게시판 → 게시판 페이지 정상 이동

### 레시피 등록 접근 확인
- [ ] URL에 `?page=레시피 등록` 직접 입력 시 페이지 정상 표시
- [ ] 사이드바 메뉴에는 "레시피 설계실" 항목이 없음

---

## 🎯 기대 동작

### 사용자 경험
1. **메뉴 구조**: 최종 기획에 맞는 9개 항목으로 재구성
2. **레시피 접근**: 사이드바에서 제거되었으나, 직접 URL 접근 가능
3. **임시 연결**: 신규 메뉴 항목이 기존 페이지로 연결되어 즉시 사용 가능

### 코드 안정성
- 모든 페이지 키는 기존과 동일하게 유지
- 라우팅 코드 변경 없음
- Import 경로 변경 없음
- 기존 페이지 로직 변경 없음

---

## 📌 향후 작업 (참고)

### 별도 페이지 구현 예정
1. **메뉴 수익 구조 설계실** 전용 페이지
   - 현재: `"원가 파악"` 임시 연결
   - 목표: 메뉴별 가격·마진 분석 전용 페이지 구현

2. **수익 구조 설계실** 전용 페이지
   - 현재: `"목표 비용구조"` 임시 연결
   - 목표: 가게 전체 돈 구조 분석 전용 페이지 구현

3. **레시피 기능 통합**
   - 현재: 독립 페이지로 유지
   - 목표: "메뉴 설계실" 내부 기능으로 흡수

---

## 🚀 배포 준비

모든 수정이 완료되었습니다. 다음 단계:
1. ✅ 앱 재시작
2. ✅ 사이드바 "🔥 가게 설계" Expander 확인
3. ✅ 새 메뉴 항목 클릭하여 임시 연결 페이지 정상 동작 확인
4. ✅ 레시피 등록 페이지 직접 URL 접근 확인

---

## 📊 작업 요약

| 항목 | 상태 | 비고 |
|------|------|------|
| 레시피 설계실 제거 | ✅ 완료 | 사이드바 메뉴에서만 제거 |
| 메뉴 수익 구조 설계실 추가 | ✅ 완료 | 임시 연결: 원가 파악 |
| 수익 구조 설계실 추가 | ✅ 완료 | 임시 연결: 목표 비용구조 |
| 운영 기반 항목 유지 | ✅ 완료 | 직원/협력사/게시판 |
| 라우팅 코드 점검 | ✅ 완료 | 깨짐 없음 확인 |

---

## ✅ 최종 확인

- [x] "레시피 설계실" 사이드바 메뉴에서 제거 완료
- [x] "메뉴 수익 구조 설계실" 추가 완료 (임시 연결)
- [x] "수익 구조 설계실" 추가 완료 (임시 연결)
- [x] 최종 메뉴 트리 9개 항목으로 재구성 완료
- [x] 라우팅 코드 점검 완료 (깨짐 없음)
- [ ] 앱 실행 및 동작 확인 (사용자 확인 필요)

**참고**: 
- 레시피 등록 페이지는 사이드바에서만 제거되었으며, 직접 URL 접근은 여전히 가능합니다.
- 신규 메뉴 항목은 임시로 기존 페이지에 연결되어 있으며, 향후 별도 페이지 구현 예정입니다.
